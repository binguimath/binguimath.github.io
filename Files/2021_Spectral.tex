% !TeX spellcheck = en_US
% !TEX program = pdflatex
\documentclass[12pt,b5paper,notitlepage]{article}
\usepackage[b5paper, margin={0.5in,0.65in}]{geometry}
%\usepackage{fullpage}
\usepackage{amsmath,amscd,amssymb,amsthm,mathrsfs,amsfonts,layout,indentfirst,graphicx,caption,mathabx, stmaryrd,appendix,calc,imakeidx,upgreek} % mathabx for \wtidecheck
%\usepackage{ulem} %wave underline
\usepackage[dvipsnames]{xcolor}
\usepackage{palatino}  %template

\usepackage{slashed} % Dirac operator
\usepackage{mathrsfs} % Enable using \mathscr
%\usepackage{eufrak}  another template/font
\usepackage{extarrows} % long equal sign, \xlongequal{blablabla}
\usepackage{enumitem} % enumerate label change e.g. [label=(\alph*)]  shows (a) (b) 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{fontspec}
%\setmainfont{Palatino Linotype}
%\usepackage{emoji}


% emoji, use lualatex  remove \usepackage{palatino}

%%%%%%%%%%%%%


\usepackage{CJK}   % Chinese package





\usepackage{csquotes} % \begin{displayquote}   \begin{displaycquote}  for quotation
\usepackage{epigraph}   %\epigraph{}{}  for quotation
%\pmb  mandatory math bold 

\usepackage{fancyhdr} % date in footer

%\usepackage{soul}  %\ul underline break line automatically

\usepackage{ulem}  % \uline  underline break line   also    \uwave

\usepackage{relsize} % use \mathlarger \larger \text{\larger[2]$...$} to enlarge the size of math symbols

\usepackage{verbatim}  % comment environment


\usepackage{halloweenmath} % Interesting halloween math symbols

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{tcolorbox}
\tcbuselibrary{theorems}
% box around equations   \tcboxmath
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% circled colon and thick colon \hcolondel and \colondel

\usepackage{pdfrender}

\newcommand*{\hollowcolon}{%
	\textpdfrender{
		TextRenderingMode=Stroke,
		LineWidth=.1bp,
	}{:}%
}

\newcommand{\hcolondel}[1]{%
	\mathopen{\hollowcolon}#1\mathclose{\hollowcolon}%
}
\newcommand{\colondel}[1]{%
	\mathopen{:}#1\mathclose{:}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\usepackage{tikz}
\usetikzlibrary{fadings}
\usetikzlibrary{patterns}
\usetikzlibrary{shadows.blur}
\usetikzlibrary{shapes}

\usepackage{tikz-cd}
\usepackage[nottoc]{tocbibind}   % Add  reference to ToC


\makeindex


% The following set up the line spaces between items in \thebibliography
\usepackage{lipsum}  
\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
	\OLDthebibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{2pt} 
}


%\hyperref{page.10}{...}

\allowdisplaybreaks  %allow aligns to break between pages
\usepackage{latexsym}
\usepackage{chngcntr}
\usepackage[colorlinks,linkcolor=blue,anchorcolor=blue, linktocpage,
%pagebackref
]{hyperref}
\hypersetup{ urlcolor=cyan,
	citecolor=[rgb]{0,0.5,0}}


\setcounter{tocdepth}{1}	 %hide subsections in the content


\counterwithin{figure}{section}

%\counterwithin*{footnote}{section}   %% Footnote numbering is recounted from the beginning of each subsection



\pagestyle{plain}

\captionsetup[figure]
{
	labelsep=none	
}



\theoremstyle{definition}
\newtheorem{df}{Definition}[section]
\newtheorem{eg}[df]{Example}
\newtheorem{exe}[df]{Exercise}
\newtheorem{rem}[df]{Remark}
\newtheorem{ass}[df]{Assumption}
\newtheorem{cv}[df]{Convention}
\newtheorem{nota}[df]{Notation}
\newtheorem{st}{Step}
\theoremstyle{plain}
\newtheorem{thm}[df]{Theorem}
\newtheorem{thd}[df]{Theorem-Definition}
\newtheorem{pp}[df]{Proposition}
\newtheorem{co}[df]{Corollary}
\newtheorem{lm}[df]{Lemma}
\newtheorem{cond}{Condition}
\renewcommand{\thecond}{\Alph{cond}} % "letter-numbered" theorems



%\substack   multiple lines under sum
%\underset{b}{a}   b is under a


% Remind: \overline{L_0}



\newcommand{\fk}{\mathfrak}
\newcommand{\mc}{\mathcal}
\newcommand{\wtd}{\widetilde}
\newcommand{\wht}{\widehat}
\newcommand{\wch}{\widecheck}
\newcommand{\ovl}{\overline}
\newcommand{\udl}{\underline}
\newcommand{\tr}{\mathrm{t}} %transpose
\newcommand{\Tr}{\mathrm{Tr}}
\newcommand{\End}{\mathrm{End}} %endomorphism
\newcommand{\idt}{\mathbf{1}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\Conf}{\mathrm{Conf}}
\newcommand{\Res}{\mathrm{Res}}
\newcommand{\KZ}{\mathrm{KZ}}
\newcommand{\ev}{\mathrm{ev}}
\newcommand{\coev}{\mathrm{coev}}
\newcommand{\opp}{\mathrm{opp}}
\newcommand{\Rep}{\mathrm{Rep}}
\newcommand{\diag}{\mathrm{diag}}
\newcommand{\Dom}{\scr D}
\newcommand{\loc}{\mathrm{loc}}
\newcommand{\con}{\mathrm{c}}
\newcommand{\uni}{\mathrm{u}}
\newcommand{\ssp}{\mathrm{ss}}
\newcommand{\di}{\slashed d}
\newcommand{\Diffp}{\mathrm{Diff}^+}
\newcommand{\Diff}{\mathrm{Diff}}
\newcommand{\PSU}{\mathrm{PSU}}
\newcommand{\Vir}{\mathrm{Vir}}
\newcommand{\Witt}{\mathscr W}
\newcommand{\Span}{\mathrm{Span}}
\newcommand{\pri}{\mathrm{p}}
\newcommand{\ER}{E^1(V)_{\mathbb R}}
\newcommand{\bk}[1]{\langle {#1}\rangle}
\newcommand{\GA}{\mathscr G_{\mathcal A}}
\newcommand{\vs}{\varsigma}
\newcommand{\Vect}{\mathrm{Vec}}
\newcommand{\Vectc}{\mathrm{Vec}^{\mathbb C}}
\newcommand{\scr}{\mathscr}
\newcommand{\sjs}{\subset\joinrel\subset}
\newcommand{\Jtd}{\widetilde{\mathcal J}}
\newcommand{\gk}{\mathfrak g}
\newcommand{\hk}{\mathfrak h}
\newcommand{\xk}{\mathfrak x}
\newcommand{\yk}{\mathfrak y}
\newcommand{\zk}{\mathfrak z}
\newcommand{\hr}{\mathfrak h_{\mathbb R}}
\newcommand{\Ad}{\mathrm{Ad}}
\newcommand{\DHR}{\mathrm{DHR}_{I_0}}
\newcommand{\Repi}{\mathrm{Rep}_{\wtd I_0}}
\newcommand{\im}{\mathbf{i}}
\newcommand{\Co}{\complement}
%\newcommand{\Cu}{\mathcal C^{\mathrm u}}
\newcommand{\RepV}{\mathrm{Rep}^\uni(V)}
\newcommand{\RepA}{\mathrm{Rep}^\uni(A)}
\newcommand{\RepAU}{\mathrm{Rep}^\uni(A_U)}
\newcommand{\RepU}{\mathrm{Rep}^\uni(U)}
\newcommand{\BIM}{\mathrm{BIM}^\uni}
\newcommand{\BIMA}{\mathrm{BIM}^\uni(A)}
\newcommand{\shom}{\underline{\Hom}}
\newcommand{\divi}{\mathrm{div}}
\newcommand{\sgm}{\varsigma}
\newcommand{\SX}{S_{\fk X}}
\newcommand{\DX}{D_{\fk X}}
\newcommand{\mbb}{\mathbb}
\newcommand{\mbf}{\mathbf}
\newcommand{\blt}{\bullet}
\newcommand{\coker}{\mathrm{coker}}
\newcommand{\Vbb}{\mathbb V}
\newcommand{\Wbb}{\mathbb W}
\newcommand{\Mbb}{\mathbb M}
\newcommand{\Gbb}{\mathbb G}
\newcommand{\Cbb}{\mathbb C}
\newcommand{\Nbb}{\mathbb N}
\newcommand{\Zbb}{\mathbb Z}
\newcommand{\Pbb}{\mathbb P}
\newcommand{\Rbb}{\mathbb R}
\newcommand{\Ebb}{\mathbb E}
\newcommand{\cbf}{\mathbf c}
\newcommand{\wt}{\mathrm{wt}}
\newcommand{\Lie}{\mathrm{Lie}}
\newcommand{\btl}{\blacktriangleleft}
\newcommand{\btr}{\blacktriangleright}
\newcommand{\svir}{\mathcal V\!\mathit{ir}}
\newcommand{\Ker}{\mathrm{Ker}}
\newcommand{\Coker}{\mathrm{Coker}}
\newcommand{\Sbf}{\mathbf{S}}
\newcommand{\low}{\mathrm{low}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\Rng}{\mathrm{Rng}}
\newcommand{\vN}{\mathrm{vN}}
\newcommand{\fin}{\mathrm{fin}}
\newcommand{\eps}{\varepsilon}











\numberwithin{equation}{section}




\title{Spectral Theory for Strongly Commuting Normal Closed Operators}
\author{{\sc Bin Gui}
	%\\
	%{\small Department of Mathematics, Rutgers university}\\
	%{\small bin.gui@rutgers.edu}
}
\date{\footnotesize First edition finished in  2021.9. Last update in 2024.9}
\begin{document}\sloppy % avoid stretch into margins
	\pagenumbering{arabic}
	%\pagenumbering{gobble}
	%\newpage
	%\setcounter{page}{1}
	%\setcounter{section}{-1}
	%\setcounter{equation}{6}
	
	
	
	\maketitle
	
	
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\newcommand\blfootnote[1]{%
	\begingroup
	\renewcommand\thefootnote{}\footnote{#1}%
	\addtocounter{footnote}{-1}%
	\endgroup
}
% Footnote without marker

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{-0.5cm}
%\small
%\hyperlink{beforeindex}{Current page of writing}~~~~~~ 
%\normalsize

%\tableofcontents



%\blfootnote{First version (Sec. 1-10) finished in  2021.9. Last update in 2024.9}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5



\makeatletter
\newcommand*{\toccontents}{\@starttoc{toc}}
\makeatother
\toccontents

% title and table of contents same page


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	
	
	

	
	

	
	
	
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	%\newpage
	%$~$
	%\renewcommand\contentsname{} % the empty name
	
	%\begingroup
	%\let\clearpage\relax
	%\vspace{-2cm} % the removed space. Set as appropriate
	
	
	% Remove header of table of contents
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	
\newpage

\section*{Preface to the second edition}


Sections 11, 12, and 13 have been added to this monograph. Together with these sections, this monograph fulfills the task of giving a complete introduction to the ``prehistory" of von Neumann algebras, namely, von Neumann's solo works on von Neumann algebras prior to his celebrated series of joint papers with Murray under the title \textit{on rings of operators} beginning in 1936.


The 1929 paper \cite{vNeu29}, in which von Neumann algebras were first introduced, clearly indicates that one of the early goals of studying von Neumann algebras is to understand the spectral theory for unbounded operators, or more precisely, unbounded normal operators. Two deep results about von Neumann algebras were proved in \cite{vNeu32}. The first one is the bicommutant theorem for von Neumann algebras (Thm. \ref{lb59} and \ref{lb60}), which was used in the same paper to define and study unbounded normal operators. It should be stressed that unbounded normal operators were initially defined using abelian von Neumann algebras, not using the condition $T^*T=TT^*$. Indeed, the correct definition of adjoint closed operators (together with the proof of the polar decomposition for closed operators) was discovered in \cite{vNeu32}, three years after the publication of \cite{vNeu29}.


The second one is the fact that any abelian von Neumann algebra on a separable Hilbert space is generated by a single bounded self-adjoint operator, cf. Thm. \ref{lb97}. Applications of this result were first given in \cite{vNeu31}, the second fundamental paper on von Neumann algebras. This paper proved that the von Neumann algebra generated by a collection of mutually commuting bounded self-adjoint operators $(T_\alpha)_{\alpha\in\fk A}$ is equal to the set of bounded Borel functional calculi of $(T_\alpha)_{\alpha\in\fk A}$, cf. Thm. \ref{lb96} for the case that $(T_\alpha)$ is a finite collection (but not necessarily bounded). Combining these two theorems together, \cite{vNeu31} proved that these $(T_\alpha)$ are the Borel functional calculi of a common bounded self-adjoint operator $H$, and that $H$ is also a Borel functional calculus of $(T_\alpha)$. This is the main result of \cite{vNeu31}. 

Although von Neumann didn't mention why he was interested in this result, I conjecture that one of his motivations was to prove the theorem that any normal operator $T$ can be written as $T=f(H)$ where $f:\Rbb\rightarrow\Cbb$ is Borel and $H$ is self-adjoint, cf. Cor. \ref{lb98}. The importance of this theorem should be understood in view of quantum mechanics, since $f(H)$ seems to be one of the most natural ways that normal operators appear in quantum mechanics. Mathematically, this theorem is interesting because of the following reasons:
\begin{itemize}
\item The statement of this theorem does not rely on von Neumann algebras. However, the proof of this theorem does.
\item This theorem no longer holds if $f$ is only assumed to be  continuous or semicontinuous; Borel functions are necessary. Therefore, the study of this theorem improved the understanding of measure theory at that time. In particular, \cite{vNeu31} gave a proof of the completeness of $L^2$-spaces for Lebesgue-Stietjes measures, generalizing the $L^2$-completeness of Lebesgue measures by proved by Riesz and Fischer in 1907.
\end{itemize}



Thus, a proper understanding of von Neumann algebras cannot be separated from the spectral theory of unbounded normal operators. In the three new sections of this monograph, we prove all the results mentioned above, except that we restrict ourselves to the case that $(T_\alpha)_{\alpha\in\fk A}$ is a \textit{finite} collection of strongly commuting normal closed operators. The generalization to infinite collections follows from a similar idea, although the proof is more technical since one has to deal with Borel functions on an infinite product of $\Cbb$.



The proofs of these results (in Sec. 13) give us a good excuse to introduce the notion of \textbf{normal representations} of von Neumann algebras. Although normal representations were not explicitly mentioned in \cite{vNeu29,vNeu31}, some of its vague ideas already appeared in \cite{vNeu31}. Therefore, we take this opportunity to give a systematic account of the basic facts about normal representations in Sec. 11 and 12.


Our treatment of normal representations differs from most books on von Neumann algebras in that we do not study normal states first and then use it as an intermediate tool for studying normal representations. Instead, we \uline{study normal representations directly}. The main result is the equivalence of two types of definitions of normal representations (cf. Thm. \ref{lb84}): The first one is extrinsic and uses the central supports of projections. The second type is intrinsic, calling a representation normal if it is continuous with respect to the $\sigma$-strong*/$\sigma$-strong/$\sigma$-weak topology. That these three topologies make no difference for the definition of normal representations is an interesting fact, reminding one of the definition of von Neumann algebras using various topologies. Indeed, the bicommutant theorem also says that the extrinsic definition of von Neumann algebras (in terms of commutant) equals the intrinsic ones. This is no coincidence, since we will use the bicommutant theorem to prove the equivalence of the these definitions of normal representations.


Kaplansky's density theorem roughly says that in von Neumann algebras, any approximation to a bounded operator can be replaced by another one whose operator norms are uniformly bounded, cf. Thm. \ref{lb88}. We use this result to give another characterization of normal representations: a representation of a von Neumann algebra $\mc M$ is normal iff it is $\sigma$-strongly*/$\sigma$-strongly/$\sigma$-weakly/strongly*/strongly/weakly continous when restricted to the closed unit ball of $\mc M$, cf. Thm. \ref{lb99}.

We hope that our presentation clarifies the mystery behind the equivalence of various definitions of normal representations, as well as their relationship with the bicommutant theorem and Kaplansky's density theorem.\\[2ex]


\hfill September 2024







 































\section*{Preface to the first edition}


The goal of this monograph is to give a detailed and self-contained account of the spectral theory for strongly commuting normal closed operators on a Hilbert space $\mc H$, and their (bounded and unbounded) Borel functional calculus. We assume the readers are familiar with general topology (as in \cite{Mun}), measure theory and basic Hilbert space theory (as in \cite{Rud-R}), and basic properties of bounded linear operators between Hilbert spaces (recalled in Section \ref{lb63}). No previous knowledge on the general theory of Banach spaces or locally convex spaces is assumed.

Our approach in this monograph has the following features:

The crucial step in the proof of spectral theorem for adjointly commuting normal bounded operators is to establish an inequality for polynomial functional calculus as in Prop. \ref{lb1}. Unlike many approaches, ours relies neither on Gelfand-Naimark theorem nor on Gelfand's formula $\sup\{|\lambda|:\lambda\in\Sp(T)\}=\lim_{n\rightarrow\infty}\lVert T^n\lVert^{1/n}$ for a bounded operator $T$. Instead, we prove it by establishing the algebraic properties of holomorphic functional calculus; see Thm. \ref{lb2}. We in turn give a new proof of Gelfand-Naimark theorem; see exercise \ref{lb64}.

Before introducing the theory of unbounded closed operators, we first establish the spectral theory for unbounded positive operators, i.e., those unbounded $T$ on $\mc H$ satisfying that $\bk{T\xi|\xi}\geq 0$ for each $\xi\in\mc H$ and that $1+T$ is surjective. This is easy, since we have spectral theorem for the bounded positive operator $(1+T)^{-1}$.

Our treatment of the general theory of closed and closable operators rely on polar decomposition (Thm. \ref{lb22}), which factors a closed operator as the product of a partial isometry and a positive operator. Thus, the spectral theory for strongly commuting normal closed operators follows from that for adjoint commuting partial isometries and bounded positive operators, which are established in Section \ref{lb65}. Our preference for the method of polar decomposition is due to the fact that it is also an important tool in the study of non-normal closed operators, or more generally, non-abelian von Neumann algebras.

We give in this monograph an introduction to the strong commutativity of unbounded closed operators, not assuming they are normal. (Indeed, normality can be understood using strong commutativity; see Def. \ref{lb52}). von Neumann algebras appear naturally in the study of strong commutativity. See Section \ref{lb66}. On the other hand, we introduce von Neumann algebras mainly to understand strong commutativity. Unlike \cite{Kad}, von Neumann algebras are not widely used in our proofs of spectral theorem and Borel functional calculus. The readers who are not interested in von Neumann algebras can skip the sections on strong commutativity, and read the proof of spectral theorem (Thm. \ref{lb35})  by assuming there  is only one normal operator $T$.

We present spectral theorem in the ``multiplication form": that is, strongly commuting normal closed operators $T_1,\dots,T_N$ are simultaneously unitarily equivalent to the multiplication of the coordinate functions $z_1,\dots,z_N$ on $\bigoplus_{n\in\fk N} L^2(\Cbb^N,\mu_n)$, where $\{\mu_n\}_{n\in\fk N}$ is a collection (indexed by a non-necessarily finite or countable set $\fk N$) of positive finite (necessarily Radon) Borel measure on $\Cbb^N$. This is in the same spirit as \cite{RS}, but slightly more general. Spectral theorem in the ``resolution of the identity" form follows easily from the multiplication form.

As one can see in Sections \ref{lb67} and \ref{lb68}, relations like $A_2T\subset TA_1$ (where $T$ is an unbounded (pre)closed operator from $\mc H_1$ to $\mc H_2$ (with dense domain), $A_1,A_2$ are bounded linear operators on $\mc H_1,\mc H_2$ respectively) have important analytic consequences.

Our presentation of spectral theory is influenced by \cite{Kad,RS,Rud-F}. These texts focus mainly on single normal operators rather than several strongly commuting ones (especially when treating unbounded operators). Besides the present monograph, we also recommend \cite{Sch} for a text on spectral theory which treats several unbounded operators.\\[2ex]


\hfill September 2021

\newpage











\section{Preliminaries}\label{lb63}

We set $\Nbb=\{0,1,2,3,\dots\}$, $\Zbb_+=\{1,2,3,\dots\}$. 
%For each $r\geq 0$, we define discs ${\mc D_r}=\{z\in\Cbb:|z|<r\}$ and $\ovl{\mc D_r}=\{z\in\Cbb:|z|\leq r\}$.\index{D@$\mc D_r,\ovl{\mc D_r}$}


\subsection*{Nets}

A \textbf{directed set} $\fk A$ is a set equipped with a binary relation $\leq$ which is reflexive ($\alpha\leq \alpha$ for all $\alpha\in\fk A$), transitive (for each $\alpha,\beta,\gamma\in\fk A$, if $\alpha\leq \beta$ and $\beta\leq\gamma$ then $\alpha\leq\gamma$), and satisfies that for any $\alpha,\beta\in\fk A$, there is $\gamma\in\fk A$ such that $\alpha,\beta\leq\gamma$.

A \textbf{net} of elements in a set $X$ is a function from $\fk A$ to $X$, written as $(x_\alpha)_{\alpha\in\fk A}$ or simply $x_\blt$. Assume $X$ is a topological space. Then for each $x\in X$, we write
\begin{align}
\lim_\alpha x_\alpha=x,	
\end{align}
or simply $\lim x_\blt=x$, if for each neighborhood $U$ of $x$ there is $\alpha\in\fk A$ such that $x_\beta\in U$ for all $\beta\geq \alpha$. A map $f:X\rightarrow Y$ (where $X$ and $Y$ are topological spaces) is continuous at $x\in X$ if and only if for each net $x_\blt$ converging to $x$, $f(x_\blt)$ converges to $f(x)$. For the ''if" part, one suffices to choose the directed set $\fk A$ to be the set of neighborhoods containing $x$ with $\leq$ being $\supset$.

If $x_\blt$ is a net in a \textit{Hausdorff space} $X$, then any two limits of $x_\blt$ are equal.

If $\Omega$ is a subset of a topological space $X$, then the closure of $\Omega$ is the set of all $x\in X$ such that there is net $x_\blt\in X$ converging to $x$. When $X$ is first countable, nets can be replaced by sequences.

We refer the readers to \cite[Chapter 3]{Mun} for more  about nets.

\subsection*{Hilbers spaces and bounded operators}

The sesquilinear form on a Hilbert space will be denoted by $\bk{\cdot|\cdot}$, where the left bracket is linear and the right one antilinear. 

Given Hilbert spaces $\mc H_1,\mc H_2$, we let $\Hom(\mc H_1,\mc H_2)$ \index{Hom@$\Hom(\mc H_1,\mc H_2)$} denote the space of bounded linear maps from $\mc H_1$ to $\mc H_2$. $\Hom(\mc H,\mc H)$ is denoted by $\End(\mc H)$.\index{End@$\End(\mc H)$} 

$\Hom(\mc H_1,\mc H_2)$ is a Banach space equipped with the operator norm $\lVert T\lVert=\sup_{0\neq\xi\in\mc H} \frac{\lVert T\xi\lVert}{\lVert\xi\lVert}=\sup_{0\neq\xi,\eta\in\mc H}\frac {\bk{T\xi|\eta}}{\lVert\xi\lVert \lVert\eta\lVert}$. If $S\in\Hom(\mc H_2,\mc H_3)$, then $\lVert ST\lVert\leq\lVert S\lVert \lVert T\lVert$.

The adjoint $T^*$ of $T$ is in $\Hom(\mc H_2,\mc H_1)$ and defined by $\bk{T\xi|\eta}=\bk{\xi|T^*\eta}$ for each $\xi,\eta\in\mc H$. (I.e., $T^*\eta$ is the unique vector corresponding to the bounded linear functional $\xi\mapsto\bk{T\xi|\eta}$, whose existence is guaranteed by Riesz representation theorem.) It is clear that $\lVert T^*\lVert=\lVert T\lVert$. We also have the $C^*$-property
\begin{align}\label{eq3}
	\lVert T^*T\lVert=\lVert T\lVert^2.
\end{align}
Indeed, $\leq$ follows from the above general inequality for $\lVert ST\lVert$. And $\lVert T\lVert^2=\sup_{\xi\neq 0} \lVert T\xi\lVert^2/\lVert\xi\lVert^2=\sup_{\xi\neq 0} \bk{T^*T\xi|\xi}/\lVert\xi\lVert^2\leq \lVert T^*T\lVert$.




The kernel and the range of $T\in\Hom(\mc H_1,\mc H_2)$ are denoted respectively by $\Ker(T)$ and $\Rng(T)$. We have
\begin{align}
\Rng(T)^\perp=\Ker (T^*).\label{eq19}	
\end{align}
Indeed, $\xi\perp\Rng(T)$ iff $0=\bk{\xi|T\eta}=\bk{T^*\xi|\eta}$ for each $\eta$, iff $T^*\xi=0$.

$T\in\End(\mc H)$ is called \textbf{normal} resp. \textbf{self-adjoint} resp. \textbf{positive}  if $T^*T=TT^*$ resp. $T=T^*$ (equivalently, $\bk{T\xi|\xi}\in\Rbb$ for each $\xi\in\mc H$) resp. $\bk{T\xi|\xi}\geq 0$ for each $\xi\in\mc H$.

The \textbf{strong (resp. weak) operator topology} of $\Hom(\mc H_1,\mc H_2)$ is the one generated by $\{T:\lVert (T-T_0)\xi_1\lVert<\epsilon,\dots,\lVert (T-T_0)\xi_N\lVert<\epsilon\}$ (resp. $\{T:|\bk{(T-T_0)\xi_1|\eta_1}|<\epsilon,\dots,|\bk{(T-T_0)\xi_N|\eta_N}|<\epsilon\}$) for some $N\in\Nbb$, $T_0\in\Hom(\mc H_1,\mc H_2)$,  $\epsilon>0$, $\xi_1,\dots,\xi_N\in\mc H_1,\eta_1,\dots,\eta_N\in\mc H_2$. A net $T_\blt$ in $\Hom(T_1,T_2)$ is said to \textbf{converge strongly (resp. weakly)} to $T$, if and only if they converge in the strong (resp. weak) topology, if and only if $\lim T_\blt\xi=T\xi$ (resp. $\lim\bk{T_\blt\xi|\eta}=\bk{T\xi|\eta}$) for each $\xi\in\mc H_1,\eta\in\mc H_2$. If $\lVert T_\blt\lVert\leq M$ uniformly for some $M>0$, then it suffices to verify the limit for $\xi,\eta$ in dense subspaces of $\mc H_1,\mc H_2$ respectively.

If $(\mc H_n)_{n\in\fk N}$ is a collection of Hilbert spaces indexed by a (non-necessarily countable) set $\fk N$, then  $\bigoplus_{n\in\fk N}\mc H_n$ denotes elements of the form $(\xi_n)_{n\in\fk N}$ where each $\xi_n\in\mc H_n$, and $\sum_{n\in\fk N}\lVert\xi_n\lVert^2<+\infty$. This is a Hilbert space, called the \textbf{direct sum} of $(\mc H_n)_{n\in\fk N}$. The vector space structure is defined componentwisely. The inner product between $(\xi_n)_{n\in\fk N}$ and $(\eta_n)_{n\in\fk N}$ is $\sum_{n\in\fk N}\bk{\xi_n|\eta_n}$.

The \textbf{Hahn-Banach separation theorem} for $\mc H$ says that if $C$ is a convex subset of $\mc H$ (i.e. $\xi,\eta\in C$ implies $a\xi+b\eta\in C$ for each $a,b\geq 0,a+b=1$), and if there is a net of vectors $\{\xi_\alpha\}_{\alpha\in\fk A}$ in $C$ converging \textbf{weakly} to $\xi$ (i.e. $\bk{\xi_\alpha|\psi}\rightarrow\bk{\xi|\psi}$ for each $\psi\in\mc H$), then $\xi$ is in the (strong) closure $\ovl C$ of $C$ (which is also convex).\footnote{Here is one way to see this without appeal to the general Hahn-Banach theorem for locally convex spaces. Assume for simplicity that $\xi=0$. Note that $\ovl C$ has a vector $\psi$ such that $\lVert\psi\lVert=\inf_{\eta\in \ovl C}\lVert \eta\lVert$ (\cite[Thm. 4.10]{Rud-R}). Consider $\mc H_\Rbb$ as the real Hilbert space $\mc H$ with inner product $\bk{\cdot|\cdot}_\Rbb:=\mathrm{Re}\bk{\cdot|\cdot}$.  Then for each $\alpha$, we have $\bk{\xi_\alpha|\psi}_\Rbb\geq\lVert \psi\lVert^2$; otherwise, by looking at the (at most two dimensional) real subspace spanned by $\xi_\alpha$ and $\psi$, we see that there must be a vector on the line segment between $\xi_\alpha$ and $\psi$ (and hence inside $\ovl C$) whose length is $<\lVert\psi\lVert$, impossible. Since $\lim\bk{\xi_\blt|\psi}_\Rbb=0$, we must have $\lVert \psi\lVert^2=0$ and hence $0=\psi\in\ovl C$.}

\subsection*{Projections and partial isometries}


A \textbf{projection} $E$ on a Hilbert space $\mc H$ is a bounded linear map which fixes vectors on a closed subspace $\mc H_0$ of $\mc H$, and maps all vectors in $\mc H_0^\perp$ to $0$. Then $\Rng(E)=\mc H_0$. We say $E$ is \textbf{projection} of $\mc H$ onto $\mc H_0$. Then $1-E$ is the projection of $\mc H$ onto $\mc H_0^\perp$. 

Equivalently, a projection $E$ is a bounded linear operator satisfying $E^*=E$ and $E^2=E$. It fixes vectors in $\Rng(E)$ and acts trivially on $\Rng(E)^\perp$.

 



The range of a projection $E$ is necessarily closed, and we have $\Ker(E)=\Rng(E)^\perp$. 

A net $E_\blt$ of projections on $\mc H$ is called increasing if $\alpha\leq\beta$ implies $\Rng(E_\alpha)\subset\Rng(E_\beta)$, or equivalently, $E_\alpha=E_\alpha E_\beta$.

\begin{pp}
An increasing net of projections $(E_\alpha)_{\alpha\in\fk A}$ on $\mc H$ always converge strongly. If $\mc H_0=\ovl{\bigcup \Rng(E_\blt)}$, then $E_\blt$ converges strongly to the projection $E$ onto $\mc H_0$.
\end{pp}

\begin{proof}
$E_\blt\xi=0=E\xi$ when $\xi\perp\mc H_0$. Now assume $\xi\in\mc H_0$. For each $n\in\Zbb_+$, suppose we have found $\alpha_1,\cdots,\alpha_{n-1}\in\fk A$  such that $\lVert \xi-E_{\alpha_j}\xi\lVert \leq 1/j$ for each $1\leq j\leq n-1$. Since $\Rng(E_\blt)$ is increasing and has union dense in $\mc H_0$, we can find $\alpha_n\in\fk A$ and a vector $\eta_n\in\Rng(E_{\alpha_n})$ such that $\lVert\xi-\eta_n\lVert<1/n$. Since the smallest distance between $\xi$ and a vector in $\Rng(E_{\alpha_n})$ is $\lVert\xi-E_{\alpha_n}\xi\lVert$, we conclude $\lVert\xi-E_{\alpha_n}\xi\lVert<1/n$.

Now that the sequence $\alpha_n$ is constructed, for each $n\in\Zbb_+$, we have $\lVert\xi-E_\beta\xi\lVert<1/n$ for every $\beta\geq\alpha_n$, again by the fact that $E_\blt$ is increasing. So $E_\blt\xi\rightarrow \xi=E\xi$. This finishes the proof.
\end{proof}





A \textbf{unitary} operator/map $U$ from $\mc H_1$ to $\mc H_2$ is by definition a bounded linear map which is bijective and preserves inner products ($\bk {U\xi|U\eta}=\bk{\xi|\eta}$ for each $\xi,\eta\in\mc H$), equivalently, preserves the norms ($\lVert U\xi\lVert=\lVert \xi\lVert$ for each $\xi\in\mc H$). Equivalently, $U\in\Hom(\mc H_1,\mc H_2)$ satisfies $U^*U=\idt_{\mc H_1},UU^*=\idt_{\mc H_2}$. $U^*$ is a unitary map from $\mc H_2$ to $\mc H_1$. A unitary $U:\mc H_1\rightarrow\mc H_2$ is an equivalence of the two Hilbert spaces. 


A \textbf{partial isometry} $U$ from a Hilbert space $\mc H_1$ to another $\mc H_2$ is by definition a bounded linear operator, which restricts to a unitary map
\begin{align*}
U:\sgm(U)\xrightarrow{\simeq}\tau(U)	
\end{align*}
from a closed subspace $\sgm(U)$ of $\mc H_1$ to a (necessarily closed) subspace $\tau(U)$ of $\mc H_2$, and which is zero when acting on $\sgm(U)^\perp$. We say $\varsigma(U)$ is the \textbf{source space} of $U$, and $\tau(U)$ the \textbf{target space} of $U$. \index{zz@$\varsigma(U),\tau(U)$} Note that $\Rng(U)=\tau(U)$. $U^*$ is a partial isometry with source space $\varsigma(U^*)=\tau(U)$ and target space $\tau(U^*)=\varsigma(U)$, $U^*$ restricts to a unitary map
\begin{align*}
U^*:\tau(U)\xrightarrow{\simeq}\sgm(U)	
\end{align*}
which is the inverse of the above restriction of $U$.

$U^*U$ is the projection of $\mc H_1$ onto $\varsigma(U)$, and $UU^*$ is the projection of $\mc H_2$ onto $\tau(U)$. (As a consequence, we have $U=UU^*U$ and $U^*=U^*UU^*$.)

Equivalently, a partial isometry $U:\mc H_1\rightarrow\mc H_2$ is defined to be a bounded operator such that both $U^*U$ and $UU^*$ are projections. Then $U^*U$ is the projection of $\mc H_1$ onto $\varsigma(U)$, and $UU^*$ is the projection of $\mc H_2$ onto $\tau(U)$. 

We leave it to the readers to check the equivalence of definitions.

A partial isometry $U:\mc H_1\rightarrow\mc H_2$ whose source space is $\mc H_1$ is called an \textbf{isometry}.

\subsection*{Borel measures}



A positive measure $\mu$ on a locally compact Hausdorff space $X$ is called \textbf{Radon measure} when: (local finiteness)$\mu$ is finite on compact subsets; (outer regularity) for each Borel set $E\subset X$, $\mu(E)=\inf\{\mu(U):E\subset U,U\text{ is open}\}$; (inner regularity on open sets) if $U\subset X$ is open,   then $\mu(U)=\sup\{\mu(K):K\subset U,K\text{ is compact}\}$.  

%A Radon measure is automatically inner regular on any $\sigma$-finite Borel subset, cf.  \cite[Prop. 7.5]{Fol}.

The \textbf{Riesz-Markov representation theorem} \cite[Thm.2.14]{Rud-R} says that any positive linear functional on $C_c(X)$ (the algebra of continuous functions on $X$ with compact supports) can be written as $f\mapsto\int_Xfd\mu$ for a unique Radon measure $\mu$ on $X$.

All measures are positive unless otherwise stated (that it is a complex measure). A complex Radon measure is by definition a finite $\Cbb$-linear combination of \textit{finite} Radon measures. 

In this note, we only consider  locally compact Hausdorff spaces $X$ which are also \textit{second countable}. (The only exception is the proof of Gelfand-Naimark Theorem, which is not used elsewhere in the note.) Then local finiteness implies inner and outer regularity \cite[Thm. 2.18]{Rud-R}. Thus, \textit{locally finite (in particular, finite) positive Borel measures on $X$ are automatically Radon measures}.

Suppose $\phi:X\rightarrow Y$ is a Borel map between two measure spaces $X,Y$. If $\mu$ is a Borel measure on $X$, its \textbf{pushforward} $\phi_*\mu$ is defined by
\begin{align*}
\phi_*\mu(\Omega)=\mu(\phi^{-1}(\Omega))	
\end{align*}
for each measurable $\Omega\subset Y$. Then for each  measurable $f:Y\rightarrow[0,+\infty]$ we have
\begin{align}
\int_Y f~d\phi_*\mu=\int_X f\circ\phi ~d\mu.	\label{eq16}
\end{align}
Indeed, this is obvious when $f$ is a characteristic function $\chi_\Omega$, and hence true when $f$ is a simple function. So it is true in general by monotone convergence theorem.

If $\phi:X\rightarrow Y$ is Borel and bijective and if $\phi^{-1}:Y\rightarrow X$ is measurable, for each Borel measure $\nu$ on $Y$, the \textbf{pullback measure}  \index{zz@$\phi^*\nu$, the pullback measure} $\phi^*\nu$ is defined by $\phi^*\nu=(\phi^{-1})_*\nu$. Then for each measurable $f:Y\rightarrow[0,+\infty]$ we have
\begin{align}\label{eq26}
\int_Y fd\nu=\int_X (f\circ\phi)d\phi^*\nu
\end{align}

The \textbf{support} of a Borel  measure $\mu$ on a topological space is the (necessarily closed) subset of all points $x$ such that any neighborhood at $x$ has non-zero measure.



\section{Spectral theory for adjointly commuting normal bounded operators}\label{lb65}



Fix a Hilbert space $\mc H$. Choose \textbf{adjointly commuting normal operators} $T_1,\dots,T_N\in\End(\mc H)$. This meas that  $T_iT_j=T_jT_i$ and $T_i^*T_j=T_jT_i^*$ for each $i,j$.   Set $\Re(T)=(T+T^*)/2$ and $\Im (T)=(T-T^*)/{2\im}$ for each $T\in\End(\mc H)$. Then $\Re (T_1),\dots,\Re (T_N),\Im (T_1),\dots,\Im (T_N)$ are (adjointly) commuting self-adjoint operators. Moreover, a polynomial of $T_\blt,T^*_\blt$ is equivalently a polynomial of $\Re (T_\blt),\Im (T_\blt)$.

Let $\mc P_N$ \index{PN@$\mc P_N$} denote the set of polynomials with complex coefficients and mutually commuting and independent formal variables $z_1,\dots,z_N,\ovl z_1,\dots,\ovl z_N$. Thus, a generic element is a finite sum of elments of the form $az_1^{m_1}\cdots z_N^{m_N}\cdot \ovl z_1^{n_1}\cdots \ovl z_N^{n_N}$ where $a\in\Cbb$ and $m_1,\dots,m_N,n_1,\dots,n_N\in \Nbb$. Multiplications of $\mc P_N$ are defined as multiplications of polynomials. Moreover, there is an involution $*$ (i.e., an anti-linear\footnote{An antilinear map $T$ between two $\Cbb$-vector spaces $V$ and $W$ is a map satisfying $T(au+bv)=\ovl a Tu+\ovl b TV$ for each $a,b\in\Cbb,u,v\in V$.} satisfying $f^{**}=f$) such that
\begin{align*}
(az_1^{m_1}\cdots z_N^{m_N}\cdot \ovl z_1^{n_1}\cdots \ovl z_N^{n_N})^*=\ovl a\cdot \ovl z_1^{m_1}\cdots \ovl z_N^{m_N}\cdot z_1^{n_1}\cdots z_N^{n_N}.	
\end{align*}
In this way, $\mc P_N$ becomes a $*$-algebra.

By changing variables $z_j=x_j+\im y_j,\ovl z_j=x_j-\im y_j$, elements $f$ of $\mc P_N$ are equivalently polynomials $\uwave f$  of $x_\blt,y_\blt$, related by
\begin{gather*}
\uwave f(x_1,y_1,\dots,x_N,y_N)=f(x_1+\im y_1,x_1-\im y_1,\dots,x_N+\im y_N,x_N-\im y_N),	\\
f(z_1,\ovl z_1,\dots,z_N,\ovl z_N)=\uwave f(\Re(z_1),\Im(z_1),\dots,\Re(z_N),\Im(z_N))	
\end{gather*}
where $\Re(z_j)=(z_j+\ovl z_j)/2,\Im(z_j)=(z_j-\ovl z_j)/(2\im)$. We have $x_j^*=x_j,y_j^*=y_j$. %We will not distinguish between $f$ and $\uwave f$ in the following.


Note that $\End(\mc H)$ is also a $*$-algebra whose involution $*$ is given by the adjoint of operators. We have a unique unital \textbf{$*$-homomorphism} $\pi:\mc P_N\rightarrow\End(\mc H)$ defined by
\begin{align}
\pi(z_j)=T_j \label{eq1}
\end{align}
for each $j$. Equivalently,
\begin{align*}
\pi (x_j)=\Re(T_j),\qquad \pi(y_j)=\Im(T_j).	
\end{align*}
By (unital) $*$-homomorphism, we mean
\begin{gather}
\pi(1)=\idt,\qquad 	\pi(fg)=\pi(f)\pi(g),\qquad \pi(f^*)=\pi(f)^*\label{eq15}
\end{gather}
for each $f,g\in\mc P_N$. 


We know that in Linear algebra, polynomial rings play an important role in the study of spectral theory/Jordan decomposition. In the infinite-dimensional case, polynomial rings (or more precisely, polynomial $*$-algebras) are not sufficient. We need to consider $C(X)$ \index{CX@$C(X),C_c(X)$}, the $*$-algebra of continous functions on a compact Hausdorff space $X$. It's $*$-structure is given by $f^*(x)=\ovl{f(x)}$ for each $f\in C(X),x\in X$. $\ovl{\cdot}$ stands for the complex conjugate. Moreover, $C(X)$ is equipped with the norm topology $L^\infty(X)$.


The first question in spectral theory is: what is an appropriate $X$? To answer this question, we need the following crucial result. For each $r>0$, set \index{Br@$B_r=[-r,r]^2$}
\begin{align}
B_r=[-r,r]^2	
\end{align}
regarded as a subset of $\Cbb$.

\begin{pp}\label{lb1}
Let $r_j$ be $\lVert T_j\lVert$, the operator norm of $T_j$. Then for each $f\in\mc P_N$, 
\begin{align}\label{eq25}
\lVert \pi(f)\lVert\leq \sup_{x_j,y_j\in[-r_j,r_j]}| \uwave f(x_1,y_1,\dots,x_N,y_N)|.	
\end{align}
\end{pp}


Let
\begin{align*}
X=B_{r_1}\times\cdots \times B_{r_N}.
\end{align*}

\begin{thm}\label{lb17}
There is a unique  continuous (unital) $*$-homomorphism $\pi:C(X)\rightarrow\End(\mc H)$ satisfying that for each $j$, $\pi(z_j)=T_j,\pi(\ovl z_j)=T_j^*$. (Equivalently, $\pi(x_j)=\Re(T_j),\pi(y_j)=\Im (T_j)$.)
\end{thm}


\begin{proof}
For each  $f\in\mc P_N$, $\uwave f$ can be regarded as a continuous function of the variables $x_1,y_1,\dots,x_N,y_N$. So $\uwave f\in C(X)$. Moreover, $\uwave f$ as a polynomial is determined by $\uwave f$ as a function (since all the coefficients of the polynomial can be calculated by the values of the multi partial derivatives of $\uwave f$). Thus, $\mc P_N$ is identified with a unital $*$-subalgebra of $C(X)$ by identifying $f\in\mc P_N$ with $\uwave f\in C(X)$.

By Stone-Weierstrass theorem, $\mc P_N$ is dense in $C(X)$. Moreover, by Prop. \ref{lb1}, the $\pi$ defined on $\mc P_N$ is continuous with respect to the norm of $C(X)$. Therefore, $\pi$ can be extended uniquely to a continuous unital $*$-homomorphism from $C(X)$ to $\End(\mc H)$.
\end{proof}


To prepare for the proof of Prop. \ref{lb1}, let us consider a slightly different $*$-algebra $\mc Q_N=\Cbb[t_1,\dots,t_N]$ of polynomials of $t_1,\dots,t_N$, and the involution $*$ is defined by $t_j^*=t_j$ for each $j$. 

\begin{lm}\label{lb69}
Suppose that for every $N\in\Zbb_+$ and every self-adjoint bounded operators $H_1,\dots,H_N$ on $\mc H$, the unique unital $*$-homomorphism $\varphi:\mc Q_N\rightarrow\End(\mc H)$ defined by $\varphi(H_j)=t_j$ for every $1\leq j\leq N$ satisfies (by setting $r_j=\lVert H_j\lVert$)
\begin{align}
\lVert \varphi(f)\lVert \leq\sup_{t_j\in[-r_j,r_j]}|f(t_1,\dots,t_N)|\label{eq24}
\end{align}
for every $f\in\mc Q_N$. Then Prop. \ref{lb1} is true.
\end{lm}

\begin{proof}
Let us assume the condition in this theorem. Choose any $f\in\mc P_N$. Let $T_1,\dots,T_N$ be adjointly commuting normal bounded operators, and let $H_j=\Re(T_j)$, $K_j=\Im(T_j)$. Let $\varphi:\mc Q_{2N}\rightarrow\End(\mc H)$ be the unique unital $*$-homomorphism sending each $H_j$ to $t_{2j-1}$ and $K_j$ to $t_{2j}$. Consider the polynomial $\uwave f(x_1,y_1,\dots,x_N,y_N)$ as an element of $\mc Q_{2N}$ by identifying $x_j=t_{2j-1},y_j=t_{2j}$. Then $\varphi(\uwave f)=\pi(f)$ for all $f\in\mc P_N$ since this is true when $f=x_1,y_1,\dots,x_N,y_N$.

Let $r_j=\lVert T_j\lVert$. Then $\lVert H_j\lVert,\lVert K_j\lVert\leq r_j$. By \eqref{eq24}, we have
\begin{align*}
\lVert\pi(f)\lVert=\lVert \varphi(\uwave f)\lVert \leq\sup_{x_j,y_j\in[-r_j,r_j]}|\uwave f(x_1,y_1\dots,x_N,y_N)|.	
\end{align*}
\end{proof}



The crucial step of proving Prop. \ref{lb1} is to extend the $\varphi$ in Lemma \ref{lb69} to a unital $*$-homomorphism from a larger class $\mc A$ of functions, where $\mc A$ contains  $\mc Q_N$ and the positive ``square root" (defined in a proper sense) of any $r^2-f^*f$ where $f\in\mc Q_N$ and $r>\lVert f\lVert_{L^\infty(X)}$. As we see below, $\mc A$ is the set of analytic functions defined near $X$.

\subsection*{Holomorphic functional calculus}

Let $T\in\End(\mc H)$. Define the \textbf{spectrum}
\begin{align}
	\Sp(T)=\{\lambda\in\Cbb:\lambda-T\text{ is not invertible}\}.	\label{eq23}
\end{align}
Note the following easy fact:

\begin{pp}
Let $r=\lVert T\lVert$. Then $\Sp(T)\subset \{\lambda\in\Cbb:|\lambda|\leq r\}$. Moreover, if $T$ is self-adjoint, then $\Sp(T)\subset[-r,r]$.
\end{pp}


\begin{proof}
If $|\lambda|>r=\lVert T\lVert$, then $\lambda-T$ has inverse
\begin{align}
\sum_{n=0}^{+\infty}\lambda^{-n-1}T_j^n.\label{eq20}
\end{align}

Now assume $T=T^*$. We shall show that $\lambda-T$ is invertible when $\Im(\lambda)\neq 0$. By scalar multiplication and replacing $T$ by $T+a$ (where $a\in\Rbb$), it suffices to show that $S:=\im-T$ is invertible. By $T=T^*$, we have $\bk{S\xi|S\eta}=\bk{\xi|\eta}+\bk{T\xi|T\eta}$ and hence $\lVert S\xi\lVert ^2=\lVert \xi\lVert^2+\lVert T\xi\lVert^2\geq \lVert \xi\lVert^2$. So $S$ is injective (and similarly $S^*=-\im-T$ is injective), and its inverse $S^{-1}:\Rng(S)\rightarrow\mc H$ is continuous. To finish the proof, we shall show that $\Rng(S)=\mc H$. 

If $S\xi_n$ is a Cauchy sequence, then so is $\xi_n$, which converges to some $\xi\in\mc H$. So $S\xi_n\rightarrow S\xi$. This shows that $\Rng(S)$ is complete, equivalently, a closed subspace of $\mc H$.  Thus, it remains to show that $\Rng(S)$ is dense in $\mc H$. This follows because $\Rng(S)^\perp=\Ker(S^*)$ (by \eqref{eq19}) and $S^*$ is injective.
\end{proof}


\begin{lm}\label{lb4}
Let $O$ be an open subset of $\Cbb$ disjoint from $\Sp(T)$. Then the map $z\in O\mapsto (z-T)^{-1}$ is holomorphic (in the sense of Sec. \ref{lb55}).
\end{lm}



\begin{proof}
Note first of all that if $T$ is invertible and $a\in\Cbb$ satisfies $|a|\lVert T^{-1}\lVert<\frac 12 $, then $\sum_{n\in\Nbb}(-a)^nT^{-n-1}$ converges since $\lVert T^{-n-1}\lVert\leq \lVert T^{-1}\lVert^{n+1}$, and the limit is clearly the inverse of $a+T$. It is easy to check, using the infinite sum expression for $(a+T)^{-1}$, that
\begin{align*}
\lVert(a+T)^{-1}\lVert\leq 2\lVert T^{-1}\lVert.	
\end{align*}
	
Now,   assume $z\in O$ so that $z-T$ is invertible. Using the above inequality, we see that for any $h$ such that $z+h\in O$, the operator $(z+h-T)^{-1}-(z-T)^{-1}$, which clearly equals $-h(z-T)^{-1}(z+h-T)^{-1}$, has norm bounded by
\begin{align*}
|h|\lVert (z-T)^{-1}\lVert	\lVert (h+z-T)^{-1}\lVert\leq 2|h|\lVert (z-T)^{-1}\lVert^2
\end{align*}
whenever $|h|\lVert (z-T)^{-1}\lVert<1/2$. This shows that the map $z\in O\mapsto (z-T)^{-1}$ is continuous.
	
Finally, we compute the derivative: as $h\rightarrow 0$,
\begin{align*}
\frac{(z+h-T)^{-1}-(z-T)^{-1}}{h}	=-(z-T)^{-1}(z+h-T)^{-1}
\end{align*}
converges to $-(z-T)^{-2}$ by the continuity proved in the previous paragraph.
\end{proof}




We now let $H_1,\dots,H_N$ be self-adjoint operators on $\mc H$ with operator norms $r_1,\dots,r_N$. Let
\begin{align*}
Y=[-r_1,r_1]\times\cdots\times[-r_N,r_N]	
\end{align*}
Let $\mc A$ be the set of complex analytic functions $f(t_1,\dots,t_N)$ analytic on a connected neighborhood of $(t_1,\dots,t_N)\in Y$. (Thus, here we understand $t_\blt$ as complex variables. By saying that $f$ is analytic, we mean that it is continous as a multi-variable functions, and that it is holomorphic on each variable.) $\mc A$ is a $*$-algebra, whose involution $*$ is defined by.
\begin{align*}
 f^*(t_1,\dots,t_N)=\ovl{ f(\ovl t_1,\dots,\ovl t_N)}.	
\end{align*}
(Note that $f^*$ is holomorphic, cf. Prop. \ref{lb57}.) In this way, $\mc Q_N$ can be identified naturally  as a unital $*$-subalgebra of $\mc A$. Note that any $f\in\mc A$ is determined by its values on $Y$. This is due to the fact that any single-valued holomorphic function on a connected open subset of $\Cbb$ is determined by its values on a line segment inside this open subset; our case of multi-variable functions follows from induction on the number of variables. Thus, we equip $\mc A$ with the topology of $L^\infty(Y)$-norm.


For each $j$, we choose an anticlockwise piecewise-smooth simple closed curves $R_j\subset\Cbb$ such that $R_j$ surrounds $[-r_j,r_j]\supset \Sp(H_j)$,  and that $ f$ is holomorphic when $(t_1,\dots,t_N)$ is inside and also on a neighborhood of $R_1\times  \cdots\times R_N$. Define
\begin{align}
\varphi( f)=\oint_{t_j\in R_j}(2\pi\im)^{-N} f(t_1,\dots,t_N)\cdot(t_1-H_1)^{-1}\cdots(t_N-H_N)^{-1}\cdot dt_1\cdots dt_N.	\label{eq2}
\end{align}
Note that the integrand is holomorphic in the sense of Sec. \ref{lb55}, thanks to Lemma \ref{lb4}. The integral is defined as in Sec. \ref{lb55}. By complex analysis,  \eqref{eq2} is independent of the choice of $R_1,R_1',\dots,R_N,R_N'$. Also, note that $(t_i-H_i)^{-1}$ commutes with $(t_j-H_j)^{-1}$.



\begin{thm}\label{lb2}
$\varphi:\mc A\rightarrow\End(\mc H)$ is a continuous unital $*$-homomorphism and satisfies $\lVert\varphi( f)\lVert\leq \lVert  f\lVert_{L^\infty(X)}$ for each $ f\in\mc A$.  Moreover, if $f\in\mc Q_N$, then the $\varphi( f)$ defined by \eqref{eq2} agrees with the $\varphi(f)$ defined in Lemma \ref{lb69}. 
\end{thm}

\begin{proof}
For each connected open set $O$ containing $X$, we let $\mc A_O$ be the set  of  analytic functions on $O$. Then $\mc A$ is the union of all $\mc A_O$.

Step 1. Assume $ f=t_1^{n_1}\cdots t_N^{n_N}$, and assume each $R_j$ is a circle with radius larger than $\lVert T_j\lVert$ so that we can substitute each $(t_j-H_j)^{-1}=\sum_{n\geq 0}t_j^{-n-1}H_j^n$ into \eqref{eq2}. One then checks easily that the $\varphi( f)$ equals the $\varphi(f)$ defined by \eqref{eq1}. 

Step 2. We show that $\varphi$ restricts to a unital $*$-homomorphism from each $\mc A_O$ to $\End(\mc H)$. This will imply that $\varphi:\mc A\rightarrow\End(\mc H)$ is a unital $*$-homomorphism. That $\varphi(1)=1$ follows from step 1. That $\varphi(f^*)=\varphi(f)^*$ follows by applying successively Prop. \ref{lb57} to each single variable integral of the multiple integral in \eqref{eq2}. (Note that according to the notations in Prop. \ref{lb57}, if $C$ is anticlockwise then $\ovl C$ is clockwise.)

We now show $\varphi(f)\varphi(g)=\varphi(fg)$ for every $f,g\in \mc A_O$. Assume for simplicity that $N=2$. The general case of $N$ variables follows from the same method. For each $i=1,2$, we choose a smooth simple closed anticlockwise $\Gamma_i,R_i$ containing $[-r_i,r_i]$,  assume $R_i$ is small enough so that it is inside the interior of $\Gamma_i$, and assume $f$ is analytic near and inside $\Gamma_1\times \Gamma_2$. Set differential $\di=(2\im\pi)^{-1}d$. Then
\begin{align*}
&\varphi(f)\varphi(g)\\
=&\int_{x\in R_1,y\in R_2}\int_{z\in\Gamma_1,w\in \Gamma_2}f(x,y)g(z,w)(x-H_1)^{-1}(z-H_1)^{-1}(y-H_2)^{-1}(w-H_2)^{-1}\\
&\cdot\di x\di y \di z \di w
\end{align*}
Note that when $z\neq x$,
\begin{align*}
(x-H_1)^{-1}(z-H_1)^{-1}=(z-x)^{-1}(x-H_1)^{-1}-(z-x)^{-1}(z-H_1)^{-1}.
\end{align*}
Since $x\in R_1,z\in\Gamma_1$, and since $R_1$ is inside $\Gamma_1$, by complex analysis, we see that 
\begin{align*}
\int_{x\in R_1}f(x,y)g(z,w)\cdot (z-x)^{-1}(z-H_1)^{-1}\cdot (y-H_2)^{-1}(w-H_2)^{-1}\di x=0.
\end{align*}
So
\begin{align*}
&\varphi(f)\varphi(g)\\
=&\int_{x\in R_1,y\in R_2}\int_{z\in\Gamma_1,w\in \Gamma_2}(z-x)^{-1}f(x,y)g(z,w)(x-H_1)^{-1}(y-H_2)^{-1}(w-H_2)^{-1}\\
&\cdot \di x\di y \di z \di w.
\end{align*}
In this integrand, only $(z-x)^{-1}g(z,w)$ depends on $z$, and
\begin{align*}
\int_{z\in\Gamma_1}	(z-x)^{-1}g(z,w)\cdot \di z= g(x,w) 
\end{align*}
by Cauchy's formula. Thus
\begin{align*}
&\varphi(f)\varphi(g)\\
=&\int_{x\in R_1,y\in R_2}\int_{w\in \Gamma_2}f(x,y)g(x,w)(x-H_1)^{-1}(y-H_2)^{-1}(w-H_2)^{-1}\cdot \di x\di y \di w\\
=&\int_{x\in R_1}(x-H_1)^{-1}\\
&\cdot\Big(\int_{y\in R_2}\int_{w\in\Gamma_2}f(x,y)g(x,w)(y-H_2)^{-1}(w-H_2)^{-1} \di y\di w\Big)\di x.
\end{align*}
A similar factorization for $(y-H_2)^{-1}(w-H_2)^{-1}$ shows
\begin{align*}
&\int_{y\in R_2}\int_{w\in\Gamma_2}f(x,y)g(x,w)(y-H_2)^{-1}(w-H_2)^{-1} \di y\di w\\
=&\int_{y\in R_2}f(x,y)g(x,y)(y-H_2)^{-1}\di y.
\end{align*}
This proves $\varphi(f)\varphi(g)=\varphi(fg)$. 


Step 3. It remains to show that for each $ f\in\mc A$ we have $\lVert\varphi( f)\lVert\leq \lVert  f\lVert_{L^\infty(X)}$. Choose any $\delta>0$, and let $r=\delta+\lVert  f\lVert_{L^\infty(X)}$. Choose $O$ such that $ f\in\mc A_O$. Note that $r^2- f^* f$ takes values in $[\delta^2,+\infty)$ when restricted to $X$. Thus, we may choose $O$ small enough such that $r^2- f^* f$ takes values in $\Cbb\setminus(-\infty,0]$ when defined on $O$. Since we can define a holomorphic square root function $\sqrt z$ on $\Cbb\setminus(-\infty,0]$ which is positive on $(0,+\infty)$, we can define $ g=\sqrt{r^2- f^* f}$  in $\mc A_O$ which satisfies $ g^2=r^2- f^* f$ and takes positive real values on $X$. So $ g$ equals $ g^*$ on $X$ and hence on $O$. It follows that $ g^* g=r^2- f^* f$. Thus, for any $\xi\in\mc H$, we have
\begin{align*}
\lVert \varphi( f)\xi\lVert^2=\bk{\varphi( f^* f)\xi|\xi}=r^2\lVert\xi\lVert^2-\bk{\varphi( g^* g)\xi|\xi}	=r^2\lVert\xi\lVert^2-\lVert \varphi( g)\xi\lVert^2\leq r^2\lVert\xi\lVert^2.
\end{align*}
This proves $\lVert\varphi( f)\lVert^2\leq r^2=(\delta+\lVert f\lVert_{L^\infty(X)})^2$ for each $\delta>0$, hence finishes the proof.
\end{proof}

Prop.  \ref{lb1} follows immediately from the above Theorem and Lemma \ref{lb69}.


\subsection*{Spectral theorem}

We come back to the setting of adjointly commuting normal bounded operators $T_1,\dots,T_2$ on $\mc H$ with norms $r_1,\dots,r_N$. Recall that $X$ is defined by \eqref{eq25}.

The Riesz-Markov representation theorem for $C(X)$ can be presented in terms of cyclic representations. First of all, we say a vector $\xi\in\mc H$ is \textbf{cyclic} for $C(X)$, if $\pi(C(X))\xi$ spans a dense subspace of $\mc H$. If $\mu$ is a Borel measure on $X$, then $C(X)$ acts on $L^2(X,\mu)$ by multiplication.

\begin{pp}[Riesz-Markov representation theorem]\label{lb7}
Suppose that $\xi\in\mc H$ is a cyclic vector for $C(X)$. Then the representation $\pi$ of $C(X)$ on $\mc H$ is unitarily equivalent to the one of $C(X)$ on $L^2(X,\mu)$ for some Borel measure $\mu$ satisfying $\mu(X)<+\infty$. More precisely, there is a unitary map $U:\mc H\rightarrow L^2(X,\mu)$ such that $U\pi(f)U^*$ is the multiplication of $f\in C(X)$ on $L^2(X,\mu)$.

Moreover, we can choose $U$ such that $U\xi$ equals the constant function $1$.
\end{pp}


\begin{proof}
Since $\pi$ is a $*$-homomorphism, the linear functional $f\mapsto \bk{\pi(f)\xi|\xi}$ is positive since, when $f\geq 0$, we have $\bk{\pi(f)\xi|\xi}=\lVert \pi(\sqrt f)\xi\lVert^2\geq 0$. By Riesz-Markov representation theorem, we can find a finite Borel measure $\mu$ such that $\bk{\pi(f)\xi|\xi}=\int_Xfd\mu$ for each $f\in C(X)$. Thus
\begin{align*}
\bk{\pi(f)\xi|\pi(g)\xi}=\int_Xg^*fd\mu=\bk{f|g}_{L^2(X,\mu)},
\end{align*}
which shows that the linear map $\pi(f)\xi\in\pi(C(X))\xi\mapsto f\in L^2(X,\mu)$ is well-defined and extends to a unitary map $U:\mc H\rightarrow L^2(X,\mu)$ (note that the cyclic condition is used here). One checks easily that $U$ satisfies the desired property.
\end{proof}


\begin{thm}[Spectral theorem]\label{lb8}
Let $X=B_{r_1}\times\cdots\times B_{r_N}$ where each $r_j=\lVert T_j\lVert$. Then there exist a set $(\mu_n)_{n\in\fk N}$ of finite (positive) Borel measures, and also a unitary map
\begin{align*}
U:\mc H\rightarrow\bigoplus_{n\in\fk N} L^2(X,\mu_n)
\end{align*}
satisfying that for each $1\leq j\leq N$ and each $(f_n)_{n\in\fk N}\in \bigoplus_{n\in\fk N} L^2(X,\mu_n)$,
\begin{align}
UT_jU^*\cdot (f_n)_{n\in\fk N}=(z_jf_n)_{n\in\fk N}.\label{eq10}
\end{align}
\end{thm}
Here we let $z_j$ be function indicating the $j$-th component $B_j$ of $X$, i.e., the one sending $(z_1,\dots,z_N)\in B_{r_1}\times\cdots\times B_{r_N}$ to $z_j$. Thus, the spectral theorem says that the action of adjointly commuting $T_1,\dots,T_N$ on $\mc H_j$ is unitarily equivalent to the multiplication of $z_1,\dots,z_N$ on a direct sum of Borel $L^2$-spaces over $X$.

We write $UT_jU^*$ as $M_{z_j}$ and call it the \textbf{multiplication operator} \index{Mf@$M_f$, the multiplication operator of $f$} of $z_j$.

\begin{proof}
By Zorn's lemma, $\mc H$ is an (orthogonal) direct sum of $C(X)$-invariant cyclic subspaces, i.e., $\mc H=\oplus_n\mc H_n$ where each subspace $\mc H_n$ is invariant under the action of $C(X)$, and the action of $C(X)$ on $\mc H_i$ possesses a cyclic vector. (Consider the partially ordered set, each element of which is a set of mutually orthogonal non-zero cyclic $C(X)$ invariant closed subspaces.)  By Proposition \ref{lb7}, each subrepresentation $\mc H_n$ is unitarily equivalent  to the multiplication of $C(X)$ on $L^2(X,\mu_n)$, such that $T_j$ is equivalent to the multiplication of $z_j$. The theorem thus follows immediately.
\end{proof}

%In the case that $\mc H$ is not separable, the above spectral theorem still holds, except that the direct sum is possibly uncountable. To obtain such a direct sum, one uses Hausdorff maximal principle to find a maximal set of mutually orthogonal closed cyclic subspaces of $\mc H$.

\subsection*{Bounded Borel functional calculus}


\begin{lm}\label{lb18}
For each bounded Borel function $f$ on $\Cbb^N$, there exists a net $g_\blt=(g_\alpha)_{\alpha\in\fk A}$ in $C_c(\Cbb^N)$, such that $\lVert g_\alpha\lVert_{l^\infty(\Cbb^N)}\leq \lVert f\lVert_{l^\infty(\Cbb^N)}$ for each $\alpha$, and that $\lim \int_{\Cbb^N}|f-g_\blt|d\mu=0$ for each finite (positive) Borel measure $\mu$ on $\Cbb^N$.
\end{lm}

It follows that $\lim\int_{\Cbb^N}|f-g_\blt|^pd\mu=0$ for each $p\geq1$, since $|f-g_\blt|^p\leq |f-g_\blt|\cdot(2\Vert f\Vert_{l^\infty})^{p-1}$.

\begin{proof}
Let $\fk A$ be the directed set of all $(K,\epsilon)$ where $K$ is a finite set of finite Borel measures on $\Cbb^N$, and $\epsilon>0$.  $(K_1,\epsilon_1)\leq (K_2,\epsilon_2)$ means $K_1\subset K_2$ and $\epsilon_1\geq\epsilon_2$. By Lusin's Theorem \cite[Thm. 2.24]{Rud-R}, for each $\alpha=(K,\epsilon)\in\fk A$, we can find $g_\alpha\in C(\Cbb^N)$ whose sup norm is bounded by $\lVert f\lVert_\infty$, such that the subset $\{x\in \Cbb^N:f(x)\neq g_\alpha(x)\}$ has $(\sum_{\mu\in K}\mu)$-measure less than $\epsilon/\lVert f\lVert_\infty$.  Then $\lVert f-g_\alpha\lVert_{L^1(\Cbb^N,\mu)}<\epsilon$ for each $\mu\in K$. So $g_\blt$ is a desired net.
\end{proof}


%\begin{df}
%Let $T_1,\dots,T_N$ have spectral decomposition as in Theorem \ref{lb8}. We say that a positive Borel measure $\nu$ on $X$ \textbf{dominates the spectral decomposition} of $T_1,\dots,T_N$, if for every Borel subset $\Omega$ of $X$ satisfying $\nu(\Omega)=0$, we have $\mu_n(\Omega)=0$ for each $\Omega$. A finite $\nu$ exists, e.g.,
%\begin{align}
%\lambda=\sum_{n=1}^\infty 2^{-n}\mu_n(X)^{-1}\mu_n.	
%\end{align}
%\end{df}

Recall $X=B_{r_1}\times\cdots\times B_{r_N}$.

\begin{df}\label{lb58}
For each bounded Borel function $f$ on $X$, we define a bounded operator $$\pi(f)\equiv f(T_1,\dots,T_N)$$ on $\mc H$ such that $Uf(T_1,\dots,T_N)U^*$ is the multiplication of $f$ on $\bigoplus_{n\in\fk N} L^2(X,\mu_n)$, i.e. $M_f$.
\end{df}

Let $B(X)$ be the set of bounded Borel functions on $X$, which is a unital $*$-algebra, whose $*$-structure is defined by $f^*(z_1,\dots,z_N)=\ovl{f(z_1,\dots,z_N)}$. Let $z_j:X\rightarrow\Cbb$ denote the $j$-th standard coordinate $(\zeta_1,\dots,\zeta_N)\mapsto \zeta_j$.

\begin{thm}\label{lb28}
$\pi:f\in B(X)\mapsto f(T_1,\dots,T_N)\in\End(\mc H)$ is the unique unital $*$-homomorphism satisfying the following properties
\begin{enumerate}
\item $\pi(z_j)=T_j$.
\item If $f\in B(X)$, and $f_\blt$ is a net of bounded Borel functions on $X$ satisfying
\begin{align*}
\lim \int_X|f-f_\blt|^2d\mu=0
\end{align*}
for each finite (positive) Borel measure on $X$, then $f_\blt(T_1,\dots,T_N)$ converges strongly to $f(T_1,\dots,T_N)$.
\end{enumerate}
\end{thm}

\begin{proof}
$\pi:f\mapsto f(T_1,\dots,T_N)$ is clearly a unital $*$-homomorphism satisfying $\pi(z_j)=T_j$. For each $\xi\in\mc H$, write $U\xi=(g_n)_{n\in\fk N}\in\bigoplus_n L^2(X,\mu_n)$. Then
\begin{align*}
&\lVert (f(T_1,\dots,T_N)-f_\blt(T_1,\dots,T_N))\xi\lVert^2\\
=&	\lVert U(f(T_1,\dots,T_N)-f_\blt(T_1,\dots,T_N))U^*(g_n)_{n\in\fk N}\lVert^2\\
=&\sum_{n\in\fk N}\int_X |f-f_\blt|^2\cdot |g_n|^2d\mu_n
\end{align*}	
which converges to $0$ by choosing $\mu=\sum_n |g_n|^2\mu_n$.

%It is clear that $f(T_1,\dots,T_N)$ agrees with the $\pi(f)$ defined in \eqref{eq15} when $f$ is a polynomial. Since our map $f\in C(X)\mapsto f(T_1,\dots,T_N)$  defined here by spectral decomposition is clearly a continuous unital $*$-homomorphism,  it agrees with the one defined in Thm. \ref{lb17} due to the uniqueness statement of that theorem.  


Uniqueness: Let $\pi$ be as described in the theorem. Clearly $\pi(f)$ is uniquely determined when $f$ is a polynomial. Since $\pi$ is continuous (by Prop. \ref{lb46}), by Stone-Weierstrass, $\pi(f)$ is uniquely determined when $f\in C(X)$. By Lem. \ref{lb18}, $\pi(f)$ is uniquely determined when $f\in B(X)$. 
\end{proof}



%For any Borel set $X$, we let $B(X)$ be the unital $*$-algebra of bounded Borel functions on $X$. 

\begin{comment}
\begin{df}
A (complex) \textbf{normed unital $*$-algebra} is a unital $\Cbb$-algebra $\scr A$ equipped with an involution $*$ (i.e. $*:\scr A\rightarrow\scr A$ is an antilinear bijective map satisfying $a^{**}=a$, $(ab)^*=b^*a^*$, and $1^*=1$ for all $a,b\in\scr A$) and a function $\Vert\cdot\Vert:\scr A\rightarrow\Rbb_{\geq0}$ such that $(\scr A,\Vert\cdot\Vert)$ is a normed vector space, $\Vert 1\Vert=1$, and $\Vert ab\Vert\leq\Vert a\Vert\cdot\Vert b\Vert$ for all $a,b\in\scr A$.
\end{df}
\end{comment}



The following proposition gives a variant of Prop. \ref{lb1}.

\begin{pp}\label{lb46}
Let $\scr A$ be a unital $*$-algebra equipped with a function $\Vert\cdot\Vert:\scr A\rightarrow\Rbb_{\geq0}$ satisfying the following property:
\begin{itemize}
\item If $f\in\scr A$, then there exists $g\in\scr A$ such that $f^*f+g^*g=\Vert f\Vert^2\cdot 1$.
\end{itemize}
Assume that $\pi:\scr A\rightarrow\End(\mc H)$ is a unital $*$-homomorphism, i.e., preserves the identities, multiplications and linear combinations, and $*$-structures. Then $\lVert \pi(f)\Vert\leq \lVert f\lVert$ for each $f\in \scr A$. 
\end{pp}

For example, $\scr A$ can be the space of bounded complex continuous functions on a topological space and $\Vert \cdot\Vert$ is the sup norm, or the space of bounded measurable functions and $\Vert \cdot\Vert$ is the $L^\infty$-norm. $\scr A$ can also be any unital $*$-subalgebra of $\End(\mc K)$ (where $\mc K$ is a Hilbert space) such that if $T\in\scr A$ is positive then $\sqrt T\in\scr A$. 


\begin{proof}
The idea here is similar to (but slightly simpler than) Step. 3 of the proof of Thm. \ref{lb2}.	Let $r=\lVert f\lVert$. Then $r^2-f^*f=g^*g$ for some $g\in\scr A$. For each $\xi\in\mc H$, we compute
	\begin{align*}
		\bk{\pi(f)\xi|\pi(f)\xi}=\bk{\pi(f^*f)\xi|\xi} =\bk{\pi(r^2-g^*g)\xi|\xi}=r^2\lVert\xi\lVert^2-\lVert\pi(g)\xi\lVert^2\leq r^2\lVert\xi\lVert^2.
	\end{align*}
\end{proof}


\subsection*{Another form of spectral theorem}





Spectral theorems are often presented in a form that is independent of the $L^2$ spaces $L^2(X,\mu_n)$. To begin with, we set
\begin{align}
E(\Omega)=\chi_\Omega(T_1,\dots,T_n)
\end{align}
where $\chi_\Omega$ \index{zz@$\chi_\Omega$} is the characteristic function of $\Omega$. Then $E(\Omega)$ is clearly a projection. $E$ is a projection-valued Borel measure, in the sense that $E$ associates to each $\xi,\eta\in\mc H$ the measure $\bk{E\xi|\eta}$ defined by $\bk{E\xi|\eta}(\Omega)=\bk{\chi_\Omega(T_1,\dots,T_N)\xi|\eta}$. It is easy to check that this is a complex Borel measure, which is (finite and) positive when $\xi=\eta$. Also, $E$ is determined by its evaluation$\bk{E\xi|\xi}$ for each $\xi\in\mc H$. We say $E$ is the \textbf{resolution of the identity} for $T_1,\dots,T_N$.

If $f$ is bounded Borel on $X$, we define $\int_XfdE$ to be the bounded linear operator on $\mc H$ satisfying
\begin{align*}
\Big\langle \Big(\int_XfdE\Big)\xi|\eta \Big\rangle=\int_X f\bk{dE\xi|\eta}.	
\end{align*}

\begin{thm}\label{lb49}
For each bounded Borel function $f$ on $X$, and for any $\xi,\eta\in\mc H$, we have
\begin{align}\label{eq4}
\bk{f(T_1,\dots,T_N)\xi|\eta}=\int_Xf\bk{dE\xi|\eta}.	
\end{align}
\end{thm}

Thus, we may write 
\begin{align}
f(T_1,\dots,T_N)=\int_X fdE.
\end{align}

\begin{proof}
By linearity, it suffices to assume $\eta=\xi$ so that $\bk{E\xi|\xi}$ is a positive Borel measure. Then, from the definition of $E$, it is clear that \eqref{eq4} holds when $f$ is a characteristic function.  Thus \eqref{eq4} holds when $f$ is a simple function, hence (by monotone convergence theorem) when $f$ is a positive bounded Borel function, and hence when $f$ is a bounded complex Borel function. 
\end{proof}


\begin{df}
Let $T_1,\dots,T_N$ be adjointly commuting normal operators. Let $\Sp(T_1,\dots,T_N)$ be the set of all points of $\Cbb^N$ at which there is a neighborhood $W$ satisfying $E(W)\equiv \chi_W(T_1,\dots,T_N)\neq0$. \index{Sp@$\Sp(T_1,\dots,T_N)$} This is a closed subset of $\Cbb^N$, called the \textbf{joint spectrum} of $T_1,\dots,T_N$. In the setting of Theorem \ref{lb8}, one checks easily that $\Sp(T_1,\dots,T_N)$ is the closure of the union of the supports of all $\mu_n$ ($n\in\fk N$). In the case of a single normal operator $T$, the $\Sp(T)$ defined here agrees with the one defined by \eqref{eq23}.
\end{df}



\begin{exe}
In the case of a single normal operator $T$, use the relation between $\Sp(T)$ and the supports of $\mu_n$ to deduce  that  $T$ is self-adjoint (resp. positive (i.e. $\bk{T\xi|\xi}>0$ for every $\xi\in\mc H$), unitary), if and only if $\Sp(T)$ is a subset of $\Rbb$ (resp. $[0,+\infty)$, the unit circle).
\end{exe}

\begin{exe}
Use the relation between joint spectrum and the supports of $\mu_n$ and also the definition of $\Sp(T_j)$ in \eqref{eq23} to show that  $\Sp(T_1\times\cdots\times T_N)\subset\Sp(T_1)\times\cdots\times\Sp(T_N)$.
\end{exe}

\begin{rem}\label{lb12}
The above two exercises show that, once we have a bounded Borel function $f$ on $\Sp(T_1\times\cdots\times T_N)$, we can define $f(T_1,\dots,T_N)$ by extending $f$ to a Borel function on $\Cbb^N$ and define it as in Def. \ref{lb58}. Again, this definition is independent of spectral decompositions.
\end{rem}




\subsection*{Appendix: Gelfand-Naimark theorem}

The following exercise outlines a proof of the celebrated Gelfand-Naimark Theorem using Prop. \ref{lb1}. This theorem will not be used in rest of this monograph, and hence can be safely skipped. 

\begin{exe}\label{lb64}
Let $\fk G$ be a (not necessarily finite) set of adjointly commuting self-adjoint bounded operators on $\mc H$. 
\begin{enumerate}
\item Let $\mc P$ be the set of polynomials with commuting  formal variables $\{t_T:T\in\fk G\}$. Namely, a general element is a $\Cbb$-linear combination of $t_{T_1}^{n_1}\cdots t_{T_k}^{n_k}$ where $n_1,\dots,n_k\in\Nbb$ and $T_1,\dots,T_k\in\fk G$. The involution of $\mc P$ is defined by $(at_{T_1}^{n_1}\cdots t_{T_k}^{n_k})^*=\ovl at_{T_1}^{n_1}\cdots t_{T_k}^{n_k}$ ($a\in\Cbb$). Define a linear map $\pi:\mc P\rightarrow\End(\mc H)$ sending each $at_{T_1}^{n_1}\cdots t_{T_k}^{n_k}$ to $aT_1^{n_1}\cdots T_k^{n_k}$. Show that $\pi$ is a unital $*$-homomorphism. 

\item Let $Y_T=[-\lVert T\lVert,\lVert T\lVert]^2\subset\Cbb$. Let $Y=\prod_{T\in\fk G}Y_T$, which is a compact Hausdorff space by Tychonoff's theorem. Use Prop. \ref{lb1} to show that $\pi(f)\leq \lVert f\lVert_{l^\infty(Y)}:=\sup_{t_T\in Y_T,\forall T\in\fk G}|f((t_T)_{T\in\fk G})|$ for each $f\in\mc P$. Conclude that $\pi$ can be extended uniquely to a unital $*$-homomorphism $\pi:C(Y)\rightarrow\End(\mc H)$. 

\item Let $A$ be the smallest unital (norm-)closed $*$-subalgebra of $\End(\mc H)$ containing $\fk G$, called the \textbf{$C^*$-algebra} generated by $\fk G$. Use Stone-Weierstrass theorem to show that $A=\pi(C(Y))$. Thus we have a surjective unital $*$-homomorphism $\pi:C(Y)\rightarrow A$.


\item Let $\mc I=\Ker(\pi)$. Show that $\mc I$ is a closed $*$-ideal of $C(Y)$, which means that $\mc I$ is a closed subspace of $C(Y)$, and that for each $f\in\mc I,g\in C(Y)$ we have $fh\in\mc I,f^*\in\mc I$.

\item Let $X$ be the (necessarily closed) subset of all $x\in Y$ satisfying $f(x)=0$ for each $f\in\mc I$. Apply Stone-Weierstrass theorem for locally compact Hausdorff spaces to the family $\mc I$ of functions to show that $\mc I=\{f\in C(Y):f|_X=0\}$. 

\item By Tiezte extension theorem, the restriction map $f\in C(Y)\mapsto f|_X\in C(X)$ is surjective and has kernel $\mc I$. Conclude that we have a well-defined bijective unital $*$-homomorphism $\wtd\pi:C(X)\rightarrow A$ sending each $f|_X$ to $\pi(f)$ (where $f\in C(Y)$). Apply the proof of Prop. \ref{lb46} to $\wtd\pi$ and $\wtd\pi^{-1}$ to show that $\wtd\pi$ is isometric, i.e., $\lVert  \wtd\pi(f)\lVert=\lVert f\lVert_{l^\infty(X)}$ for each $f\in C(X)$.

\item Let $A$ be any commutative (unital) $C^*$-subalgebra of $\End(\mc H)$, i.e., $A$ is a commutative unital norm-closed $*$-subalgebra of $\End(\mc H)$. Show that $A$ is generated by a set $\fk G$ of  mutually-commuting self-adjoint operators. Conclude that any $A$ is equivalent (as a normed unital $*$-algebra) to $C(X)$ for some compact Hausdorff space $X$. (This is the \textbf{Gelfand-Naimark theorem}.)
\end{enumerate}
\end{exe}














\section{Unbounded operators}




An \textbf{unbounded operator} $T$ from $\mc H_1$ to $\mc H_2$ is, by definition, a linear map from a subspace $\scr D(T)$ of $\mc H_1$ (called the \textbf{domain of $T$}) to $\mc H_2$. Unless otherwise stated, unbounded operators are \textit{densely defined}, which means $\Dom(T)$ is a dense subspace of $\mc H_1$. In the case that $\mc H_1=\mc H_2=\mc H$, we say $T$ is an unbounded operator on $\mc H$. 

Unbounded operators mean non-necessarily bounded operators. Thus, bounded linear operators are also unbounded operators. A \textbf{continuous} unbounded operator is understood in the obvious way, i.e., the map $T:\scr D(T)\rightarrow\mc H_2$ is continuous with respect to the Hilbert-space norms. Thus, bounded operators are precisely continuous unbounded operators whose domains are the full Hilbert space.

\begin{rem}
The study of unbounded operators $T$ from $\mc H_1$ to $\mc H_2$ can be transformed to the study of $\wtd T$ on a single Hilbert space $\mc H$, if we set $\mc H=\mc H_1\oplus\mc H_2$, $\scr D(\wtd T)=\scr D(T)\oplus\mc H_2$, and $\wtd T(\xi\oplus\eta)=T\xi$ if $\xi\in\scr D(T)$ and $\eta\in\mc H_2$.
\end{rem}


For (non-necessarily densely defined) unbounded operators $A,B$ from $\mc H_1$ to $\mc H_2$, and $a,b\in\Cbb$, we define
\begin{gather*}
aA+bB:\scr D(A)\cap\scr D(B)\rightarrow\mc H_2,\qquad \xi\mapsto aA\xi+bB\xi,	
\end{gather*}
which is an unbounded operator with domain
\begin{align*}
\scr D(aA+bB)=\scr D(A)\cap\scr D(B).
\end{align*}
We clearly have
\begin{align*}
(A+B)+C=A+(B+C)
\end{align*}
both of which are denoted by $A+B+C$.

Note that by our definition, we have $A-A\subset 0$, with $\subset$ becomes $=$ if and only if $\Dom(A)=\mc H_1$.

We say
\begin{gather*}
	A\subset B
\end{gather*}
provided that
\begin{gather*}
\scr D(A)\subset\scr D(B),\\
A\xi=B\xi\qquad(\forall\xi\in\scr D(A)).
\end{gather*}
This notation is justified by the definition of the \textbf{graph} of $T:\scr D(T)\rightarrow T$, which is a subset of $\mc H_1\oplus\mc H_2$ defined by \index{GT@$\scr G(T),\fk G(T)$}
\begin{align*}
\scr G(T):=\{(\xi,T\xi):\xi\in\scr D(T)\}.	
\end{align*}
Then $A\subset B$ means precisely $\scr G(A)\subset\scr G(B)$.



If $A,B$ are both (densely/non-densely defined) unbounded operators on $\mc H$, we set
\begin{align*}
AB:\scr D(AB)\rightarrow\mc H,\qquad \xi\mapsto A\cdot B\xi	
\end{align*}
where
\begin{flalign*}
\scr D(AB)=B^{-1}\scr D(A)=\{\xi\in\scr D(B):B\xi\in\scr D(A)\}.	
\end{flalign*}
If this subspace is dense, then $AB$ is an unbounded operator on $\mc H$.


\begin{pp}\label{lb25}
Let $A,B,C$ be (non-necessarily densely-defined) unbounded operators on $\mc H$. Then
\begin{gather*}
(AB)C=A(BC)\\
(A+B)C=AC+BC\\
A(B+C)\supset AB+AC
\end{gather*}
Moreover, the $\supset$ in the last relation becomes $=$ if $A$ is everywhere defined, i.e., $\Dom(A)=\mc H$. (E.g., when $A$ is bounded.)
\end{pp}

As an example that the last $\supset$ is not $=$, take any $A$ whose $\Dom(A)$ is not the full Hilbert space $\mc H$, and take $B=\idt,C=-\idt$.

\begin{proof}
For each line, if $\xi$ belongs to the domains of both sides, then it is clear that the left and the right send $\xi$ to the same vector. Therefore, it is enough to verify the three relations on the level of domains.

One verifies that both sides on the first relation have domain
\begin{align*}
	\{\xi\in\mc H:\xi\in\Dom(C),C\xi\in\Dom(B),BC\xi\in\Dom(A)\},
\end{align*}
that both sides of the second relation have domain
\begin{align*}
C^{-1}(\Dom(A)\cap\Dom(B))=C^{-1}\Dom(A)\cap C^{-1}\Dom(B),
\end{align*}
and that the left and the right of the third relation have domains
\begin{gather*}
\{\xi\in\Dom(B)\cap\Dom(C):B\xi+C\xi\in\Dom(A)\},\\
\{\xi\in\Dom(B)\cap\Dom(C):B\xi\in\Dom(A),C\xi\in\Dom(A)\}.	
\end{gather*}
The relations are thus verified. When $\scr D(A)=\mc H$, the last two domains are both $\scr D(B)\cap\scr D(C)$.
\end{proof}

\begin{df}
Let $T$ be an unbounded operator from $\mc H_1$ to $\mc H_2$. We define
\begin{align*}
\Dom(T^*):=\{&\eta\in\mc H_2:\text{There exists $\psi\in\Dom(\mc H_1)$ such that}\\
 &\text{$\bk{T\xi|\eta}=\bk{\xi|\psi}$ for each $\xi\in\Dom(T)$}\}.	
\end{align*}
Such $\psi$ is unique and is denoted by $T^*\eta$. So for each $\xi\in\Dom(T),\eta\in\Dom(T^*)$, we have
\begin{align*}
	\bk{T\xi|\eta}=\bk{\xi|T^*\eta}.
\end{align*}
$T^*$ is a non-necessarily densely defined unbounded operator from $\mc H_2$ to $\mc H_1$ with domain $\Dom(T^*)$, called the \textbf{adjoint} of $T$.Note that by the Riesz representation theory for Hilbert spaces, we have
\begin{align}
\Dom(T^*):=\{\eta\in\mc H_2:\text{The linear functional $\xi\in\Dom(T)\mapsto \bk{T\xi|\eta}$ is bounded}\}.\label{eq21}
\end{align}
\end{df}



It is obvious that
\begin{align}
A\subset B\quad\Rightarrow \quad B^*\subset A^*.\label{eq22}
\end{align}

\begin{pp}\label{lb9}
Let $A,B$ be unbounded operators on $\mc H$. Then
\begin{gather*}
(A+B)^*\supset A^*+B^*\\
(AB)^*\supset B^*A^*
\end{gather*}
Moreover, if $A$ is bounded, then the $\supset$ in the two relations are both $=$.
\end{pp}


\begin{proof}
The first $\supset$ is easy to verify using \eqref{eq20}. For the second one, suppose $\eta\in\Dom(B^*A^*)$. Then $\eta\in\Dom(A^*)$, and $A^*\eta\in\Dom(B^*)$. The first property says $\bk{A\xi|\eta}=\bk{\xi|A^*\eta}$ for a vector $A^*\eta$ and every $\xi\in\Dom(A)$, in particular, every vector $B\psi$ where $\psi\in\Dom(AB)$. Thus $\bk{AB\psi|\eta}=\bk{B\psi|A^*\eta}$, which because of $A^*\eta\in\Dom(B^*)$ is equal to $\bk{\psi|B^*A^*\eta}$ for a vector $B^*A^*\eta$ and every $\psi\in\Dom(AB)$. This proves the second $\supset$.

Now assume $A$ is bounded. Choose any $\xi\in\Dom((A+B)^*)$. Then the function from $\eta\in\Dom(A+B)=\Dom(B)$ to $\bk{\xi|(A+B)\eta}$ is continuous. Since $\bk{\xi|A\eta}$ is clearly continuous over $\eta$, so is $\bk{\xi|B\eta}$. So $\xi\in\Dom(B^*)=\Dom(A^*+B^*)$. This proves the first equality. Now choose any $\eta\in\Dom((AB)^*)$. Note that $A^*\eta$ is defined. Then for each  $\xi\in\Dom(B)$, we have $\bk{B\xi|A^*\eta}=\bk{AB\xi|\eta}=\bk{\xi|(AB)^*\eta}$, showing that $A^*\eta\in\Dom(B^*)$ and hence $\eta\in\Dom(B^*A^*)$. The second equality is also proved
\end{proof}




\begin{df}
An unbounded operator $T$ from $\mc H_1$ to $\mc H_2$ is called \textbf{adjointable}  if $T^*$ has dense domain in $\mc H_2$. Assume $T$ is adjointable. It is clear that
\begin{align}
T\subset T^{**}.	
\end{align}
Thus $T^*$ is also adjointable (because its adjoint has dense domain, which contains a dense subspace $\Dom(T)$).
\end{df}

Thus, roughly speaking, an adjointable operator is one that we can take adjoint any times we want. But this does not mean that taking adjoints of $T$ will give us infinitely many different operators. Instead, we have only three different ones: $T,T^*,T^{**}$, as indicated by the following obvious property:




\begin{pp}\label{lb10}
Let $T$ be adjointable. Then $T^*=T^{***}$.
\end{pp}

\begin{proof}
Since $T\subset T^{**}$ in general, replace $T$ by $T^*$ and we get $T^*\subset T^{***}$. Take the adjoint of $T\subset T^{**}$ and notice \eqref{eq22}, we have $T^*\supset T^{***}$.
\end{proof}


Adjointability is an analytic condition, since it says roughly that many vectors  $\eta$ in $\mc H_2$ makes the linear functional $\xi\mapsto\bk{T\xi|\eta}$ continuous. 

\begin{exe}
Define an unbounded operator $T:\l^2(\Zbb_+)\rightarrow\Cbb$ whose domain $\Dom(T)$ is the set of all $(a_1,a_2,\dots)$ having finitely many non-zero elements. Define $T(a_1,a_2,\dots)=\sum_n a_n$. Show that $T$ is not adjointable. In general, show that any non-continuous linear map from an infinite dimensional Hilbert space to a finite dimensional one is not adjointable. 
\end{exe}


\begin{rem}
Let $T$ be a (densely defined) unbounded operator from $\mc H_1$ to $\mc H_2$. Let $E$ be the projection of $\mc H_2$ onto the closure of $\Dom(T^*)$. Then the restriction $ET$ from $\mc H_1$ to $\Rng(E)$ is adjointable.
\end{rem}


Continuous operators are certainly adjointable. Recall that if $A$ is bounded, then $\mathrm{Ker}(A)=\Rng(A^*)^\perp$, which shows that $A$ is injective (resp. has dense range) if and only if $A^*$ has dense domain (resp. injective). Using this fact, we can easily produce many unbounded adjointable operators.

\begin{eg}\label{lb13}
Let $A:\mc H_1\rightarrow\mc H_2$ be bounded, injective, and has dense range. By \eqref{eq19}, $A^*:\mc H_2\rightarrow\mc H_1$ is also bounded, injective, and has dense range. Let $\Dom(A^{-1})=\Rng(A)$, define $A^{-1}(A\xi)=\xi$ for each $\xi\in\mc H_1$. Then $A^{-1}$ is an adjointable unbounded operator from $\mc H_2$ to $\mc H_1$ with domain $\Dom(A^{-1})$, and
\begin{align}
(A^{-1})^*=(A^*)^{-1}.	\label{eq8}
\end{align}
\end{eg}

Note that $A^{-1}$ (and similarly $(A^*)^{-1}$) are surjective.

\begin{proof}
If $\xi\in \Dom((A^*)^{-1})$, then  for any $\eta\in\Dom(A^{-1})$, we have $\bk{A^{-1}\eta|\xi}=\bk{A^{-1}\eta|A^*(A^*)^{-1}\xi}=\bk{AA^{-1}\eta|(A^*)^{-1}\xi}=\bk{\eta|(A^*)^{-1}\xi}$, which shows $\xi\in\Dom((A^{-1})^*)$ and $(A^{-1})^*\xi=(A^*)^{-1}\xi$. Thus $(A^{-1})^*\supset(A^*)^{-1}$. In particular, since $(A^*)^{-1}$ has dense domain (which is the range of $A^*$), so does $(A^{-1})^*$. So $A^{-1}$ is adjointable.

Conversely, let $\xi\in \Dom((A^{-1})^*)$. Then $\bk{\xi|\gamma}=\bk{\xi|A^{-1}A\gamma}=\bk{(A^{-1})^*\xi|A\gamma)}=\bk{A^*(A^{-1})^*\xi|\gamma}$ for each $\gamma\in\mc H_1$ shows  $\xi=A^*(A^{-1})^*\xi$. Therefore $\xi$ is in the range of $A^*$, i.e., in the domain of $(A^*)^{-1}$. This implies $\Dom((A^{-1})^*)\subset\Dom((A^*)^{-1})$, which finishes the proof.
\end{proof}


\section{Spectral theorem for unbounded positive operators}

Recall that a \textit{bounded} operator $A$ on $\mc H$ is called \textbf{positive} if $\bk{A\xi|\xi}\geq 0$ for each $\xi\in\mc H$. Equivalently, $A$ is normal, and in the setting of Thm. \ref{lb8},  all $\mu_n$ have supports inside $[0,+\infty)$. It is also clear from Thm. \ref{lb8} that $1+A$ is invertible, and its inverse is also bounded and positive. Motivated by this observation, we consider:

\begin{pp}\label{lb11}
Let $T$ be an unbounded operator on $\mc H$. Assume $\bk{T\xi|\xi}\geq 0$ for each $\xi\in\Dom(T)$. Then  the following two equivalent conditions are satisfied:
\begin{itemize}
	\item The range of $1+T$ is $\mc H$.
	\item $1+T$ is the inverse of a bounded injective positve operator $A$ on $\mc H$. (Cf. Example \ref{lb13}. Note that $A$ has dense range since $A=A^*$.)
\end{itemize}
The second condition also implies $\lVert A\lVert\leq 1$. 
\end{pp}

We say that an unbounded operator $T$ satisfying $\bk{T\xi|\xi}\geq 0$ for each $\xi\in\Dom(T)$ and the above two equivalent conditions is \textbf{positive}.

\begin{proof}
We prove the equivalence of the two conditions. The second one clearly implies the first one by spectral decomposition of $A$. On the other hand, assume $1+T$ has range $\mc H$. Note that $1+T$ is injective, since if $(1+T)\xi=0$ then $0=\bk{(1+T)\xi|\xi}=\lVert\xi|\lVert^2+\bk{T\xi|\xi}\geq \lVert\xi\lVert^2$. Thus, we simply define $A$ to be the (everywhere defined) linear operator on $\mc H$ satisfying that $A(1+T)\xi=\xi$ for every $\xi\in\Dom(1+T)$. $A$ is clearly injective. For each $\xi\in\Dom(T)$, since $\bk{T\xi|\xi}=\bk{\xi|T\xi}\geq 0$, we have $\lVert (1+T)\xi\lVert^2\geq \Vert\xi\lVert^2=\lVert A(1+T)\xi\lVert^2$, which shows that $A$ is bounded and $\lVert A\lVert\leq 1$. Moreover, $\bk{A(1+T)\xi|(1+T)\xi}=\bk{\xi|(1+T)\xi}\geq 0$, showing that $A$ is positive.
\end{proof}



The condition that $1+T$ is the inverse of a bounded injective positive operator has many useful implications. As our first application, we define: 


\begin{df}
An  unbounded operator $T$ on $\mc H$ is called \textbf{symmetric} if $\bk{T\xi|\eta}=\bk{\xi|T\eta}$ for every $\xi,\eta\in\Dom(T)$. Equivalently, $T\subset T^*$. We say that $T$ is \textbf{self-adjoint} if $T=T^*$.
\end{df}

Then we have:
\begin{pp}\label{lb20}
Positive unbounded operators are self-adjoint.
\end{pp}

\begin{proof}
Let $T$ be positive, and let $A$ be the inverse of $1+T$, which is bounded, injective, and positive. So $A^*=A$. By Example \ref{lb13}, we have $1+T^*=(1+T)^*=(A^{-1})^*=(A^*)^{-1}=A^{-1}=1+T$.
\end{proof}



Thus, positive operators are adjointable.




\begin{df}
Let $X$ be a measurable space equipped with a family of measures $(\mu_n)_{n\in\fk N}$. Let $f:X\rightarrow\Cbb$ be measurable. The \textbf{multiplication operator} \index{Mf@$M_f$, the multiplication operator of $f$} $M_f$ on $\mc H:=\bigoplus_{n\in\fk N}L^2(X,\mu_n)$ is the unbounded operator with domain
\begin{align*}
\Dom(M_f)=\Big\{\oplus_n g_n:\sum_n\Vert g_n\Vert_2<+\infty,\sum_n\Vert fg_n\Vert_2<+\infty\Big\}
\end{align*}
and satisfying $M_f(\oplus_n g_n)=\oplus_n fg_n$ for each $\oplus_n g_n\in\Dom(M_f)$. One checks easily \footnote{If $r>0$ and $E_r=\{x\in X:|f(x)|\leq r\}$, then for each $\xi\in\mc H$ we have $E_r\xi\in\Dom(M_f)$ and $\lim_{r\rightarrow+\infty}E_r\xi=\xi$ by the monotone convergence theorem.} that $\Dom(M_f)$ is dense, and that
\begin{align*}
(M_f)^*=M_{f^*}
\end{align*}
where $f^*(x)=\ovl{f(x)}$.
\end{df}


\begin{pp}\label{lb70}
Let $\phi:X\rightarrow Y$ be a Borel isomorphism of topological spaces. Let $(\nu_n)_{n\in\fk N}$ be a family of Borel measures on $Y$. Then
\begin{gather*}
U:\bigoplus_nL^2(Y,\nu_n)\rightarrow \bigoplus_nL^2(X,\phi^*\nu_n)\qquad Ug=g\circ\phi
\end{gather*}
is unitary. Moreover, if $f:Y\rightarrow\Cbb$ is Borel, then on $\bigoplus_nL^2(Y,\nu_n)$ we have
\begin{align*}
UM_fU^{-1}=M_{f\circ\phi}
\end{align*}
In particular, $U\Dom(M_f)=M_{f\circ\phi}$.
\end{pp}


\begin{proof}
That $U$ is unitary follows from \eqref{eq26}. That $U\Dom(M_f)=M_{f\circ\phi}$ and $UM_fU^{-1}=M_{f\circ\phi}$ are easy to check.
\end{proof}




\begin{thm}[Spectral theorem for a positive operator]\label{lb14}
Let $T$ be a positive unbounded operator on $\mc H$. Then there exists a set $(\mu_n)_{n\in\fk N}$ of finite (positive) Borel measures on $[0,+\infty)$ and a unitary
\begin{align*}
	U:\mc H\rightarrow\bigoplus_{n\in\fk N} L^2([0,+\infty),\mu_n)
\end{align*}
satisfying $UTU^*=M_x$ where $x$ is the identity function on $[0,+\infty)$.
\end{thm}

Note that any unbounded operator described in such way is a positive operator, since the multiplication operator defined by $(1+x)^{-1}$ is bounded and positive.


\begin{proof}
Let $A$ be the bounded invertible positive operator whose inverse is $1+T$. Since $A$ is bounded and positive, we have $\Sp(A)\subset[0,+\infty)$. Since $\lVert A\lVert\leq 1$, we have $\Sp(A)\subset[0,1]$.  

By Thm. \ref{lb8}. $T$ is unitarily equivalent to $M_x$ on $\mc K=\bigoplus_n L^2([0,1],\nu_n)$ where $(\nu_n)_n$ is a family of finite Borel measure on $[0,1]$. Since $A$ is injective, we must have $\nu_n(\{0\})=0$, and hence $\mc K=\bigoplus_n L^2((0,1],\nu_n)$. Then $T=M_{x^{-1}-1}$ on $\mc K$. The proof is finished by applying Prop. \ref{lb70} to the homeomorphism $t\in[0,+\infty)\mapsto (1+t)^{-1}\in(0,1]$.
\end{proof}



The following exercise is important for future application.

\begin{exe}\label{lb15}
Assume $T$ is positive. This exercise shows that we can safely restrict $T$ to a closed subspace containing $\ovl{\Rng(T)}$, which is a positive operator and contains all the information of $T$. This is similar to restricting a function to a subset containing its support.
\begin{enumerate}
\item In Thm. \ref{lb14}, show that the closure of $\Rng(UTU^*)$ is the set of all $(f_n)_{n\in\fk N}$ such that $f_n(0)=0$ for each $n$.
\item Use the above result to show that 
\begin{align*}
\Dom(T)=\big(\Dom(T)\cap\ovl{\Rng(T)}\big)\oplus \Rng(T)^\perp,	
\end{align*}
that $T$ acts trivially on $\Rng(T)^\perp$, and that the restriction of  $T$ to $\ovl{\Rng(T)}$ is a positive operator with domain $\Dom(T)\cap\ovl{\Rng(T)}$ and dense range $\Rng(T)$.
\item Let $\mc H_0$ be a closed subspace of $\mc H$ containing $\Rng(T)$. Use the previous result to show that
\begin{align*}
\Dom(T)=\big(\Dom(T)\cap \mc H_0\big)\oplus\mc H_0^\perp,	
\end{align*}
that $T$ acts trivially on $\mc H_0^\perp$, and that $T|_{\mc H_0}$ is a positive operator with domain $\Dom(T|_{\mc H_0})=\Dom(T)\cap \mc H_0$ and range $\Rng(T|_{\mc H_0})=\Rng(T)$.

\textit{(Hint: Write $\mc H_0=\ovl{\Rng(T)}\oplus\mc H_1$. By the previous step, we have  $\Dom(T)=(\Dom(T)\cap\ovl{\Rng(T)})\oplus\mc H_1\oplus\mc H_0^\perp$ and $\Dom(T|_{\mc H_0})=(\Dom(T)\cap\ovl{\Rng(T)})\oplus\mc H_1$.)}
\item  Let $E$ be the projection of $\mc H$ onto a closed subspace $\mc H_0$ containing $\Rng(T)$. Use the above description to show $T=ET=TE$.
\end{enumerate}

\end{exe}




\begin{rem}\label{lb21}
Let $T$ be a positive operator on $\mc H$. Assume $U$ is a partial isometry from $\mc H$ to $\mc K$ with source space $\sgm(U)\supset\ovl{\Rng(T)}$ and target space $\tau(U)$. Then $S:=UTU^*$ is a positive operator on $\mc K$ whose range is $\Rng(S)=U\Rng(T)$. Its domain is $\Dom(S)=U\Dom(T)\oplus \tau(U)^\perp$. 

Indeed, as shown in the previous exercise, the action $T$ decomposes into two parts: on $\sgm(U)^\perp$ it acts trivially; on $\sgm(U)$ it restricts to a positive operator with range $\Rng(T)$ and domain $\Dom(T)\cap\sgm(U)$. Thus, $S$ decomposes into two parts: on $\tau(U)^\perp$ it acts trivially; on $\tau(U)$ it is unitarily equivalent to the action of $T$ on $\sgm(U)$ via the unitary map $U:\sgm(U)\xrightarrow{\simeq}\tau(U)$. So $S$ has domain $U(\Dom(T)\cap \sgm(U))\oplus \tau(U)^\perp$, which equals $U\Dom(T)\oplus \tau(U)^\perp$ since $U=UU^*U$ and $U^*U$ (which is the projection onto $\sgm(U)$) projects $\Dom(T)=(\Dom(T)\cap\sgm(U))\oplus \sgm(U)^\perp$ onto $\Dom(T)\cap\sgm(U)$.
\end{rem}







The following Lemma will be used later to obtain polar decomposition.

\begin{lm}\label{lb19}
Assume $T$ is a positive unbounded operator on $\mc H$. Then there is a unique positive operator on $\mc H$ satisfying $H^2=T$. We say $H$ is the \textbf{(positive) square root} of $T$ and write $H=T^{\frac 12}=\sqrt T$. 
\end{lm}

\begin{proof}
Existence: Apply the spectral theorem to $T$, we see that $T$ clearly has a positive square root, i.e. $M_{\sqrt x}$ if $T=M_x$.
	
Uniqueness: Suppose $H,K$ are positive, and $H^2=K^2=T$. By the spectral theorem \ref{lb14}, $H$ is unitarily equivalent to $M_x$ on $\bigoplus_n L^2([0,+\infty),\mu_n)$. Assume WLOG that $H=M_x$. Then $T=(M_x)^2=M_{x^2}$. 

One checks easily $(1+M_{x^2})^{-1}=M_{(1+x^2)^{-1}}$. Thus $f((1+M_{x^2})^{-1})=M_{f((1+x^2)^{-1})}$ whenever $f$ is a polynomial, and hence, by Stone-Weierstrass theorem and Prop. \ref{lb46}, whenever $f\in C([0,1])$.  Set $f(x)=\frac{\sqrt x}{\sqrt x+\sqrt{1-x}}=\frac{1}{1+\sqrt{x^{-1}-1}}$. Then
\begin{align*}
f((1+M_{x^2})^{-1})=M_{f((1+x^2)^{-1})}=M_{(1+x)^{-1}}=(1+M_x)^{-1}
\end{align*}
Hence $(1+H)^{-1}=f((1+T)^{-1})$. Similarly $(1+K)^{-1}=f((1+T)^{-1})$. This proves $H=K$.
\end{proof}


\section{Closable and closed operators, polar decomposition}

As an application of the spectral theorem for positive operators, we study the problem of closures of unbounded operators. If $T$ is adjointable, then we may regard $T^{**}$ as the algebraic closure of $T$. One may wonder whether $T^{**}$ (the algebraic closure of $T$) can be approximated by $T$ in an appropriate sense. We shall answer this question in this section.

Recall the graph $\scr G(T)=\{(\xi,T\xi):\xi\in\Dom(T)\}$. Equivalently, we can consider $\fk G(T)$ \index{GT@$\scr G(T),\fk G(T)$} to be the same as $\Dom(T)$ as vector spaces, but equipped with a different inner product: for each $\xi,\eta\in\Dom(T)$, we set
\begin{align}
\bk{\xi|\eta}_{\fk G(T)}=\bk{\xi|\eta}+\bk{T\xi|T\eta}\label{eq11}
\end{align}
where $\bk {\cdot|\cdot}$ is the original inner product of $\mc H$. To avoid confusion, we write the vector in $\fk G(T)$ corresponding to $\xi\in\Dom(T)$ as $\Psi\xi$. Namely, we have a bijective linear map
\begin{gather}\label{eq27}
\Psi:\Dom(T)\rightarrow\fk G(T),\nonumber\\
\bk{\Psi\xi|\Psi\eta}=\bk{\xi|\eta}+\bk{T\xi|T\eta}	\label{eq7}
\end{gather}
for each $\xi,\eta\in\Dom(T)$. Then $\fk G(T)$ is equivalent to $\scr G(T)$ as inner product spaces.



\begin{df}
Let $T$ be an unbounded operator from $\mc H_1$ to $\mc H_2$. We say $T$ is \textbf{closed} if the following clearly equivalent conditions are satisfied:
\begin{itemize}
\item $\scr G(T)$ is a closed subspace of $\mc H_1\oplus\mc H_2$.
\item $\fk G(T)$ is a complete metric space (i.e., a Hilbert space).
\item Suppose $\xi_n$ is a sequence in $\Dom(T)$ such that both $\xi_n$ and $T\xi_n$ converge. Let $\xi=\lim_{n\rightarrow\infty}\xi_n$ and $\eta=\lim_{n\rightarrow\infty}T\xi_n$. Then $\xi\in\Dom(T)$, and $T\xi=\eta$.
\end{itemize}
\end{df}

Note that the above statement about sequences can be replaced by that of nets.


A closed operator is not necessarily determined by its action on a dense subspace of $\Dom(T)$. The appropriate density notion for unbounded closed operators is that of cores:

\begin{df}
Suppose $T$ is an unbounded operator from $\mc H_1$ to $\mc H_2$. A  subspace $\Dom_0$ of $\Dom(T)$ is called a \textbf{core for $T$} if the following clearly equivalent conditions are satisfied
\begin{itemize}
		\item $\scr G(T|_{\Dom_0})$ is a dense subspace of $\scr G(T)$.
		\item $\Psi\Dom_0$ is a dense subspace of $\Psi\Dom(T)=\fk G(T)$.
		\item For each $\xi\in\Dom(T)$ there exists a sequence $\xi_n\in\Dom_0$, such that $\xi_n\rightarrow\xi$ and $T\xi_n\rightarrow T\xi$.
\end{itemize} 
In the case that $T$ is closed, $\Dom_0$ is a core for $T$ if and only if for each $\xi\in\Dom(T)$, there exists a sequence $\xi_n\in\Dom_0$, such that $\xi_n$ converges to $\xi$ and $T\xi_n$ is a Cauchy sequence.
\end{df}

Note that a core for $T$ is automatically a dense subspace of $\Dom(T)$ and of $\mc H_1$. $T$ is uniquely determined by its restriction to a core.










\begin{eg}\label{lb23}
If $T$ is adjointable, then $T^*$ is closed.
\end{eg}

\begin{proof}
Let $\eta_n\in\Dom(T^*)$ such that $\eta_n\rightarrow\eta\in\mc H_2$ and $T^*\eta_n\rightarrow\psi\in\mc H_1$. Choose any $\xi\in\Dom(T)$. Then
\begin{align*}
\bk{\eta|T\xi}=\lim_{n\rightarrow\infty}\bk{\eta_n|T\xi}=\lim_{n\rightarrow\infty}\bk{T^*\eta_n|\xi}=\bk{\psi|\xi},
\end{align*}
which shows $\eta\in\Dom(T^*)$ and $T^*\eta=\psi$.
\end{proof}

As a consequence, we see that for every adjointable $T$, its algebraic closure $T^{**}$ is closed. Also, any self-adjoint operator (and in particular, positive operator cf. Prop. \ref{lb20}) is closed.



We shall show the converse of the above example, namely, closed operators are adjoints of (adjointable) unbounded operators. If we define an unbounded operator to be algebraically closed provided that it is the adjoint of another one, then we will see that algebraically closedness and (previously defined) analytically closedness are equal. Then it follows easily that for every adjointable unbounded operator, its algebraic closure equals analytic closure. Moreover, the adjointability condition is equivalent to an analytic one.


We first need a crucial result; our treatment here follows \cite[Rem. 2.7.7]{Kad}.

\begin{lm}\label{lb16}
Let $T$ be an unbounded closed operator from $\mc H_1$ to $\mc H_2$. Then $T^*T$ is a (densely defined) unbounded positive operator on $\mc H_1$. Moreover, $\Dom(T^*T)$ is a core for $T$.
\end{lm}


In this lemma, we do not assume that $T^*$ is densely defined. Then $T^*T$ is defined on all $\xi\in\Dom(T)$ such that $T\xi\in\Dom(T^*)$.

\begin{proof}
Notice the bijective map $\Psi$ in \eqref{eq7}. Since $T$ is closed, $\fk G(T)$ is a Hilbert space. We regard $\Psi$ as an unbounded operator from $\mc H$ to  $\fk G(T)$ with dense domain $\Dom(\Psi)=\Dom(T)$.  We claim that
\begin{align}
\Psi^*\Psi=1+T^*T.	
\end{align}
Choose any $\xi\in\Dom(\Psi^*\Psi)\subset\Dom(\Psi)=\Dom(T)$, and choose any $\eta\in\Dom(\Psi)=\Dom(T)$, we use \eqref{eq7} to calculate
\begin{align*}
\bk{\Psi^*\Psi\xi|\eta}=\bk{\Psi\xi|\Psi\eta}=\bk{\xi|\eta}+\bk{T\xi|T\eta},
\end{align*}
which shows $T\xi\in\Dom(T^*)$ and $T^*T\xi=\Psi^*\Psi\xi-\xi$. So $\Psi^*\Psi\subset 1+T^*T$. Conversely, choose $\xi\in\Dom(T^*T)\subset\Dom(T)$ and $\eta\in\Dom(T)$, then 
\begin{align*}
\bk{\Psi\xi|\Psi\eta}=\bk{\xi|\eta}+\bk{T\xi|T\eta}=\bk{\xi|\eta}+\bk{T^*T\xi|\eta}	
\end{align*}
shows $\Psi\xi\in\Dom(\Psi^*)$ and $\Psi^*\Psi\xi=\xi+T^*T\xi$. So $\Psi^*\Psi\supset 1+T^*T$.

Since $\Psi$ is injective, and since its range is $\fk G(T)$, we can define its inverse $A=\Psi^{-1}$ to be a linear map from $\fk G(T)$ to $\mc H_1$ with dense image $\Dom(T)$. $A$ is clearly injective and bounded. Thus, Example \ref{lb13} applies and $\Psi=A^{-1}$.  Now, noting \eqref{eq8}, we have
\begin{align*}
&(1+T^*T)AA^*=\Psi^*\Psi AA^*=(A^{-1})^*A^{-1}AA^*\\
=&(A^*)^{-1}A^{-1}AA^*=	(A^*)^{-1}\idt_{\fk G(T)} A^*=(A^*)^{-1}A^*=\idt_{\mc H_1}.
\end{align*}
Since the domain of $(1+T^*T)AA^*$ is the set of all $\xi\in\mc H_1$ satisfying that $AA^*\xi\in\Dom(1+T^*T)=\Dom(T^*T)$, we see that $\Dom(T^*T)$ contains the range of $AA^*$. Since $A$ is bounded and has dense range $\Dom(T)$, and since $A^*$ also has dense range (since $A$ is injective), we see that $AA^*$ has dense range. So $T^*T$ has dense domain. Next, the above long calculation shows that $1+T^*T$ has range $\mc H_1$. It is clear that $\bk{(1+T^*T)\xi|\xi}\geq 0$ whenever $\xi\in\Dom(T^*T)$. Thus $T^*T$ is positive.

Finally, we show $\Dom(T^*T)=\Dom(\Psi^*\Psi)$ is a core for $T$ by showing that $\Psi\Dom(\Psi^*\Psi)$ is a dense subspace of $\fk G(T)=\Psi\Dom(\Psi)$. Since we have proved $\Psi^*\Psi AA^*=\idt_{\mc H_1}$, we see that $\Rng(AA^*)\subset\Dom(\Psi^*\Psi)$. Since $\Psi AA^*=A^*$, we see that $\Psi\Rng(AA^*)$ equals $\Rng(A^*)$, which is a dense subspace of $\fk G(T)$ since $A$ is injective. We are done.
\end{proof}



\begin{thm}[Polar decomposition]\label{lb22}
Let $T$ be a closed operator from $\mc H_1$ to $\mc H_2$. 
\begin{enumerate}
\item There exist unique $U,H$ satisfying the following conditions:   $H$ is a positive operator on $\mc H_1$, $U$ is a partial isometry from $\mc H_1$ to $\mc H_2$ whose source space $\sgm(U)$ is the closure of $\Rng(H)$, and
\begin{align*}
	T=UH.
\end{align*} 
\item There exist unique $V,K$ satisfying the following conditions:   $K$ is a positive operator on $\mc H_2$, $V$ is a partial isometry from $\mc H_1$ to $\mc H_2$ whose target space $\tau(V)$ is the closure of $\Rng(K)$, and
\begin{align*}
	T=KV.
\end{align*} 
\end{enumerate}
Moreover, we have $U=V$, $H=(T^*T)^{\frac 12}$,  $K=(TT^*)^{\frac 12}$, $T$ is adjointable, and
\begin{align*}
T^*=HU^*=U^*K	
\end{align*}
are the right and the left  polar decompositions of $T^*$.
\end{thm}

We call $T=UH$ and $T=KV$ respectively the \textbf{left polar decomposition} and the \textbf{right polar decomposition} of $T$. $U=V$ is called the \textbf{phase} of $T$, and $H$ is called the \textbf{absolute value} of $T$. 


\begin{proof}
Existence: By Lemma \ref{lb16}, $T^*T$ is a positive operator,  which by spectral theorem admits a positive square root $H=\sqrt{T^*T}$. So $H^2=T^*T$. Note that $\Dom(H^2)=\Dom(T^*T)$ are inside the domains of $H$ and $T$. We define a linear map
\begin{align*}
U:H\Dom(T^*T)\rightarrow T\Dom(T^*T)	
\end{align*}
sending $H\xi\mapsto T\xi$ for each $\xi\in\Dom(T^*T)$. This map is well defined and preserves inner products since, for another $\eta\in\Dom(T^*T)$, we have
\begin{align*}
\bk{H\xi|H\eta}=\bk{H^2\xi|\eta}=\bk{T^*T\xi|\eta}=\bk{T\xi|T\eta}.	
\end{align*}
Since $\Dom(T^*T)=\Dom(H^2)$ is a core for $H$ and $T$ by Lemma \ref{lb16}, $H\Dom(T^*T)=H\Dom(H^2)$ is dense in $\Rng(H)$, and $T\Dom(T^*T)$ is dense in $T\Dom(T)=\Rng(T)$. Thus $U$ is extended uniquely to a unitary map from $\ovl{\Rng(H)}$ to $\ovl{\Rng(T)}$.	It is further extended to a partial isometry from $\mc H_1$ to $\mc H_2$ by acting trivially on $\Rng(H_1)^\perp$. So the source space $\sgm(U)$ and target space $\tau(U)$ are respectively $\ovl{\Rng(H)}$ and $\ovl{\Rng(T)}$.

From  the construction of $U$, we see that $T|_{\Dom(T^*T)}=UH|_{\Dom(T^*T)}$. Recall that $\Dom(T^*T)$ is a core for both $T$ and $H$, and hence also a core for $UH$. Thus, passing the closures of the graphs we must have $T=UH$.

Since $U^*U$ is the projection of $\mc H_1$ onto $\sgm(U)=\ovl{\Rng(H)}$, by Exercise \ref{lb15}, we have $H=HU^*U$ and hence $T=(UHU^*)U$. Let $K=UHU^*$. By Remark \ref{lb21}, $K$ is a positive operator and $\ovl{\Rng(K)}=U\ovl{\Rng(H)}=\tau(U)$. So $T=KU$ is a right decomposition for $T$.

We now prove the existence of polar decompositions for $T^*$. By Prop. \ref{lb9}, $T=UH$ shows $T^*=HU^*$. Since $\tau(U^*)=\sgm(U)=\ovl{\Rng(H)}$, $T^*=HU^*$ is a right polar decomposition for $T^*$. Since we define $K$ to be $UHU^*$, we have $T^*=U^*UHU^*=U^*K$, which is a left polar decomposition for $T$ since $\sgm(U^*)=\tau(U)=\ovl{\Rng(K)}$. Also, $\Dom(T^*)=\Dom(K)$ is a dense subspace of $\mc H_2$. So $T^*$ is adjointable.

 
	
Uniqueness: Suppose $T=UH=KV$ as described in the theorem. Then $T^*T=H^2$. Thus, by Lemma \ref{lb19}, $H$ is the unique positive square root $(T^*T)^{\frac 12}$ of $T^*T$. Similarly, $K=(TT^*)^{\frac 12}$ is uniquely determined by $T$.

It remains to show that $U$ and $V$ are uniquely determined. Since $\ovl{\Rng(H)}$ is the source space of $U$, $U$ acts trivially on $\Rng(H)^\perp$. The action of $U$ on $\Rng(H)$ is determined by $T$, since it sends $H\xi$ to $T\xi$ ($\xi\in\Dom(T)=\Dom(UH)=\Dom(H)$). So $U$ is unique. Finally, since $\ovl{\Rng(K)}$ is assumed to be $\tau(V)$, we have $T=VV^*KV$. So $T=V\cdot (V^*KV)$ is a left polar decomposition of $T$ since $V^*KV$ is positive and its range is dense in $\sgm(V)$ by Remark \ref{lb21} again. Thus, by the uniqueness of left polar decomposition which we have just proved, $V$ is uniquely determined.
\end{proof}


\begin{rem}\label{lb32}
In the above polar decompositions, it is clear from the proof that we have
\begin{align*}
(TT^*)^{\frac 12}=U(T^*T)^{\frac 12}U^*,\qquad (T^*T)^{\frac 12}=U^*(TT^*)^{\frac 12}U.	
\end{align*}
\end{rem}




\begin{rem}\label{lb45}
Suppse $H$ is a positive operator on $\mc H_1$, and $U:\mc H_1\rightarrow\mc H_2$ is a partial isometry with $\sgm(U)\supset \ovl{\Rng(H)}$. Then $UH$ is closed, since $H$ is closed, and  $U^*UH=H$ shows that $\fk G(H)$ and $\fk G(UH)$ are $\Dom(H)$ with the same inner product. Now assume $\sgm(U)=\ovl{\Rng(H)}$. Then  $U\cdot H$ is the left polar decomposition for $T:=UH$.
\end{rem}



\begin{thm}\label{lb24}
Let $T$ be an unbounded operator from $\mc H_1$ to $\mc H_2$.
\begin{enumerate}
\item The following three are equivalent.

(a) $T$ is closed.

(b) $T$ is adjointable and $T=T^{**}$.

(c) $T=S^*$ for some adjointable unbounded operator $S$ from $\mc H_2$ to $\mc H_1$.

\item $T$ is adjointable if and only if $T$ is \textbf{closable} (or \textbf{preclosed}), the latter means that $T$ is contained in a closed operator from $\mc H_1$ to $\mc H_2$.

\item Suppose $\Dom_0$ is a core for $T$. Then $(T|_{\Dom_0})^*=T^*$.


\end{enumerate}
\end{thm}

Thus, ``adjointable" and ``closable" are interchangeable. We will use ``closable" more often in the remaining parts of this note.


\begin{proof}
1. (a) $\Rightarrow$ (b): If $T$ is closed, then by Theorem \ref{lb22}, $T$ is adjointable, and we have polar decompisitions $T=KU$ and $T^*=UK$. By Prop. \ref{lb9}, $(T^*)^*=(U^*K)^*$ equals $KU^*=T$.

(b) $\Rightarrow$ (c):  Take $S=T^*$.

(c) $\Rightarrow$ (a): Example \ref{lb23}.

2. If $T$ is adjointable then $T$ is contained in the closed operator $T^{**}$. Conversely, if $T\subset T_1$ for a (densely defined) closed $T_1$, then $T^*\supset T_1^*$ and (by part 1) $T_1^*$ has dense domain. So $T^*$ has dense domain, which means $T$ is adjointable. 

3. $T|_{\Dom_0}\subset T$ implies $(T|_{\Dom_0})^*\supset T^*$. Suppose $\eta\in\Dom((T|_{\Dom_0})^*)$. For each $\xi\in\Dom(T)$, choose $\xi_n\in\Dom(T|_{\Dom_0})$ such that $T\xi_n\rightarrow T\xi$. Then
\begin{align*}
\bk{T\xi|\eta}=\lim_{n\rightarrow\infty}\bk{(T|_{\Dom_0})\xi_n|\eta}=\lim_{n\rightarrow\infty}\bk{\xi_n|(T|_{\Dom_0})^*\eta}=\bk{\xi|(T|_{\Dom_0})^*\eta},	
\end{align*}
which shows $\eta\in\Dom(T^*)$.
\end{proof}


We give a useful method for showing the closability:

\begin{pp}
An unbounded operator $T:\mc H_1\rightarrow\mc H_2$  is adjointable/closable if and only if the following is true: for any sequence $\xi_n\in\Dom(T)$ converging to $0$ such that $T\xi_n$ converges, we have $T\xi_n\rightarrow 0$.
\end{pp}


\begin{proof}
If $T$ is closable, let $\xi_n\in\Dom(T)$ converge to $0$ such that $T\xi_n=T^{**}\xi_n$ converges. Then as $T^{**}$ is closed, we have  $T^{**}\xi_n\rightarrow T^{**}\cdot 0=0$.

Conversely, suppose for each $\xi_n\in\Dom(T)$ converging to $0$ such that $T\xi_n$ converges we have $T\xi_n\rightarrow 0$. Then it is clear that for any  two sequences $\xi_n,\xi_n'\in\Dom(T)$ converging to the same vector $\xi\in\mc H$ such that both $T\xi_n$ and $T\xi_n'$ converge, then they converge to the same vector in $\mc H_2$, which we denote by $T_1\xi$. All such $\xi$ form a subspace $\Dom(T_1)$ of $\mc H_1$ which is dense since it contains $\Dom(T)$. We thus have an unbounded operator from $\mc H_1$ to $\mc H_2$ with domain $\Dom(T_1)$ sending each $\xi$ to $T_1$. It is clear that the graph $\scr G(T_1)$ is the closure of  $\scr G(T)$. So $T_1$ is a closed operator containing $T$. So $T$ is closable.  
\end{proof}



If $T$ is contained in  $T_1$, then any subset $\scr G_0$  between $\scr G(T)$ and $\scr G(T_1)$ is the graph of an operator $T_0$ (satisfying $\scr G(T)\subset\scr G(T_0)\subset \scr G(T_1)$). Indeed, we set $\Dom(T_0)$ to be the set of all $\xi$ where $(\xi,\eta)\in\scr G_0$ for some $\eta\in\mc H_2$. Then we necessarily have $\eta=T_1\xi$. Define $T_0$ sending each $\xi\in\Dom(T_0)$ to $T_1\xi$. Then $\scr G_0=\scr G(T_0)$. Thus we can define:

\begin{df}
Assume $T:\mc H_1\rightarrow\mc H_2$ is adjointable/closable. Then the (necessarily closed) operator $\ovl T:\mc H_1\rightarrow\mc H_2$ \index{T@$\ovl T=T^{**}$} whose graph $\scr G(\ovl T)$ is the closure of $\scr G(T)$ in $\mc H_1\oplus \mc H_1$ is called the \textbf{closure} of $T$.
\end{df} 

\begin{proof}
Let $\scr G_0$ be the closure of $\scr G(T)$. Since $T$ is closable, $T\subset T_1$ for a closed operator $T_1$. (E.g. $T_1=T^{**}$.) Then $\scr G(T_1)$ is closed and contain $\scr G(T)$. Therefore $\scr G_0$ is between $\scr G(T)$ and $\scr G(T_1)$. Thus, according to the previous discussion, $\scr G_0$ is the graph of a necessarily closed operator $\ovl T$.
\end{proof}


\begin{rem}
Note that if $\scr D_0$ is a core for a closable $T$, then, as the graph of $T|_{\scr D_0}$ is dense in that of $T$, they have the same closure. So $\ovl{T|_{\scr D_0}}=\ovl T$. 

Also, if $T$ is closable, then $\Dom(T)$ is a core for the closure $\ovl T$, since $\scr G(\ovl T)$ is the closure of $\scr G(\ovl T|_{\Dom(T)})=\scr G(T)$.
\end{rem}


\begin{thm}
Let $T:\mc H_1\rightarrow\mc H_2$ be adjointable/closable. Then
\begin{align*}
\ovl T=T^{**}.	
\end{align*}
\end{thm}

\begin{proof}
Since $\Dom(T)$ is a core for $\ovl T$, by Theorem \ref{lb24} we see that $T^*=(\ovl T)^*$, and hence $T^{**}=(\ovl T)^{**}$. Since $\ovl T$ is closed, by Theorem \ref{lb24}, $(\ovl T)^{**}=\ovl T$. We are done. 
\end{proof}











\section{Strong commutativity of (pre)closed operators, von Neumann algebras}\label{lb67}



Recall our notation that $\End(\mc H)$ is the $*$-algebra of bounded linear operators of $\mc H$. The $*$-structure is defined by the adjoint. We begin with the following easy observation.

\begin{rem}
Suppose $T$ is an unbounded operator from $\mc H_1$ to $\mc H_2$, and $A_1\in\End(\mc H_1),A_2\in\End(\mc H_2)$. Then the following are equivalent.
\begin{itemize}
\item $A_2T\subset TA_1$.
\item $A_1\Dom(T)\subset \Dom(T)$ and $A_2T\xi=TA_1\xi$ for each $\xi\in\Dom(T)$. 
\end{itemize}
\end{rem}

\begin{pp}\label{lb26}
Let $T:\mc H_1\rightarrow\mc H_2$ be closable and $A_1\in\End(\mc H_1),A_2\in\End(\mc H_2)$.
\begin{enumerate}
\item If $A_2T\subset TA_1$, then $A_1^*T^*\subset T^*A_2^*$ and $A_2\ovl T\subset \ovl T A_1$.
\item If $T$ is closed and $\mc H_1=\mc H_2=\mc H$, the set of all $A\in\End(\mc H)$ satisfying $AT\subset TA$ form a strongly closed unital subalgebra of $\End(\mc H)$
\end{enumerate}
\end{pp}



The second statement means that the set of all $A\in\End(\mc H)$ is closed under linear combination, multiplication, and approximation under strong operator topology (i.e., if a net $A_\blt\in \End(\mc H)$ satisfies $A_\blt T\subset TA_\blt$ and converges strongly to $A\in\End(\mc H)$, then $AT\subset TA$). Moreover, the set contains identity.

\begin{proof}
1. We have $(A_2T)^*\supset (TA_1)^*$. By Prop. \ref{lb9}, $A_1^*T^*\subset (TA_1)^*\subset (A_2T)^*=T^*A_2^*$. Take adjoint again. We have $A_2^{**}T^{**}\subset T^{**}A_1^{**}$, i.e., $A_2\ovl{T}\subset\ovl{T}A_1$.

2. By Prop. \ref{lb25}, the set of all $A\in\End(\mc H)$ satisfying $AT\subset TA$ is closed under addition and multiplication. Suppose $A_\blt$ is a net converging strongly to $A\in\End(\mc H)$ such that $A_\blt T\subset TA_\blt$. Choose any $\xi\in\Dom(T)$. Then $A_\blt\xi\in\Dom(T)$ and $A_\blt T\xi=TA_\blt\xi$. Since $A_\blt$ converges strongly, we have $A_\blt\xi\rightarrow A\xi$  and $TA_\blt\xi=A_\blt T\xi\rightarrow AT\xi$. Thus $(A\xi,AT\xi)$ is in the closure of the graph $\scr G(T)$. Thus, as $T$ is closed, we conclude $\xi\in\Dom(A)$ and $TA\xi=AT\xi$.
\end{proof}


\begin{df}\label{lb27}
Let $A\in\End(\mc H)$ and let $T$ be a closable operator on $\mc H$. We say $A$ and $T$ \textbf{commute strongly} if
\begin{align*}
AT\subset TA,\qquad A^*T\subset TA^*.	
\end{align*}
If $A$ and $T$ commute strongly, then so do $A$ and $T^*$, $A^*$ and $T$, $A^*$ and $T^*$ by Prop. \ref{lb26}.
\end{df}

\begin{rem}
Two \textit{bounded operators} $A,B$ commute strongly if and only if they \textbf{commute adjointly}, which means $AB=BA$ and $AB^*=B^*A$.
\end{rem}

In the case that $A$ is unitary, strong and ordinary commutativities are the same:

\begin{pp}\label{lb31}
A unitary operator $U\in\End(\mc H)$ commutes strongly with a closable operator $T$ on $\mc H$ if and only if $UT=TU$ (equivalently, $UTU^*=T$).
\end{pp}

\begin{proof}
If $UT=TU$, then $UTU^*=T$, so $TU^*=U^*T$. This shows $U$ commutes strongly with $T$.

Conversely, suppose $UT\subset TU$ and $U^*T\subset TU^*$. $UT\subset TU$ implies $UTU^*\subset TUU^*=T$. $U^*T\subset TU^*$ implies $U^*TU\subset TU^*U=T$. So  $T=UU^*TUU^*\subset UTU^*$. So $T=UTU^*$.
\end{proof}


We now discuss the meaning of strong commutativity when $A$ is a projection.

\begin{pp}\label{lb71}
Let $T$ be an unbounded operator on $\mc H$. Let $E$ be a projection on $\mc H$. Set $E^\perp=1-E$. Then the following are equivalent.
\begin{enumerate}
\item[(1)] $ET\subset TE$.
\item[(2)] $\Dom(T)=\Dom_1\oplus \Dom_2$ where $\Dom_1\subset E\mc H$ and $\Dom_2\subset E^\perp\mc H$ are linear subspaces satisfying $T\Dom_1\subset E\mc H$ and $T\Dom_2\subset E^\perp\mc H$.
\end{enumerate}
Moreover, if (2) is true, then 
\begin{subequations}\label{eq28}
\begin{gather}
\Dom_1=E\Dom(T)=E\mc H\cap\Dom(T)\qquad \Dom_2=E^\perp\Dom(T)=E^\perp\mc H\cap\Dom(T)\label{eq28a}\\
\Dom(TE)=\Dom_1\oplus E^\perp\mc H\qquad \Dom(TE^\perp)=E\mc H\oplus\Dom_2\label{eq28b}
\end{gather}
\end{subequations}
\end{pp}


\begin{proof}
Assume (1). Then $E\Dom(T)\subset\Dom(T)$. Since we also have $E^\perp T\subset TE^\perp$, we have $E^\perp\Dom(T)\subset\Dom(T)$. This proves $\Dom(T)=E\Dom(T)\oplus E^\perp\Dom(T)$. We have $TE\Dom(T)\subset ET\Dom(T)\subset E\mc H$ and, similarly, $TE^\perp\Dom(T)\subset E^\perp\mc H$. This proves (2).

Assume (2). The decomposition $\Dom(T)=\Dom_1\oplus \Dom_2$ with $\Dom_1\subset E\mc H$ and $\Dom_2\subset E^\perp\mc H$ clearly implies \eqref{eq28a}. It is also easy to check \eqref{eq28b}. Now \eqref{eq28a} shows $E\Dom(T)=\Dom_1\subset\Dom(T)$. For each $\xi\in\Dom(T)$, we have $E\xi\in\Dom_1$, and hence $TE\xi\in T\Dom_1\subset E\mc H$. Similarly $TE^\perp\xi\subset E^\perp\mc H$. Therefore we have $ETE\xi=TE\xi$ and $ETE^\perp\xi=0$. Thus $ET\xi=ETE\xi+ETE^\perp\xi=TE\xi$. This proves (1). 
\end{proof}




\begin{rem}
By Prop. \ref{lb71}, $ET\subset TE$ if and only if there exist a unitary map $U:\mc H\rightarrow\mc K_1\oplus\mc K_2$ (where $\mc K_1,\mc K_2$ are Hilbert spaces) such that:
\begin{itemize}
\item $UE\mc H=\mc K_1$. Hence $UE^\perp\mc H=\mc K_2$.
\item There exists unbounded operators $S_1,S_2$ on $\mc K_1,\mc K_2$ with dense domains such that $UTU^*=\diag (S_1,S_2)$. In particular, $\Dom(T)=U^*\Dom(S_1)\oplus U^*\Dom(S_2)$.
\end{itemize}
It is clear that $T$ is closed (resp. closable) iff both $S_1$ and $S_2$ are so.
\end{rem}








From Prop. \ref{lb26}, we see that the set of all $A\in\End(\mc H)$ commuting strongly with a closed $T$ is a strongly closed unital $*$-subalgebra of $\End(\mc H)$, i.e., a strongly closed unital subalgebra which is closed under taking adjoints. In other words, such $A$ form a von Neumann algebra.

\begin{df}
A strongly closed unital $*$-subalgebra of $\End(\mc H)$ is called a \textbf{von Neumann algebra} on $\mc H$. If $\fk S$ is a set of closed operators, then the set $\fk S'$ of all $A\in\End(\mc H)$ commuting strongly with every operator of $\fk S$ is a von Neumann algebra on $\mc H$. We call $\fk S'$ \index{S@$\fk S',\fk S''$ (commutant and double commutant of $\fk S$)}  the \textbf{commutant} of $\fk S$. The double commutant $\fk S''=(\fk S')'$ is also called the \textbf{von Neumann algebra generated by $\fk S$}. If $\mc M$ is a von Neumann algebra on $\mc H$ and $T$ is a closed operator on $\mc H$, we say that $T$ is \textbf{affiliated with} $\mc M$ if $\{T\}''\subset\mc M$.
\end{df}

\begin{proof}
We have seen, from Prop. \ref{lb26}, that each $\{T\}'$ (where $T\in\fk S$)  is a von Neumann algebra. Then $\fk S'=\bigcap_{T\in\fk S}\{T\}'$ is clearly also a von Neumann algebra.
\end{proof}

\begin{rem}
It is obvious that if $\fk S\subset\fk T$ then $\fk S'\supset\fk T'$ and hence $\fk S''\subset\fk T''$. Also, similar to the reasoning in Prop. \ref{lb10}, we have $\fk S'=\fk S'''$.
\end{rem}



Strong commutativity of two unbounded closed operators $T_1,T_2$ cannot be defined in the same way as in \ref{lb27}. Indeed, our definition of strong commutativity will be equivalent to the following form: If we write $T_1=U_1H_1$ and $T_2=U_2H_2$ then we require each of $U_1$ and $H_1$ commutes strongly with each of $U_2,H_2$. However, we must show that this definition agrees with the one in Definition \ref{lb27}. This requires showing that if $A$ commutes strongly with $T$ (or more generally, if $A$ belongs to a von Neumann algebra), then so does its phase $U_A$ and absolute value $H=\sqrt{A^*A}$. We provide a proof below, which suggests the importance of studying von Neumann algebras. A different proof for the general case of unbounded polar decompositions is given in Theorem \ref{lb30}.


\begin{pp}\label{lb29}
Let $\mc M$ be a von Neumann algebra on $\mc H$.
\begin{enumerate}
\item Suppose $A_1,\dots,A_N\in\mc M$ are normal and strongly commuting, and $f$ is a bounded Borel function on $\Cbb^N$. Then $f(A_1,\dots,A_N)\in\mc M$. 
\item Let $A\in\End(\mc H)$ with left (resp. right) polar decomposition $A=UH$ (resp. $A=KU$). Then $A$ belongs to $\mc M$ if and only if both $U$ and $H$ (resp. both $U$ and $K$)  belong to $\mc M$.
\item Any element in $\mc M$ is a linear combination of four unitary elements in $\mc M$.
\end{enumerate}
\end{pp}

\begin{proof}
1. Obvious when $f$ is a polynomial of $z_1,\ovl z_1,\dots,z_N,\ovl z_N$, and hence true when $f$ is continuous on  $\Sp(T_1,\dots,T_N)$ by Prop. \ref{lb46} and Stone-Weierstrass theorem. The general case follows from Lemma \ref{lb18} and Thm. \ref{lb28}.

2. It is clear that $U,H\in\mc M$ (resp. $K,U\in\mc M$)  implies $A\in\mc M$. Conversely, we assume $A\in\mc M$. Then $A^*\in\mc M$ since $\mc M$ is a $*$-algebra. So $A^*A,AA^*\in\mc M$ and hence, by part 1, $H=\sqrt{A^*A},K=\sqrt{AA^*}$ belong to $\mc M$.

We show that $U\in \mc M$. For each $r>0$, define $f_r\in L^\infty([0,+\infty))$ to be $f(x)=x^{-1}\chi_{(r,+\infty)}$. Then by part 1, we have $f(T)\in\mc M$ and hence $U\chi_{(r,+\infty)}(T)=UTf_r(T)=Af_r(T)\in\mc M$. As $r\rightarrow 0$, $\chi_{(r,+\infty)}$ converges to $\chi_{(0,+\infty)}$ pointwise. So by Thm. \ref{lb28}, we see that $\chi_{(r,+\infty)}(T)$ converges strongly to $\chi_{(0,+\infty)}(T)$, which shows $U\chi_{(0,+\infty)}(H)\in\mc M$. Recall our assumption in polar decomposition that the source space $\sgm(U)$ equals $\ovl{\Rng(H)}$. The spectral theorem for $H$ shows that the projection onto $\ovl{\Rng(H)}$ is $\chi_{(0,+\infty)}(H)$. So $U=U\chi_{(0,+\infty)}(H)$ belongs to $\mc M$.

3. Any $A\in\mc M$ is a linear combination of two self-adjoint elments in $\mc M$, namely $A+A^*$ and $i(A-A^*)$. Any self-adjoint $A\in\mc M$ satisfying $\lVert A\lVert \leq1$ (and hence $\Sp(A)\subset[-1,1]$) is a sum of two unitary elements in $\mc M$: $A=f_+(A)+f_-(A)$, where $f_\pm(x)=x\pm\im\sqrt{1-x^2}$.
\end{proof}


It follows immediately that a bounded operator $A$ commutes strongly with a closed $T$ if and only if the phase of $A$ and $\sqrt{A^*A}$ (or $\sqrt{AA^*}$) commutes strongly with $T$.


\begin{rem}
The above proof indicates why, for the problem of (strong) commutativity, it is not enough to consider $C^*$-algebras, namely, norm-closed $*$-subalgebras of $\End(\mc H)$: The phase $U$ of a bounded operator $A$ cannot in general be approximated in the norm topology by linear combinations of multiplications and powers of $A,A^*$.
\end{rem}


The close relation between strong/weak operator topology and strong/adjoint commutativity is also indicated by the following celebrated theorem of von Neumann. This result has some similarities with Theorem \ref{lb24} for closed operators.

\begin{thm}[\textbf{Bicommutant theorem}]\label{lb59}
Let $\mc M$ be a unital $*$-subalgebra of $\End(\mc H)$. Then the following  are equivalent.
\begin{enumerate}[label=(\alph*)]
\item $\mc M$ is closed under strong operator topology (i.e., is a von Neumann algebra).
\item $\mc M$ is closed under weak operator topology. 
\item $\mc M=\mc M''$.
\item $\mc M=\fk S'$ where $\fk S$ is a set of closed operators on $\mc H$.
\end{enumerate}	



\end{thm}	

\begin{proof}
	We have (c) $\Rightarrow$ (b)  and (b) $\Rightarrow$ (a). The first arrow is due to a routine check that the commutant of any set of \textit{bounded} operators is weakly closed, the second one is obvious.
	
	We also have (c) $\Rightarrow$ (d)  and (d) $\Rightarrow$ (a). The first arrow is obvious, and the second one is by Prop. \ref{lb26}. So it remains to show (a) $\Rightarrow$ (c).
	
	
	
	We assume (a), and  show that for each $\xi_1,\dots,\xi_N\in\mc H$, $A\in\mc M''$, and $\epsilon>0$, there exists $B\in\mc M$ such that $\lVert A\xi_j-B\xi_j\lVert<\epsilon$ for each $1\leq j\leq N$.
	
	We first consider the case $N=1$ and $\xi_1=\xi$. Let $e$ be the projection of $\mc H$ onto the closure of $\mc M\xi=\{x\xi:x\in\mc M\}$. For each $x\in\mc M$, since $x$ leaves $\mc M\xi$ (and hence its closure) invariant, we see $xe=exe$. Similarly, we have $x^*e=ex^*e$, whose adjoint gives $ex=exe$. So $xe=ex$. Similarly $x^*e=ex^*$. This proves $e\in\mc M'$. Choose any $A\in\mc M''$. Then $A$ commutes with $e$, which shows $Ae=Ae^2=eAe$, i.e $A$ leaves $\ovl{\mc M\xi}$ invariant. In particular, $A\xi$ belongs to $\ovl{\mc M\xi}$, which thus could be approximated by some $B\xi$ where $B\in\mc M$.
	
	Now, we consider the general case of $N$ vectors. Let $\mc M$ act on $\bigoplus_1^N\mc H=\mc H\otimes\Cbb^N$ diagonally by $\pi(x)(\xi_1,\dots,\xi_N)=(x\xi_1,\dots,x\xi_N)$. $\pi(\mc M)$ (the set of all $\pi(x)$) is a unital $*$-subalgebra of $\End(\mc H)$. By easy matrix calculation, one verifies that its commutant $\pi(\mc M)'$ equals $\mc M'\otimes\End(\Cbb^N)$, i.e., the set of $N\times N$ matrices whose elements are in $\mc M'$. Its commutant is then $\pi(\mc M'')$, the set of all $y\in\mc M''$ acting diagonally on $\bigoplus_1^N\mc H$. Thus, by the result of the previous paragraph, for each $A\in\mc M''$ and $\epsilon>0$ one can find $B\in\mc M$ such that $\lVert (\pi(A)-\pi(B))\xi\lVert<\epsilon$ where we set $\xi=(\xi_1,\dots,\xi_N)$. This shows $\lVert (A-B)\xi_j\lVert<\epsilon$ for each $j$.
\end{proof}

\begin{rem}
In the above theorem, it can be shown that $\mc M=\mc M''$ if and only if $\mc M$ is closed under \textbf{strong* operator topology}, whose open sets are unions of $\{T\in\End(\mc H):\lVert T\xi_j-T_0\xi_j\lVert<\epsilon, \lVert T^*\xi_j-T_0^*\xi_j\lVert<\epsilon,1\leq j\leq N\}$ (where $T_0\in\End(\mc H),N\in\Nbb,\xi_1,\dots,\xi_N\in\mc H,\epsilon>0$). Thus, $\mc M$ is a von Neumann algebra iff for every net $T_\blt\in\mc M$ such that $T_\blt$ and $T_\blt^*$ converge strongly to $T,T^*$ respectively, we have $T\in\mc M$.
\end{rem}

\begin{proof}
The only if part is obvious. For the if part, assume $\mc M$ is strongly* closed, and choose $A\in\mc M''$. As argued in the proof of Thm. \ref{lb59}, for each $\xi\in\mc H$, $A\xi$ is in the closure of $\mc M\xi$. Then $(A\xi,A^*\xi)\in\mc H\oplus\mc H$ is in the weak closure of $C:=\{(B\xi,B^*\xi):B\in\mc M\}$. Since $C$ is convex, by Hahn-Banach separation theorem, $(A\xi,A^*\xi)$ is in the (strong) closure of $C$. 

As indicated in the proof of Thm. \ref{lb59}, letting $\pi$ be the direct sum representation of $\mc M$ on $\bigoplus_1^N\mc H$, we have $\pi(\mc M)''=\pi(\mc M'')$. Applying the first paragraph to $\pi(\mc M)$ instead of $\mc M$, we see that for any $\xi=(\xi_1,\dots,\xi_N)\in\bigoplus_1^N\mc H$ and $A\in\mc M''$, $(\pi(A)\xi,\pi(A)^*\xi)$ can be approximated by $(\pi(B)\xi,\pi(B)^*\xi)$ where $B\in\mc M$. Thus $A$ is in the strong* closure of $\mc M$, and hence $A\in\mc M$. 
\end{proof}









The following theorem indicates how a set of bounded operators can approximate its double commutant.

\begin{thm}\label{lb60}
Let $\fk G$ be a set of bounded operators on $\mc H$. Let $\mc A$ be the smallest unital $*$-subalgebra of $\End(\mc H)$ containing $\fk G$. Let $\ovl{\mc A}$ be either the strong* or the strong or the weak operator closure of $\mc A$ in $\End(\mc H)$. The following are true.
\begin{enumerate}
\item $\fk G'=\mc A'=\ovl{\mc A}'$.
\item $\ovl{\mc A}=\fk G''$.
\end{enumerate} 
\end{thm}
Note that $\mc A$ is the set of linear combinations of multiplications of elements of $\{1\}\cup\fk G\cup\{x^*:x\in\fk G\}$.

\begin{proof}
That $\fk G\subset\mc A\subset\ovl{\mc A}$ shows $\fk G'\supset\mc A'\supset\ovl{\mc A}'$. It is direct to check that any element commutes strongly/adjointly with $\fk G$ commutes strongly with those in $\mc A$ and moreover those in $\ovl{\mc A}$. (One may also use Prop. \ref{lb26}.)	This proves part 1. Part two follows from the bicommutant theorem.
\end{proof}


As a consequence, we see that any self-adjoint bounded operator $H\in\fk G''$ can be approximated strongly by self-adjoint operators of $\mc A$. (Indeed, we can find a net $A_\blt\in\mc A$ converging strongly* to $H$. So $(A_\blt+A^*_\blt)/2$ converges strongly to $H$.)


Theorem \ref{lb60} provides us with a useful method of showing that a bounded operator $A$ can be approximated strongly or weakly by elements of $\mc A$: instead of explicitly constructing the approximation, one checks that $A$ commutes adjointly with any element in $\fk G'$. Moreover, it suffices to check that $A$ commutes strongly with a small collection $\fk F$ of bounded or closed operators  which generates $\fk G'$, i.e., which satisfies $\fk F''=\fk G'$. Then $A\in \fk F'=\fk F'''=\fk G''=\ovl{\mc A}$. This method has a Hilbert space analog: to show that a subspace $W$ of a Hilbert space $\mc H$ is dense, one shows that any vector in $\mc H$ whose inner product with all elements of $W$ vanishes is $0$. Such algebraic verification is often easier than explicitly constructing approximations.


In the case that we have a set of unbounded closed operators $\fk G$, the study of $\fk G''$ can be reduced to the bounded case via polar decompositions.

\begin{thm}\label{lb30}
Let $\fk G$ be a set of closed operators on $\mc H$. For each $T$, we let $U_T$ be its phase, and let $H_T$ be one of $\sqrt{T^*T}$ and $\sqrt{TT^*}$. Then $\fk G''=\{U_T,(1+H_T)^{-1}:T\in\fk G\}''$.
\end{thm}

\begin{proof}
By Prop. \ref{lb29}, it suffices to show that any unitary operator $V$ commutes strongly with every $T$ iff it commutes strongly with each $U_T$ and $(1+H_T)^{-1}$. Recall Prop. \ref{lb31}. We treat the case  $H_T=\sqrt{T^*T}$ as the other case is similar. $VTV^*=(VU_TV^*)(VH_TV^*)$ is the left polar decomposition of $VTV^*$: indeed, $VH_TV^*$ is clearly positive; we have $\ovl{\Rng(H_T)}=\sgm(U_T)$, so $\ovl{\Rng(VH_TV^*)}=V\ovl{H_T}=V\sgm(U_T)=\sgm(VUV^*)$. By the uniqueness of polar decomposition in Thm. \ref{lb22}, we see that $VTV^*=T$ if and only if $VU_TV^*=U$ and $VH_TV^*=H_T$. Note that $(1+VH_TV^*)^{-1}=V(1+H_T)^{-1}V^*$ since $V$ is unitary. So $VH_TV^*=H_T$ iff $V(1+H_T)^{-1}V^*=(1+H_T)^{-1}$. This finishes the proof.
\end{proof}

It follows immediately that a closed operator $T$ is affiliated with a von Neumann algebra $\mc M$ (i.e., $\{T\}''\subset\mc M$) if and only if its phase and one of $(1+\sqrt{T^*T})^{-1}$ and $(1+\sqrt{TT^*})^{-1}$ are in $\mc M$. 


 


\begin{df}
Let $T,S$ be closable operators on $\mc H$. We say $T$ and $S$ \textbf{commute strongly} if $\{\ovl T\}''$ commutes (adjointly) with $\{\ovl S\}''$, i.e. $\{\ovl T\}''\subset\{\ovl S\}'$. In the case that $S,T$ are closed and at least one of them is bounded, this definition agrees with that in Def. \ref{lb27}.
\end{df}

\begin{proof}
We check that the current definition agrees with the previous one when $S$ is bounded and $T$ is closed. $S$ commutes strongly with $T$ iff $\{S\}\subset\{T\}'$ iff $\{S\}''\subset\{T\}'''$ iff $\{S\}''$ commutes (adjointly) with with $\{T\}''$.
\end{proof}


\begin{co}\label{lb34}
Let $S,T$ be closed operators on $\mc H$ with phases $U_S,U_T$ respectively. Let $H_S$ (resp. $H_T$) be one of $\sqrt{S^*S},\sqrt{SS^*}$ (resp. $\sqrt{T^*T},\sqrt{TT^*}$). Then the following are equivalent.
\begin{enumerate}
\item $S$ and $T$ commute strongly.
\item $U_S$ and $(1+H_S)^{-1}$ commute adjointly with $U_T$ and $(1+H_T)^{-1}$.
\item $U_S$ and $(1+H_S)^{-1}$ commute strongly with $T$.
\end{enumerate}
\end{co}

\begin{proof}
The equivalent of 1 $\Leftrightarrow$ 3 and 2 $\Leftrightarrow$ 3 are immediate from the above definition and Theorem \ref{lb30}.
\end{proof}


\begin{co}\label{lb61}
Let $\fk S,\fk T$ be two sets of closed operators on $\mc H$. Then $\fk S''$ commutes (adjointly) with $\fk T''$ (i.e. $\fk S''\subset\fk T'''=\fk T'$) if and only if every $S\in\fk S$ and $T\in\fk T$ commute strongly.
\end{co}

\begin{proof}
Take left polar decompositions $S=U_SH_S,T=U_TH_T$. Then each $S$ and $T$ commute strongly iff each $U_S,(1+H_S)^{-1}$ commute strongly with $U_T,(1+H_T)^{-1}$, iff $\mbf S$ and $\mbf T$ commute strongly where $\mbf S=\{U_S,(1+H_S)^{-1}:S\in\fk S\}$ and $\mbf T=\{U_T,(1+H_T)^{-1}:T\in\fk T\}$, iff $\mbf S\subset\mbf T'$, iff $\mbf S''\subset\mbf T'''=\mbf T'$. By theorem \ref{lb30}, we have $\mbf S''=\fk S''$ and $\mbf T'=\fk T'$.
\end{proof}









\section{Spectral theorem for strongly commuting normal closed operators}\label{lb66}


\begin{df}\label{lb52}
A closed operator $T$ on $\mc H$ with phase $U$ satisfying the following equivalent conditions is called \textbf{normal}:
\begin{enumerate}
\item $T^*T=TT^*$.
\item $U$ is normal and commutes strongly with $\sqrt{T^*T}$. 
\item $U$ is normal and commutes strongly with $\sqrt{TT^*}$. 
\item $T$ commutes strongly with $T$.
\end{enumerate}
\end{df}

In particular, self-adjoint operators are normal.


\begin{proof}[Proof of equivalence]
By Cor. \ref{lb34}, 4 is equivalent to both 2 and 3. Thus, it suffices to prove the equivalence of 1 and 2. 

Let $H:=\sqrt {T^*T}$ and $K:=\sqrt{TT^*}$. Part 1 is equivalent to $H=K$. Note that by Remark \ref{lb32}, we have $K=UHU^*$ and $H=U^*KU$. Suppose $H=K$. Then $\sgm(U)=\ovl{\Rng(H)}$ equals $\tau(U)=\ovl{\Rng(K)}$, so $U^*U=UU^*$, which shows $U$ is normal. We have $H=UHU^*$ and $H=U^*HU$. The first relation shows $U^*H=U^*UHU^*=HU^*$ since $U^*U$ projects onto $\sgm(U)=\ovl{\Rng(H)}$. (Recall Exercise \ref{lb15}.) Likewise, the second equation shows $UH=UU^*HU=HU$ where $\tau(U)=\sgm(U)=\ovl{\Rng H}$ is used. So $U$ commutes strongly with $H$. 

Conversely, suppose $U$ is normal and commutes strongly with $H$. $UH\subset HU$ implies $UHU^*\subset HUU^*=HU^*U=H$ where the last equality is due to $\sgm(U)=\ovl{\Rng(H)}$. Similarly, $U^*H\subset HU^*$ implies $U^*HU\subset HU^*U=H$ and hence $H=UU^*HUU^*\subset UHU^*$. So $H=UHU^*=K$.
\end{proof}


\begin{eg}\label{lb33}
Let $X$ be a measure space  with a set of measures $\{\mu_n:n\in\fk N\}$.  Let $f:X\rightarrow \Cbb$ be Borel. Let $u:X\rightarrow\Cbb$ be equal to $u(x)=f(x)/|f(x)|$ when $f(x)\neq 0$, and $u(x)=0$ when $f(x)=0$. Then one checks easily that $M_f=M_uM_{|f|}=M_{|f|}M_u$ gives the left and right polar decompositions of $M_f$. Thus $M_f$ is normal.
\end{eg}




Spectral theorem says that any  finitely many strongly commuting normal operators are simultaneously unitarily equivalent to some complex Borel functions acting as multiplication on the Hilbert space given in Example \ref{lb33}.


The meaning that the closed operators $T_1,\dots,T_N$ on a Hilbert space $\mc H$ are normal and commute strongly (with each other) is clear: $T_i$ commutes strongly with $T_j$ for each $1\leq i,j\leq N$.





\begin{thm}[Spectral theorem]\label{lb35}
Let $T_1,\dots,T_N$ be strongly commuting normal closed operators on $\mc H$. Then there exist a set $(\mu_n)_{n\in\fk N}$ of finite Borel measures on $\Cbb^N$, and also a unitary map
	\begin{align*}
		U:\mc H\rightarrow\bigoplus_{n\in\fk N} L^2(\Cbb^N,\mu_n)
	\end{align*}
	satisfying for every $1\leq j\leq N$ that
	\begin{align}
		UT_jU^*=M_{z_j}
	\end{align}
\end{thm}
Here we let $z_j$ be $j$-th standard coordinate of $\Cbb^N$, i.e., the one sending $(\zeta_1,\dots,\zeta_N)$ to $\zeta_j$. 


\begin{proof}
Step 1. Let $T_j=V_jH_j=H_jV_j$ be the polar decomposition of $T_j$, where $H_j\geq0$ and $V_j$ is the phase. Let $R_j=(1+H_j)^{-1}$. By Cor. \ref{lb34}, $V_1,R_1,\dots,V_N,R_N$ are strongly commuting normal bounded operators. By the spectral Thm. \ref{lb8}, after applying a unitary map on $\mc H$, one may assume that $\mc H=\bigoplus_{n\in\fk N} L^2(X,\nu_n)$ where $X=\Cbb^{2N}$, $\nu_n$ is a finite Borel measure on $X$, $V_j=M_{z_{2j-1}}$, and $R_j=M_{z_{2j}}$. 

Let $\pi_k:\Cbb^{2N}\rightarrow\Cbb$ be the projection onto the $k$-th component (where $1\leq k\leq 2N$). Since $V_j$ is a  partial isometry, we must have $\nu_n(\pi_{2j-1}^{-1}(\Cbb\setminus(\mbb S^1\cup\{0\})))=0$ for all $n$. (Otherwise, $V_j^*V_j=M_{|z_{2j-1}|^2}$ will not be a projection.) Since $0\leq R_j\leq 1$ and $R_j$ is injective, we must have $\nu_n(\pi_{2j}^{-1}(\Cbb\setminus(0,1]))=0$. Therefore, we may assume that $X=\big((\mbb S^1\cup\{0\})\times(0,1]\big)^N$.



Let $\Rbb_+=[0,+\infty)$ and
\begin{align*}
Y=(\mbb S^1\cup\{0\})\times\Rbb_+
\end{align*}
Applying Prop. \ref{lb70} to the homeomorphism $Y^N\rightarrow X$ sending $(u_1,t_1,\dots,u_N,t_N)$ to $(u_1,(1+t_1)^{-1},\dots,u_N,(1+t_N)^{-1})$, we see that one may assume that $\mc H=\bigoplus_n L^2(Y^N,\omega_n)$ where $\omega_n$ is a finite Borel measure on $Y^N$ and
\begin{gather*}
V_j=M_{v_j}\qquad R_j=M_{(1+x_j)^{-1}}
\end{gather*}
Here, $v_j,x_j$ denote the $(2j-1)$-th and the $2j$-th standard coordinates of $Y^N$. Hence
\begin{align*}
H_j=M_{x_j}
\end{align*}


Step 2. Since $V_j^*V_j$ is the projection onto $\ovl{\Rng(H_j)}$, each $\nu_n$ is supported on $Z^N$ where
\begin{align*}
Z=(\mbb S^1\times\Rbb_{>0})\cup (\{0\}\times\{0\})
\end{align*}
In fact, if this is not true, then there exist $n,j$ such that $\nu_n(A_j)+\nu_n(B_j)>0$ where
\begin{gather*}
A_j=Y\times\cdots\times Y\times \underbrace{\mbb S^1\times\{0\}}_{j\text{-th component}}\times Y\times\cdots\times Y\\
B_j=Y\times\cdots\times Y\times \underbrace{\{0\}\times\Rbb_{>0}}_{j\text{-th component}}\times Y\times\cdots\times Y
\end{gather*}
We view $\chi_{A_j}$ and $\chi_{B_j}$ as elements of $\mc H$. Then $\chi_{A_j}\in\Rng (V_j^*V_j)$ and $\chi_{A_j}\perp \Rng(H_j)$. So we must have $\chi_{A_j}=0$ and hence $\nu_n(A_j)=0$. Similarly, we have $\chi_{B_j}\in\ovl{\Rng(H_j)}$ and $V_j\chi_{B_j}=0$ (and hence $\chi_{B_j}\perp \Rng(V_j^*V_j)$). So $\chi_{B_j}=0$, and hence $\nu_n(B_j)=0$. This gives a contradiction.

Now, we can assume that $\mc H=\bigoplus_n L^2(Z^N,\omega_n)$ and $V_j=M_{v_j},H_j=M_{x_j}$. Applying Prop. \ref{lb70} to the Borel isomorphism $\Phi^N:Z^N\rightarrow\Cbb^N$ where $\Phi:Z\rightarrow\Cbb$ is the Borel isomorphism sending $(u_j,t_j)$ to  $u_jt_j$, we see that there is a unitary map $U:\mc H\rightarrow\bigoplus_n L^2(\Cbb^N,\mu_n)$ (where $\mu_n$ is a finite Borel measure on $\Cbb^N$) such that $U^{-1}M_{z_j}U$ equals $M_{v_jx_j}$. One checks easily that $M_{v_jx_j}$ equals $M_{v_j}M_{x_j}$. (In particular, their domains are the same, being the $L^2$-functions whose multiplication by $x_j$  are $L^2$ (equivalently, whose multiplication by $v_jx_j$ are $L^2$).) Therefore $M_{v_jx_j}=V_jH_j=T$.
\end{proof}







\section{Approximating unbounded closed operators by bounded ones}\label{lb68}



We begin with the following observation. Note the easy fact that any (densely defined) continuous closed  operator from $\mc H_1$ to $\mc H_2$ must be bounded, i.e., have domain $\mc H_1$.

\begin{pp}\label{lb42}
Let $T:\mc H_1\rightarrow\mc H_2$ be a closed operator, and let $A$ be a bounded operator on $\mc H_1$. Assume $TA$ has dense domain. 
\begin{enumerate}
\item $TA$ is closed.
\item If the linear map $TA:\Dom(TA)\rightarrow\mc H_2$ is continuous, then $TA$ is an (everywhere defined and) bounded operator from $\mc H_1$ to $\mc H_2$. In particular, $A\mc H_1\subset\Dom(T)$.
\end{enumerate}
\end{pp}



\begin{proof}
If $\xi_n\in\Dom(TA)$ converges to $\xi$ and $TA\xi_n$ converges, then $A\xi_n\in\Dom(T)$ converges to $A\xi$. Since $T$ is closed, we conclude that $A\xi\in\Dom(T)$ and $TA\xi$ is the limit of $TA\xi_n$. This proves that $TA$ is closed. Alternatively, the fact that $(A^*T^*)^*=TA$ (cf. Prop. \ref{lb9}) shows that $(A^*T^*)^*$ is densely defined and hence closed; therefore $TA$ is closed.

Now assume $TA$ is continuous. Since any closed continuous operator is (everywhere defined and) bounded, $TA$ is in particular so.
\end{proof}

\begin{df}\label{lb39}
Let $T$ be a closable operator from $\mc H_1$ to $\mc H_2$. A net $E_\blt=(E_\alpha)_{\alpha\in\fk A}$ of projections on $\mc H_1$ is called a net of \textbf{right bounding projections} for $T$ if the following hold:
\begin{itemize}
\item $E_\blt$ is increasing. Namely, if $\alpha\leq\beta$, then $\Rng(E_\alpha)\subset \Rng(E_\beta)$ (equivalently, $E_\alpha=E_\alpha E_\beta$). 
\item $E_\blt$ converges strongly to $\idt_{\mc H_1}$. Equivalently, $\ovl{\bigcup \Rng(E_\blt)}=\mc H_1$.
\item For each $\alpha\in\fk A$ there exists a bounded operator $F_\alpha$ on $\mc H_2$ such that
\begin{gather*}
F_\alpha T\subset TE_\alpha,\\
\lim F_\blt \text{ converges strongly to some }F\in\End(\mc H_2).	
\end{gather*}
In particular, $TE_\alpha$ has dense domain (containing $\Dom(T)$).
\item Each $TE_\alpha$ is continuous, equivalently, $T|_{\Rng(E_\alpha)}$ is continuous.
\end{itemize}
If we can choose $F_\blt=E_\blt$,  we say $E_\blt$ is a net of \textbf{(two-sided) bounding projections} for $T$. When $T$ is closed, a net of \textbf{left bounding projections} for $T$ is by definition a net of right bounding projections for $T^*$.
\end{df}

\begin{rem}
By Prop. \ref{lb26}, if $E_\blt$ is a net of right (resp. two-sided) bounding projections for a closable $T$, then it is so for $\ovl T$. Then (by Prop. \ref{lb42}) each $\ovl TE_\alpha$ is (everywhere defined and) bounded.

Also by Prop. \ref{lb26}, a net of bounding projections for $T$ is also a net of bounding projection for $T^*$.  \hfill\qedsymbol
\end{rem}



\begin{eg}\label{lb37}
Let $T=VH=KV$ be the left and right polar decomposition for a closed operator $T:\mc H_1\rightarrow\mc H_2$. Let $\mc H_1$ be unitarily equivalent via a unitary operator $U$ to $\bigoplus_{n\in\fk N}L^2([0,+\infty),\mu_n)$ where each $\mu_n$ is a positive finite  Borel measure, such that $UHU^*=M_x$ where $x$ is the standard coordinate function of $[0,+\infty)$.  Then $M_{\chi_{[0,r]}}$ increases and converges to $\idt$ as $r\nearrow+\infty$. It is clear that $M_{\chi_{[0,r]}}$ is a net of bounding projections for $M_x$.  

Let $E_r=U^*M_{\chi_{[0,r]}}U$. Then $E_r$ is a net of bounding projections for $H$, and hence a net of right bounding projections for $T$. $F_r:=VE_rV^*$ is a net of bounding projections for $K=VHV^*$, and hence (noting $T^*=V^*K$) a net of left bounding projections for $T$. We have $F_rT\subset TE_r$. We say $E_\blt,F_\blt$ are respectively \textbf{right} and \textbf{left bounding projections for $T$ via polar decompositions}.  

We note that each $E_r$ is in the von Neumann algebra generated by $(1+H)^{-1}$ (and is hence in $\{T\}''$), and similarly $F_r$ is in the von Neumann algebra generated by $(1+K)^{-1}$ (and is hence in $\{T\}''$). (This fact will be generalized later, cf. Thm. \ref{lb50}.)
\end{eg}


\begin{proof}
The statement about bounding projections is easy to check. Note that $F_rT\subset TE_r$ is from $E_rH\subset HE_r$.
	
We explain why each $E_r$ is in $\{(1+H)^{-1}\}''$; equivalently, we show $M_{\chi_{[0,r]}}\in\{M_h\}''$ where $h=(1+x)^{-1}$. (Note that $(1+M_x)^{-1}=M_h$.) Clearly $M_{f\circ h}$ belongs to $\{M_h\}''$ if $f$ is a polynomial (since $M_{f\circ h}=f(M_h)$). Note that $h$ takes values in $[0,1]$. Then, by Stone-Weierstrass theorem,  $M_{f\circ h}\in\{M_h\}''$ whenever $f\in C([0,1])$. Now choose a sequence $f_n\in C([0,1])$ with $\lVert f_n\lVert_\infty\leq1$ and converging pointwise to $\chi_{[1/(1+r),1]}$. Then $f_n\circ h$ is uniformly (with respect to $n$ and $[0,+\infty)$) bounded and converging pointwise  to $\chi_{[1/(1+r),1]}\circ h=\chi_{[0,r]}$. The dominated convergence theorem shows that $M_{f_n\circ h}$ (as a sequence of multiplication operators) converges strongly to $M_{\chi_{[0,r]}}$. This proves $M_{\chi_{[0,r]}}\in\{M_h\}''$.
\end{proof}








The reason we are interested in left and right bounding projections is due to the following property.

\begin{thm}\label{lb44}
Let $E_\blt=(E_\alpha)_{\alpha\in\fk A}$ be a net of right bounding projections for a closable unbounded operator $T:\mc H_1\rightarrow\mc H_2$. Then the dense subspace
\begin{align*}
\Dom_0:=\bigcup_{\alpha\in\fk A}E_\alpha\big(\Dom(T)\big)
\end{align*}
is a subspace of $\Dom(T)$ and is a core for $T$. 
\end{thm}

In particular, $\Dom_0$ is dense in $\mc H_1$.


\begin{proof}
Let $F_\blt$ converge strongly to $F\in\End(\mc H_2)$. That $F_\alpha T\subset TE_\alpha$ shows that $E_\alpha\Dom(T)\subset\Dom(T)$. This proves $\Dom_0\subset\Dom(T)$. Suppose $\xi\in\Dom(T)$. Then $E_\blt\xi$ belongs to $\Dom_0$ and converges to $\xi$ (since $E_\blt\rightarrow 1$). Moreover, $TE_\blt\xi=F_\blt T\xi$ converges  to $FT\xi$. Therefore $(\xi,FT\xi)$ belongs to the closure of the graph of $T$ (i.e., belongs to $\scr G(\ovl T)$). So $FT\xi=\ovl T\xi=T\xi$. Hence $(\xi,T\xi)\in\scr G(T)$ can be approximated by $(E_\blt\xi,TE_\blt\xi)$. So $\Dom_0$ is a core for $T$.
\end{proof}

The above proof shows:

\begin{lm}\label{lb40}
Assume $T:\mc H_1\rightarrow\mc H_2$ is closable. Let $F\in\End(\mc H_2)$ be the strong operator limit of $F_\blt$ in Def. \ref{lb39}. Then
\begin{align}
FT=T.	
\end{align}
\end{lm}


Thus, to determine a closable $T$, it suffices to restrict to each $\Rng(E_\alpha)$ on which $T$ is continuous (and hence (everywhere defined and) bounded when $T$ is closed).


We give another approximation theorem, which is more useful for the strong commutativity problem.

\begin{thm}\label{lb41}
Let $E_\blt=(E_\alpha)_{\alpha\in\fk A}$ be a net of right bounding projections for a closed operator $T$ on $\mc H$. Then $\{T\}''\subset \{TE_\alpha:\alpha\in\fk A\}''$. If moreover each $E_\alpha$ is in $\{T\}''$ (e.g. the case in Example \ref{lb37}), then $\{T\}''=\{TE_\alpha:\alpha\in\fk A\}''$.
\end{thm}

As an application, we get an equivalent condition for the strong commutativity of closed operators $T$ and $S$: that the bounded operator $TE_r$ commutes strongly with $S$, where $E_r$ is as in Example \ref{lb37}.


\begin{proof}
Choose any $A\in\{TE_\blt\}'$. Then $ATE_\alpha=TE_\alpha A$ as (everywhere defined) bounded operators (since $A$ and $TE_\alpha$ are both bounded, notice Prop. \ref{lb42}).  Choose any $\xi\in\Dom(T)$. Then $E_\alpha A\xi$ converges to $A\xi$. Also $TE_\alpha A\xi=ATE_\alpha\xi=AF_\alpha T\xi$ converges to $AFT\xi$ since the net $F_\alpha$ converges strongly to $F$. By the closedness of $T$, we have $A\xi\in\Dom(T)$ and $TA\xi=AFT\xi$. By Lemma \ref{lb40}, $FT\xi=T\xi$. So $AT\subset TA$. Similarly, $A^*T\subset TA^*$.
	
	
Now assume each $E_\alpha\in\{T\}''$. We shall show that each $TE_\alpha$ is in $\{T\}''$,  equivalently, that each $TE_\alpha$ commutes adjointly with $\{T\}'$. Choose any $A\in\{T\}'$ (i.e. $A$ commutes strongly with $T$). Note that $E_\alpha\in\{T\}''$ implies $A$ commutes adjointly with $E_\alpha$. Then $AT\subset TA$, so $ATE_\alpha\subset TAE_\alpha=TE_\alpha A$. Similarly, $A^*T\subset TA^*$ implies $A^*TE_\alpha\subset TE_\alpha A^*$. So $A$ commutes adjointly with $TE_\alpha$.
\end{proof}


The following theorem gives an application of Thm. \ref{lb41}. It is not used elsewhere in this note.



\begin{thm}\label{lb38}
Let $S,T$ be strongly commuting closed operators on $\mc H$. Assume $\xi\in\Dom(TS)\cap\Dom(T)$. Then $\xi\in\Dom(ST)$ and $ST\xi=TS\xi$.
\end{thm}


\begin{proof}
Let $E_r,F_r$ be  nets of right resp. left bounding projections of $T$ as in Example \ref{lb37}, which satisfies $TE_r\in\{T\}''$ also by Thm. \ref{lb41}. Then these three commute adjointly with $\{S\}''$, equivalently, commute strongly with $S$. So  $TE_rS\subset STE_r$. In particular, $TE_r\Dom(S)\subset\Dom(S)$. 

Choose $\xi\in\Dom(TS)\cap\Dom(T)$. Then $TE_r\xi\in\Dom(S)$, and $STE_r\xi=TE_rS\xi=F_rTS\xi$. As $r\rightarrow+\infty$, we have $TE_r\xi=F_rT\xi\rightarrow T\xi$ (since $\xi\in\Dom(T)$) and $STE_r\xi=F_rTS\xi\rightarrow TS\xi$ (since $\xi\in\Dom(TS)$). We see $(TE_r\xi,STE_r\xi)$ approaches $(T\xi,TS\xi)$. Since $S$ is closed, $(T\xi,TS\xi)$ must be on the graph of $S$. So $T\xi\in\Dom(S)$ and $ST\xi=TS\xi$.
\end{proof}


The above theorem does not imply $ST=TS$ when $S,T$ commute strongly, since we don't know whether $\Dom(ST)$ equals $\Dom(TS)$ or not.







In the case that we have bounding projections for several strongly commuting normal closed operators $T_1,\dots,T_N$ on $\mc H$, we have an approximation for polynomials of these operators and adjoints. 

Let us for now assume $T_1,\dots,T_N$ are closed, but not necessarily normal or strongly commuting. To begin with, a polynomial $p(T_1,T_1^*,\dots,T_N,T_N^*)$ of $T_1,T_1^*,\dots,T_N,T_N^*$ is by definition a finite linear combination of multiplications and powers of  $T_1,T_1^*,\dots,T_N,T_N^*$, e.g.
\begin{align*}
\sqrt 2 T_1^2(T_1^*)^5T_3^6T_1^3-(1+\sqrt 2\im)(T_4^*)^7T_1^3(T_4^*)^2T_4.
\end{align*}
We also define its adjoint polynomial $p^*(T_1,T_1^*,\dots,T_N,T_N^*)$ in an obvious way, by sending each complex number to its conjugate, the order of operators is reversed, and $T_j$ and $T_j^*$ are exchanged. For instance, the adjoint polynomial of the above expression is 
\begin{align*}
\sqrt 2 (T_1^*)^3(T_3^*)^6T_1^5(T_1^*)^2-(1-\sqrt 2\im)T_4^*T_4^2(T_1^*)^3T_4^7.
\end{align*}
By Prop. \ref{lb9}, if $p$ is densely defined, then
\begin{align}
p^*(T_1,T_1^*,\dots,T_N,T_N^*)\subset p(T_1,T_1^*,\dots,T_N,T_N^*)^*.	\label{eq14}
\end{align}
In particular, if both $p(\cdots)$ and $p^*(\cdots)$ are densely defined, then $p(\cdots)$ is closable since the domain of its adjoint contains a dense subspace, which is the domain of $p^*(\cdots)$.


Note that even in the case that $T_1,\dots,T_N$ are normal and commute strongly, it is not a priori true that each $T_i$ and $T_j$ (or $T_j^*$) commute, due to the domain issue mentioned above.



\begin{pp}\label{lb43}
Let $T_1,\dots,T_N$ be closed operators on $\mc H$. 
\begin{enumerate}
\item  If $T_1,\dots,T_N$ are normal and strongly commuting, then there is a sequence $E_n$ of (two-sided) bounding projections for $T_1,\dots,T_N$ (and hence for $T_1^*,\dots,T_N^*$) in $\{T_1,\dots,T_N\}''$.
\item Suppose there is a net $E_\blt$ of (two-sided) bounding projections for $T_1,\dots,T_N$. Let $p(T_1,T_1^*,\dots,T_N,T_N^*)$ be a polynomial of $T_1,T_1^*,\dots T_N,T_N^*$. Then $p(T_1,T_1^*,\dots,T_N,T_N^*)$ is densely defined and closable, and $E_\blt$  is also a net of bounding projections for $p(T_1,T_1^*,\dots,T_N,T_N^*)$ (and hence for its closure).
\end{enumerate}
\end{pp}	


\begin{proof}
1. We assume the setting of Thm. \ref{lb35}. Let $\mc D_r$ be the open disc in $\Cbb$ with center $0$ and radius $r$. We let $E_n=U^*M_{\chi_{\mc D_n\times\cdots\times \mc D_n}}U$. Then one checks easily that $(E_n)_{n\in\Nbb}$ is a sequence of bounding projections for $T_1,\dots,T_N$.
	
2. Since $E_\alpha T_j\subset T_jE_\alpha$ and $T_jE_\alpha$ is continuous (and hence bounded by Prop. \ref{lb42}), by \eqref{eq28b} of Prop. \ref{lb71}, we have $E_\alpha\mc H=E\Dom(T_j)$ where the latter is a $T_j$-invariant subspace of $\Dom(T_j)$. Similarly, $E_\alpha\mc H$ is a $T_j^*$-invariant subspace of $\Dom(T_j^*)$. Therefore, $E_\alpha\mc H$ is a $p(T_1,T_1^*,\dots,T_N,T_N^*)$-invariant subspace of the domain of  $p(T_1,T_1^*,\dots,T_N,T_N^*)$. Thus $p(T_1,T_1^*,\dots,T_N,T_N^*)$ has domain containing $\Dom_0=\bigcup_{\alpha\in\fk A}E_\alpha\mc H$. Similarly, $p^*(\cdots)$ has dense domain. Thus, by \eqref{eq14}, $p(T_1,T_1^*,\dots,T_N,T_N^*)$ is closable since its adjoint has dense domain. Using Prop. \ref{lb25}, one checks easily that $E_\alpha p(\cdots)\subset p(\cdots)E_\alpha$. Clearly $p(\cdots)$ is bounded when restricted to $E_\alpha\mc H$ for each $\alpha$. This proves that $E_\blt$ is a net of bounding projection of $p(\cdots)$.
\end{proof}


\section{Unbounded Borel functional calculus}


In this section, we let $\scr B(X)$ \index{BX@$\scr B(X),B(X)$} be the unital $*$-algebra of complex-valued (non-necessarily bounded) Borel functions on a topological space $X$. The algebra structure is given in an obvious way, and the $*$-structure is given by $f^*(x)\equiv\ovl f(x)=\ovl{f(x)}$. We let $B(X)$ be the unital $*$-subalgebra of bounded Borel functions.




We fix strongly commuting normal closed operators $T_1,\dots,T_N$ on $\mc H$. In the following statement of the theorem, to avoid confusion of notations, we write the closure of a closable operator $A$ as $A^{**}$. Let $z_j$ denote the function sending $(\zeta_1,\dots,\zeta_N)$ to $\zeta_j$.


\begin{thm}[Unbounded Borel functional calculus]\label{lb47}
There is a unique map $\pi$ from $\scr B(\Cbb^N)$ to the set of closed normal operators on $\mc H$ satisfying the following conditions for each $f,g\in\scr B(\Cbb^N),a,b\in\Cbb$.
\begin{enumerate}
\item $\pi(f)$ commutes strongly with $\pi(g)$.
\item $\pi(z_j)=T_j$ for each $1\leq j\leq N$.
\item $\pi(1)=1$, $\pi(af+bg)=\big(a\pi(f)+b\pi(g)\big)^{**}$, $\pi(fg)=\big(\pi(f)\pi(g)\big)^{**}$, $\pi(f^*)=\pi(f)^*$. (Note Prop. \ref{lb43} for the closability.)
\item If $f\in B(\Cbb^N)$, then $\pi(f)$ is a bounded linear operator on $\mc H$.
\item Assume $f\in B(\Cbb^N)$, and $(f_\alpha)_{\alpha\in\fk A}\in B(\Cbb^N)$ is a net such that 
\begin{align}\label{eq32}
\lim \int_X|f-f_\blt|^2d\mu=0
\end{align}
for each finite Borel measure $\mu$ on $\Cbb^N$. Then $\pi(f_\blt)\rightarrow\pi(f)$ strongly. 
\end{enumerate}
Moreover, for any $\pi$ satisfying the above conditions, if we choose spectral decomposition as in Thm. \ref{lb35}, then for each $f\in\scr B(\Cbb^N)$ we have $U\pi(f)U^*=M_f$.
\end{thm}

We write
\begin{align}
f(T_1,\dots,T_N):=\pi(f)	
\end{align}
if we want to stress the dependence on the operators.


\begin{proof}[Proof of existence]
Choose spectral decomposition as in Thm. \ref{lb35}. We define $\pi(f)=U^*M_fU$ for each $f\in\scr B(\Cbb^N)$.	By Example \ref{lb33}, $M_f$ is normal with left  and right polar decomposition $M_f=M_{v_f}M_{|f|}=M_{|f|}M_{v_f}$, where $v_f$ is defined to be $f/|f|$ when $f\neq 0$, and $0$ otherwise. So $\pi(f)$ is normal with left and right polar decompositions $\pi(f)=\pi(v_f)\pi(|f|)=\pi(|f|)\pi(v_f)$. Clearly $\pi(z_j)=T_j$, and $\pi(f)$ is bounded when $f$ is so. For any other $g\in\scr B(\Cbb^N)$, it is clear that $M_{v_g}$ and $(1+M_{|g|})^{-1}=M_{(1+|g|)^{-1}}$ commute strongly with $M_{v_f}$ and $(1+M_{|f|})^{-1}=M_{(1+|f|)^{-1}}$. So $M_f,M_g$ commute strongly by Cor. \ref{lb34}. Hence $\pi(f),\pi(g)$ commute strongly.

Clearly $\pi(1)=1$. For each $n\in\Zbb_+$, let $\Omega_n\subset\Cbb^N$ be the set of all points at which $|f|,|g|,|af+bg|,|fg|\leq n$. As $M_{\chi_{\Omega_n}}$ commute strongly with $M_f,M_g,M_{fg}$ (as proved above), it is clear that $M_{\chi_{\Omega_n}}$ is a sequence of (two-sided) bounding projections for $M_f,M_g,M_{fg}$. So $E_n=U^*M_{\chi_{\Omega_n}}U$ is a sequence of bounding projections for $\pi(f),\pi(g),\pi(fg)$, and also for $\ovl{\pi(f)\pi(g)}$ by Prop. \ref{lb43}. It is clear that $\pi(fg)$ and $\ovl{\pi(f)\pi(g)}$ are equal on each $\Rng(E_n)$ (noting that $U\Rng(E_n)=\Rng(M_{\chi_{\Omega_n}})$ is the set of $(f_\blt)\in \bigoplus L^2(\Cbb^N,\mu_n)$ which are $0$ outside $\Omega_n$). So $\pi(fg)$ and $\ovl{\pi(f)\pi(g)}$ are equal on $\Dom_0:=\bigcup_n\Rng(E_n)$, which by Thm. \ref{lb44} is a core for both operators. So they are the same closed operators. The same method shows also $\pi(af+bg)=\ovl{\pi(af+bg)}$. That $\pi(f)^*=\pi(f^*)$ follows from the fact that both sides have core $\Dom_0$ (since $E_\blt$ is also a bounding sequence for $\pi(f)^*$).

Finally, for bounded Borel functions, the strong convergence of $\pi(f_\blt)\rightarrow\pi(f)$ for a net $f_\blt$ in $B(\Cbb^N)$ converging to $f$ in the $L^2(\Cbb^N,\mu)$ norm (for every finite positive Borel $\mu$) can be proved using exactly the same method as in Thm. \ref{lb28}.
\end{proof}	



\begin{proof}[Proof of uniqueness]
Step 1. If $\Omega$ is a Borel subset of $\Cbb^N$, then $\pi(\chi_\Omega)^*=\pi(\chi_\Omega^*)=\pi(\chi_\Omega)$ and $\pi(\chi_\Omega)^2=\pi(\chi_\Omega^2)=\pi(\chi_\Omega)$ shows $\pi(\chi_\Omega)$ is a projection. If $f\in\scr B(\Cbb^N)$ is bounded on $\Omega$, then $\pi(\chi_{\Omega})\pi(f)\subset \ovl{\pi(\chi_{\Omega})\pi(f)}=\pi(f\chi_\Omega)$. Also, since $\pi(f)\pi(\chi_\Omega)$ has closure $\pi(f\chi_\Omega)$, by Prop. \ref{lb42}, we learn that $\pi(f)\pi(\chi_\Omega)$ is bounded and equals its closure. We conclude $\pi(\chi_\Omega)\pi(f)\subset\pi(f)\pi(\chi_\Omega)$. It then follows that if $\Omega_\blt=(\Omega_\alpha)_{\alpha\in\fk A}$ is an increasing net of Borel subsets of $\Cbb^N$ satisfying that $\bigcup_\alpha \Omega_\alpha=\Cbb^N$, and that on each $\Omega_\alpha$ the function $f$ is bounded, then $\pi(\chi_{\Omega_\blt})$ is a net of (two-sided) bounding projections for $\pi(f)$. 

By Thm. \ref{lb44}, the closed operator $\pi(f)$ is determined by its restriction to each $\Rng(\pi(\chi_{\Omega_\alpha}))$, and hence determined by $\pi(f)\pi(\chi_{\Omega_\alpha})=\pi(f\chi_{\Omega_\alpha})$, where $f\chi_{\Omega_\alpha}\in B(\Cbb^N)$. Since we can always find such $\Omega_\blt$ for $f$ (e.g., $\Omega_n$ is the set of all points at which $|f|<n$),  it suffices to prove the uniqueness of $\pi$ on $B(\Cbb^N)$.\\[-1ex]




Step 2. Choose $f\in\scr B(\Cbb^N)$ with positive values. We claim that $\pi(f)$ is a positive closed operator. We have
\begin{align*}
	\pi(f)=\ovl{\pi(f^{\frac 12})\pi(f^{\frac 12})}\supset \pi(f^{\frac 12})\pi(f^{\frac 12})=\pi(f^{\frac 12})^*\pi(f^{\frac 12})
\end{align*}
since the conjugate of $f^{\frac 12}$ is itself. Let $A=\pi(f^{\frac 12})^*\pi(f^{\frac 12})$, which is positive and hence self-adjoint. $\pi(f)$ is also self-adjoint since $f^*=f$. So $\pi(f)\supset A$ implies $\pi(f)^*\subset A^*$, and hence $\pi(f)\subset A$. So $\pi(f)$ equals $A$, which is therefore positive.\\[-1ex]

Step 3. Choose $f\in\scr B(\Cbb^N)$, and let $\Omega\subset\Cbb^N$ be the subset of all points at which $f\neq 0$. We claim $\ovl{\Rng(\pi(f))}=\Rng(\pi(\chi_\Omega))$. (Recall that $\pi(\chi_\Omega)$ is a projection.) Note that $f=f\chi_\Omega$. So $\ovl {\pi(\chi_\Omega)\pi(f)}= \pi(\chi_\Omega f)=\pi(f)$, which shows $\Rng(\pi(f))\subset\Rng(\pi(\chi_\Omega))$.

Conversely, for each $n\in\Zbb_+$ we let $\Omega_n\subset\Cbb^N$ be the set of all points at which $1/n<|f|$. Then the $l^\infty$-norms  of $\chi_{\Omega_n}$ are uniformly bounded, and $\chi_{\Omega_n}$ converges to $\chi_\Omega$ in the $L^1(\Cbb^N,\mu)$-norm for any positive finite Borel $\mu$. So $\pi(\chi_n)$ converges strongly to $\pi(\chi)$. Thus, to prove   $\ovl{\Rng(\pi(f))}=\Rng(\pi(\chi_\Omega))$, it suffices to show $\Rng(\pi(\chi_{\Omega_n}))\subset\ovl{\Rng(\pi(f))}$ for each $n$. Define $g_n\in B(\Cbb^N)$ to be $0$ outside $\Omega_n$ and $1/f$ in $\Omega_n$. Then $fg_n=\chi_{\Omega_n}$. So $\pi(\chi_{\Omega})=\ovl{\pi(f)\pi(g_n)}$ proves $\Rng(\pi(\chi_{\Omega_n}))\subset\ovl{\Rng(\pi(f))}$.\\[-1ex]
	
Step 4. We know each $\pi(z_j)$ is uniquely determined. Let $v_j$ be $z_j/|z_j|$ when $z_j\neq 0$ and be $0$ otherwise. We know that $T_j=\pi(z_j)=\ovl{\pi(v_j)\pi(|z_j|)}$. We claim that $\pi(v_j)\pi(|z_j|)$ is a left polar decomposition for $T_j$. Then, by the uniqueness of left polar decompositions, $\pi(v_j)$ and $\pi(|z_j|)$ are uniquely determined by $T_j$. 

From the previous steps, we know $\pi(|z_j|)$ is positive, and $\ovl{\Rng(\pi(|z_j|))}$ equals $\Rng(\chi_{\Omega_j})$, where $\Omega_j$ is the set of all points at which $z_j\neq 0$. Since $v_j^*v_j=v_jv_j^*=\chi_{\Omega_j}$, we see that $\pi(v_j)$ is a partial isometry whose source space and target space are both $\Rng(\chi_{\Omega_j})$, which equals $\ovl{\Rng(\pi(|z_j|))}$. Thus, by Remark \ref{lb45}, $\pi(v_j)\pi(|z_j|)$ is closed (and hence equals $T_j$), and this product is a left polar decomposition, which must be that of $T_j$.\\[-1ex]

Step 5. Let $r_j=(1+|z_j|)^{-1}\in B(X)$. Then by Prop. \ref{lb42},  $\pi(1+|z_j|)\pi(r_j)$ is a closed operator, which must be (everywhere defined and) bounded and equals $1$. So $\pi(1+|z_j|)$ sends each $\pi(r_j)\xi$ to $\xi$, and $\pi(r_j)$ is injective (and has dense range by \eqref{eq19}.) We conclude $\pi(1+|z_j|)\supset A$ where $A$ is the inverse of $\pi(r_j)$ (which is self-adjoint by Example \ref{lb13}), and hence $\pi(1+|z_j|)=\pi(1+|z_j|)^*\subset A^*=A$. This proves $\pi(1+|z_j|)$ equals the $A$, the inverse  of $\pi(r_j)$. So $\pi(r_j)$ is unique since (we have proved) $\pi(1+|z_j|)$ is so.\\[-1ex]



Step 6. Since $\pi$ restricts to a unital $*$-homomorphism $B(\Cbb^N)\rightarrow\End(\mc H)$, it is clear that $\pi(p\circ(v_1,v_1^*,r_1,\dots,v_N,v_N^*,r_N))$ is uniquely determined for any polynomial $p$ of $v_1,v_1^*,r_1,\dots,v_N,v_N^*,r_N$. Let
\begin{align*}
Y=\big(\mbb S^1\times (0,1)\big)\cup \big(\{0\}\times \{1\}\big)
\end{align*}
Then we have a bijective Borel map $\Phi=(v_1,r_1,\dots,v_N,r_N):\Cbb^N\rightarrow Y^N$ whose inverse is
\begin{align*}
\Phi^{-1}(u_1,\rho_1,\dots,u_N,\rho_N)=(u_1(\rho_1^{-1}-1),\dots,(u_N\rho_N^{-1}-1))
\end{align*}
The map $g\in B(Y^N)\rightarrow \pi(g\circ\Phi)\in\End(\mc H)$ satisfies the conditions of the (bounded) Borel functional calculus for $\pi(v_1),\pi(r_1),\dots,\pi(v_N),\pi(r_N)$ in Thm. \ref{lb28}. In particular, if $g\in B(Y)$, and if $(g_n)$ is a net in $B(Y)$ such that $\lim\int_Y |g_\blt-g|^2d\nu=0$ for each finite Borel measure $\nu$ on $Y$, then for each finite Borel measure $\mu$ on $\Cbb^N$ we have
\begin{align*}
\lim \int_{\Cbb^N}|g_\blt\circ\Phi-g\circ\Phi|^2d\mu=\lim \int_{\Cbb^N}|g_\blt-g|^2d\Phi_*\mu=0
\end{align*}
Thus $\pi(g_\blt\circ\Phi)$ converges strongly to $\pi(g)$.

By Step 5, $\pi(v_1),\pi(r_1),\dots,\pi(v_N),\pi(r_N)$ are uniquely determined. Thus, by Thm. \ref{lb28}, $\pi(g\circ\Phi)$ is uniquely determined for each $g\in B(Y^N)$. Now, for each $f\in B(\Cbb^N)$, writing $g=f\circ\Phi^{-1}$, we conclude that $\pi(f)=\pi(g\circ\Phi)$ is uniquely determined.
\end{proof}


\begin{thm}\label{lb50}
For each $f\in\scr B(\Cbb^N)$, $f(T_1,\dots,T_N)$ is affiliated with $\{T_1,\dots,T_N\}''$.
\end{thm}

\begin{proof}
If we can prove that $f(T_1,\dots,T_N)$ commuts strongly with any element $U$ in $\mc M=\{T_1,\dots,T_N\}'$, then $\mc M\subset\{f(T_1,\dots,T_N)\}'$, which proves $\{f(T_1,\dots,T_N)\}''\subset \{T_1,\dots,T_N\}''$. By Prop. \ref{lb29}, it suffices to assume $U$ is unitary and prove (cf. Prop.\ref{lb31}) that $Uf(T_1,\dots,T_N)U^*=f(T_1,\dots,T_N)$. Note that this is true when $f=z_1,\dots,z_N$ since $UT_jU^*=T_j$. Thus, the map $\pi:f\in\scr B(\Cbb^N)\mapsto Uf(T_1,\dots,T_N)U^*$ satisfies all the conditions in Thm. \ref{lb47}. So $\pi$ is the unique functional calculus, which equals $f\mapsto f(T_1,\dots,T_N)$. This finishes the proof.

An alternative proof: By Thm. \ref{lb30}, if we take left polar decomposition of each $T_j=V_jH_j$, then $V_j,(1+H_j)^{-1}\in\mc N:=\{T_1,\dots,T_N\}''$. The proof of uniqueness in Thm. \ref{lb47} shows that any $f(T_1,\dots,T_N)$ (where $f\in B(\Cbb^N)$) can be approximated strongly by polynomials of $V_1,(1+H_1)^{-1},\dots,V_N,(1+H_N)^{-1}$. Hence it is in $\mc N$. In the general case that $g\in\scr B(\Cbb^N)$, one constructs bounding projections and uses Thm. \ref{lb41} to conclude $\{f(T_1,\dots,T_N)\}''\subset\mc N$.
\end{proof}



\begin{comment}
\begin{rem}
In \cite[Thm. 5.6.27]{Kad}, a version of uniqueness of unbounded Borel functional calculus $\pi$ (for a single normal closed operator $T$) was  provided. In that theorem, the condition $\{\pi(f)\}''\subset\{T\}''$ is assumed, which simplifies the proof a bit. In our Thm. \ref{lb47} (restricted to a single normal operator $T$), $\{\pi(f)\}''\subset\{T\}''$ is not an assumption but a consequence (Thm. \ref{lb50}). Thus, our Thm. \ref{lb47} is stronger than \cite[Thm. 5.6.27]{Kad}.
\end{rem}
\end{comment}



We discuss compositions of functional calculus. In the following, we write $T_1,\dots,T_N$ as $T_\blt$ for short.

\begin{thm}\label{lb48}
Let $g_1,\dots,g_L\in \scr B(\Cbb^N)$ and $f\in\scr B(\Cbb^L)$. Then
\begin{align}
f(g_1(T_\blt),\dots,g_L(T_\blt))=(f\circ(g_1,\dots,g_L))(T_\blt).\end{align}
\end{thm}

Note that on the left hand side, the functional calculus of $g_1,\dots,g_L$ is defined using $T_\blt$, and $f$ is defined using $g_1(T_\blt),\dots,g_L(T_\blt)$. On the right hand side, we have the functional calculus of the function $f\circ(g_1,\dots,g_L)$ defined using $T_\blt$.


\begin{proof}
Define a map $\pi:f\in\scr B(\Cbb^L)\mapsto (f\circ(g_1,\dots,g_L))(T_\blt)$. It suffices to check that this is the unique functional calculus for $g_1(T_\blt),\dots,g_N(T_\blt)$. Namely, we shall verify all the conditions in Thm. \ref{lb47} (with $T_j$ replaced by $g_j(T_\blt)$). The only nontrivial condition is the last one about continuity. Choose $f\in B(\Cbb^L)$ and $(f_\alpha)_{\alpha\in\fk A}$ a net satisfying  $\sup_{\alpha\in\fk A}\lVert f_\alpha\lVert_{l^\infty(\Cbb^L)}<+\infty$ and $\int_{\Cbb^L}|f_\alpha-f|d\nu\rightarrow 0$ for each finite (positive) Borel measure $\nu$ on $\Cbb^L$. Now, for any finite positive Borel measure $\mu$ on $\Cbb^N$, we let $\gamma=(g_1,\dots,g_L)$, and let $\nu=\gamma_*\mu$ which is finite positive Borel measure. Then by \eqref{eq16},
\begin{align*}
\int_{\Cbb^N}|f\circ(g_1,\dots,g_L)-f_\alpha\circ (g_1,\dots,g_N)|d\mu=\int_{\Cbb^L}|f-f_\alpha|d\nu
\end{align*}
converges to $0$. So $f_\alpha\circ(g_1,\dots,g_L)(T_\blt)$ converges strongly to $f\circ(g_1,\dots,g_L)(T_\blt)$.
\end{proof}


\begin{co}\label{lb62}
Let  $N,L\in\Zbb_+$, and let $T_1,\dots,T_{N+L}$ be strongly commuting normal closed operators on $\mc H$.  Assume $f\in\scr B(\Cbb^{N+L})$ depend only on the first $N$ variables $z_1,\dots,z_N$, and let $\wtd f\in\scr B(\Cbb^N)$ be the restriction of $f$ to $\Cbb^N\simeq \Cbb^N\times\{0_{\Cbb^L}\}$. Then
\begin{align*}
f(T_1,\dots,T_{N+L})=\wtd f(T_1,\dots,T_N).	
\end{align*}
\end{co}

\begin{proof}
Let $p:\Cbb^{N+L}\rightarrow\Cbb^N$ be the projection on the first $N$ variables. Then $f=\wtd f\circ p$. So by Thm. \ref{lb48}, $f(T_1,\dots,T_{N+L})=\wtd f(p(T_1,\dots,T_{N+L}))=\wtd f(T_1,\dots,T_N)$.
\end{proof}


\begin{rem}
Define $\Sp(T_1,\dots,T_N)$ \index{Sp@$\Sp(T_1,\dots,T_N)$} to be the set of all points in $\Cbb^N$ such that every open set $W$ containing this point satisfies $\chi_W(T_1,\dots,T_N)\neq 0$. This is a closed subset of $\Cbb^N$, called the \textbf{joint spectrum} of $T_1,\dots,T_N$. 

If we choose spectral decomposition as in Thm. \ref{lb35}, then it is clear that $\Sp(T_1,\dots,T_N)$ is the closure of the union of the supports of all $\mu_n$. From this description, we see that $f(T_1,\dots,T_N)$ depends only on the values of $f$ on the joint spectrum. Also, for $f_1,\dots,f_L\in\scr B(\Cbb^N)$,  using Thm. \ref{lb48} (by composing characteristic functions with $(f_1,\dots,f_L)$) one sees that
\begin{align}
\Sp(f_1(T_1,\dots,T_N),\dots,f_L(T_1,\dots,T_L))\subset\ovl{(f_1,\dots,f_L)(\Sp(T_1,\dots,T_N))}.
\end{align}
\end{rem}



\begin{rem}
For strongly commuting normal $T_1,\dots,T_N$, we have
\begin{align}
\Sp(T_1,\dots,T_N)\subset\Sp(T_1)\times\cdots\times\Sp(T_N).	
\end{align}
Indeed, suppose $(\lambda_1,\dots,\lambda_N)\notin \Sp(T_1)\times\cdots\times\Sp(T_N)$. Then one of $\lambda_1,\dots,\lambda_N$ is not in $\Sp(T_j)$, say $\lambda_1\notin\Sp(T_1)$. Choose a neighborhood $W\subset\Cbb$ of $\lambda_1$ such that $\chi_W(T_1)=0$. Then Cor. \ref{lb62} shows that $\chi_{W\times\Cbb^{N-1}}(T_1,\dots,T_N)=\chi_W(T_1)=0$. So $(\lambda_1,\dots,\lambda_N)$, which has $W\times\Cbb^{N-1}$ as a neighborhood, is outside $\Sp(T_1,\dots,T_N)$.
\end{rem}


\begin{exe}
Let $T$ be normal. Use spectral theorem to show that $\Sp(T)\subset[0,+\infty)$ iff $T$ is positive,  that $\Sp(T)\subset\Rbb$ iff $T$ is self-adjoint, and that $\Sp(T)$  is compact iff $T$ is bounded.
\end{exe}



\begin{eg}
To see the power of Theorem \ref{lb48}, we do an example about von Neumann algebras and commutants, which can easily be generalized to other more complicated examples. Let $A,B$ be strongly commuting closed operators on $\mc H$, $A$ is self-adjoint and $B$ is positive. We show that $\{A,B\}''=\{\ovl{A+B^2},A^3\}''$. (Note that by the spectral theorem \ref{lb35}, it is clear that $A^3$ is closed.)
\end{eg}
\begin{proof}[Solution]
Let $C=\ovl{A+B^2}$ and $D=A^3$. That $\{A,B\}''\supset\{C,D\}''$ follows from Thm. \ref{lb50}. Note that $\Sp(A,B)\subset \Sp(A)\times\Sp(B)\subset X:=\mbb R\times[0,+\infty)$. Let $(f_1,f_2)=(z_1+z_2^2,z_1^3)$. Then $(C,D)=(f_1,f_2)(A,B)$. The range of $(f_1,f_2)$ is in $Y:=\{(w_1,w_2)\in\Rbb^2:w_1-\sqrt[3]{w_2}\geq 0\}$. We can define an inverse function $(g_1,g_2):Y\rightarrow X$ by $g(w_1,w_2)=(\sqrt[3]{w_2},\sqrt{w_1-\sqrt[3]{w_2}})$. Then $g\circ f=(z_1,z_2)$. So, by Thm. \ref{lb48}, $(g_1,g_2)(C,D)=(g_1\circ f_1,g_2\circ f_2)(A,B)=(A,B)$. By Thm. \ref{lb50} again, we conclude $\{A,B\}''\subset\{C,D\}''$.
\end{proof}



For each Borel $\Omega\subset\Sp(T_1,\dots,T_N)$, set
\begin{align}
	E(\Omega)=\chi_\Omega(T_1,\dots,T_n)
\end{align}
as in the bounded case. Then following theorem is similar to Thm. \ref{lb49}.

\begin{thm}
Let $X=\Sp(T_1,\dots,T_N)$. For each $f\in\scr B(X)$, a vector $\xi\in\mc H$ belongs to $\Dom(f(T_1,\dots,T_N))$ if and only if
\begin{align*}
\int_X |f|^2\bk{dE\xi|\xi}<+\infty.	
\end{align*}
Moreover, for such $\xi$, we have
\begin{align}
\bk{f(T_1,\dots,T_N)\xi|\xi}=\int_X f\bk{dE\xi|\xi}.
\end{align}
\end{thm}

Due to the above relation, we also write
\begin{align}
\int_Xf dE:=f(T_1,\dots,T_N).	
\end{align}


\begin{proof}
Choose a spectral decomposition as in Thm. \ref{lb35}, and note that all $\mu_n$ have supports in $X=\Sp(T_1,\dots,T_N)$. So we may replace $\Cbb^N$ by $X$. For each $\xi\in\mc H$, if we write $U\xi=(f_n)_{n\in\fk N}\in\bigoplus_n L^2(X,\mu_n)$, it follows easily that
\begin{align}
\bk{dE\xi|\xi}=\sum_n |f_n|^2d\mu_n.
\end{align}
It is now straightforward to verify the claimed properties.
\end{proof}



\section{Self-adjoint operators, Stone's theorem}


We begin this section with a useful criterion on self-adjoint operators.

\begin{thm}
Let $T$ be a closed and symmetric (i.e. $T\subset T^*$) operator on $\mc H$. The following are equivalent.
\begin{enumerate}[label=(\alph*)]
\item $T$ is self-adjoint.
\item The ranges of $T+\im$ and $T-\im$ are both $\mc H$.
\item  The ranges of $T+\im$ and $T-\im$ are both dense in $\mc H$.
\end{enumerate}
\end{thm}


\begin{proof}
(a) $\Rightarrow$ (b): If $T$ is self-adjoint, then $\Sp(T)\subset \Rbb$. By spectral theorem, one can identify $T$ with the multiplication of $x$ on $\bigoplus L^2(\Rbb,\mu_n)$. It is clear that $x\pm\im$ are surjective since $(x\pm\im)^{-1}$ are bounded so that $\xi=(x\pm\im)(x\pm\im)^{-1}\xi$ for each $\xi\in \bigoplus L^2(\Rbb,\mu_n)$.

(b) $\Rightarrow$ (c): Obvious.

(c) $\Rightarrow$ (b): That $\bk{(T+\im)\xi|(T+\im)\eta}=\bk{T\xi|T\eta}+\bk{\xi|\eta}=\bk{\Psi\xi|\Psi\eta}$ (cf. \eqref{eq7}) for all $\xi,\eta\in\Dom(T)$ shows that $\Rng(T+\im)$ is unitarily equivalent to $\Rng(\Psi)=\fk G(T)$ under the unitary map $(T+\im)\xi\mapsto \Psi\xi$. So $\Rng(T+\im)$ is complete since $\fk G(T)$ is so. So $\Rng(T+\im)$ must be $\mc H$. So does $\Rng(T-\im)$ for a similar reason.

(b) $\Rightarrow$ (a): It suffices to show $\Dom(T)=\Dom(T^*)$. By Prop. \ref{lb9}, $(T+\im)^*=T^*-\im\supset T-\im$. Note that $T-\im$ is surjective. Thus, if we can show that $(T+\im)^*$ is injective, then we have $(T+\im)^*=T-\im$ and therefore $\Dom(T^*)=\Dom(T^*-\im)=\Dom((T+\im)^*)=\Dom(T)$.

Choose any $\xi\in\Dom((T+\im)^*)$ such that $(T+\im)^*\xi=0$. Then $\bk{\xi|(T+\im)\eta}=0$ for each $\eta\in\Dom(T)$, namely, $\xi$ is orthogonal to $\Rng(T+\im)=\mc H$. So $\xi$ must be $0$.
\end{proof}


A \textbf{one parameter unitary group} on $\mc H$ is by definition a strongly continuous map $\Rbb\rightarrow\End(\mc H),t\mapsto U_t$ (i.e., continuous with respect to the strong operator topology) satisfying that each $U_t$ is unitary, $U_0=1$, and $U_{s+t}=U_sU_t$ for each $s,t$. It follows that $U_t^*=U_{-t}$ and $U_s$ commutes adjointly with $U_t$.


\begin{thm}
Let $H$ be a self-adjoint closed operator on $\mc H$. Then $t\mapsto e^{\im tH}$ is a one parameter unitary group on $\mc H$. Moreover, any $\xi\in\mc H$ belongs to $\Dom(H)$ if and only if the limit
\begin{align}
\lim_{t\rightarrow 0}\frac{e^{\im tH}-1}{t}\cdot \xi\label{eq17}	
\end{align}
exists in the strong operator topology. In that case, the limit is $\im H\xi$.
\end{thm}


\begin{proof}
We have $\Sp(H)\subset\Rbb$ since $H$ is self-adjoint. Let $E$ be the resolution of the identity for $H$. By properties of functional calculus, it is clear that $U_t:=e^{\im tH}$ are unitary and satisfies $U_0=1$ and $U_{s+t}=U_sU_t$. Since $U_s\xi-U_t\xi=(U_{s-t}-1)U_t\xi$, to check the strong continuity, it suffices to check $U_t\xi-\xi\rightarrow 0$ for each $\xi$ as $t\rightarrow 0$. But
\begin{align*}
\lVert (e^{\im tH}-1)\xi\lVert^2=\bk{(e^{\im tH}-1)^*(e^{\im tH}-1)\xi|\xi}=\int_\Rbb |e^{\im tx}-1|^2\bk{dE\xi|\xi},
\end{align*}
which converges to $0$ by dominated convergence theorem.

We now choose $\xi\in\Dom(H)$ and show that the derivative of $U_t\xi$ at $t=0$ exists strongly and equals $\im H\xi$. We have
\begin{align}
&\Big\lVert \frac{e^{\im tH}-1}{it}\cdot \xi-H\xi  \Big\lVert^2=\int_\Rbb \Big|\frac{e^{\im tx}-1}{it}-x  \Big|^2\bk{dE\xi|\xi}\nonumber\\
=&	\int_\Rbb \Big|\frac{e^{\im tx}-1}{itx}-1  \Big|^2\cdot |x|^2\bk{dE\xi|\xi},\nonumber
\end{align}
Since $\xi\in\Dom(H)$, we have $\int_\Rbb (1+|x|^2)\bk{dE\xi|\xi}<+\infty$. So by Lemma \ref{lb51} and dominated convergence theorem, the above expression converges to $0$ as $t\rightarrow 0$. This proves that \eqref{eq17} converges strongly to $\im H\xi$ whenever $\xi\in\Dom(H)$.

Conversely, assume $\xi\in\mc H$ satisfies that \eqref{eq17} converges strongly to $\psi\in\mc H$. Then using the result from the last paragraph, for any $\eta\in\Dom(H)$, we have
\begin{align}
\bk{\xi|H\eta}=\lim_{t\rightarrow 0}\bk{\xi|(\im t)^{-1}(e^{\im tH}-1)\eta}=\lim_{t\rightarrow 0}\bk{(-\im t)^{-1}(e^{-\im tH}-1)\xi|\eta}=\bk{\psi|\eta}.	\label{eq18}
\end{align}
This shows $\xi\in\Dom(H^*)=\Dom(H)$ and $H\xi=H^*\xi=\psi$. This proves $\xi\in\Dom(H)$.
\end{proof}





\begin{lm}\label{lb51}
For each $h\in\Rbb-\{0\}$ we have
\begin{align*}
\Big|\frac{e^{\im h}-1}{\im h}-1\Big|\leq 3.	
\end{align*}
\end{lm}

\begin{proof}
If $|h|\geq 1$ then the left hand side is $\leq 3$. If $|h|<1$ then
\begin{align*}
\frac{e^{\im h}-1}{\im h}-1=\im h\sum_{n\in\Nbb}\frac{(\im h)^n}{(n+2)!} 	
\end{align*}
whose absolute value is $\leq |h| e^{|h|}<3|h|$.
\end{proof}

To prove the converse of the above Theorem, we first need:

\begin{lm}\label{lb53}
Let $T$ be a closed operator on $\mc H$ affiliated with an abelian von Neumann algebra $\mc M$ (i.e., any two elements of $\mc M$ commute (strongly)). Then $T$ is normal, and in particular $\Dom(T)=\Dom(T^*)$.
\end{lm}

\begin{proof}
We have $\{T\}''\subset\mc M$. Since $\mc M$ commutes strongly with $\mc M$ (as $\mc M$ is abelian),  $\{T\}''$ commutes strongly with $\{T\}''$. So $T$ commutes strongly with $T$. Hence $T$ is normal by Def. \ref{lb52}. We know $\Dom(T)=\Dom(\sqrt{T^*T})=\Dom(\sqrt{TT^*})=\Dom(T^*)$.
\end{proof}




\begin{thm}\label{lb54}
Let $U_t$ be a one parameter unitary group on $\mc H$. Then $U_t=e^{\im tH}$ for some self-adjoint closed operator $H$ on $\mc H$.
\end{thm}

\begin{proof}
We let $\Dom_0$ be the subspace of all $\xi$ such that $\lim_{t\rightarrow 0}(U_t\xi-\xi)/(\im t)$ exists. We first show that $\Dom_0$ is a dense subspace of $\mc H$. Indeed, any $\xi\in\mc H$ can be approximated by
\begin{align*}
\xi(f)=\int_\Rbb f(s)U_s\xi ds	
\end{align*}
where $f\in C_c(\Rbb)$,  $\int_\Rbb fdt=1$. (Consider a sequence $f_n$ where each $f_n$ has support inside $[-1/n,1/n]$. Then $\xi(f_n)\rightarrow\xi$.) Thus, all such $\xi(f)$ span a dense subspace of $\mc H$. We claim $\xi(f)\in\Dom_0$. Indeed,
\begin{align*}
U_t\xi(f)=\int_\Rbb f(s)U_{s+t}\xi ds=\int_\Rbb f(s-t)U_s\xi ds,	
\end{align*}
whose derivative at $t=0$ converges in norm to $-\xi(f')$. This proves the claim, and we see that $\Dom_0$ is dense in $\mc H$.

We define $\Dom(H)=\Dom_0$, and let $H\xi$ be the derivative of $U_t\xi$ at $t=0$ for each $\xi\in\Dom(H)$. We first show that $H$ is self-adjoint. Using the calculation in \eqref{eq18}, it is easy to check that $\bk{\xi|H\eta}=\bk{H\xi|\eta}$ for each $\xi,\eta\in\Dom(H)$. Thus $H$ is symmetric, i.e. $H\subset H^*$. In particular, $H$ is closable. Let $\mc M=\{U_s:s\in\Rbb\}''$, which is abelian since any $U_s,U_t$ commute adjointly. We claim that $H$ is affiliated with $\mc M$, equivalently, that $\mc M'\subset\{H\}'$. By Prop. \ref{lb29}, it suffices to show that $H$ commutes strongly with any unitary $V\in\mc M'$. Indeed, we note that $U_t\xi$ has derivative at $t=0$ iff $(VU_tV^*)\cdot V\xi$ does. So the derivative of $VU_tV^*$ at $t=0$ exists precisely when acting on $V\Dom_0=V\Dom(H)$. When the derivative exists, it must be the action of $VHV^*$. But $VU_tV^*=U_t$ since $V\in\mc M'$. So $H=VHV^*$. This proves $\{H\}''\subset\mc M$. By Lemma \ref{lb53}, we know $\Dom(H)=\Dom(H^*)$. So $H=H^*$.

We now show $U_t=e^{\im tH}$ for each $t$. Note that for each $\xi\in\Dom(H)$, $e^{\im tH}\xi=\xi+\im tH\xi+o(t)$ where $o(t)\in\mc H$ denotes an expression satisfying $\lim_{t\rightarrow 0}o(t)/t\rightarrow 0$. Similarly, $U_t\eta=\eta+i\im tH\eta+o(t)$ for each $\eta\in\Dom(H)$. So
\begin{align*}
&\bk{U_{-t}e^{\im tH}\xi|\eta}=\bk{e^{\im tH}\xi|U_t\eta}=\bk{\xi+\im tH\xi+o(t)|\eta+\im tH\eta+o(t)}\\
=&\bk{\xi|\eta}+\im t(\bk{H\xi|\eta}-\bk{\xi|H\eta})+o(t)=\bk{\xi|\eta}+o(t).	
\end{align*}
Since $H$ commutes strongly with $\mc M$ (as $\mc M$ is abelian and contains $\{H\}''$) and with each $e^{\im sH}$, we have $U_sHU_s^*=H$ and $e^{\im sH}H e^{-\im sH}=H$. So $U_s\Dom(H)=\Dom(H)$ and  $e^{\im sH}\Dom(H)=\Dom(H)$. Using the fact that each $U_s,e^{\im sH}$ commute strongly with $U_t,e^{\im t H}$ since they belong to the abelian von Neumann algebra $\mc M$, we have
\begin{align*}
\bk{U_{-t-s}e^{\im (t+s)H}\xi|\eta}=\bk{U_{-t}e^{\im tH}e^{\im sH}\xi|U_s\eta}=\bk{e^{\im sH}\xi|U_s\eta}+o(t)=\bk{U_{-s}e^{\im sH}\xi|\eta}+o(t).
\end{align*}
Thus, the derivative of $s\mapsto \bk{U_{-s}e^{\im sH}\xi|\eta}$ is zero everywhere, which shows that $U_{-s}e^{\im sH}$ must be constant, which is $1$.
\end{proof}


The following proposition provides a criterion for self-adjoint operators $H,K$ on $\mc H$ to commute strongly: it is equivalent to that $e^{\im tH}$ commutes (adjointly) with $e^{\im sK}$ for each $t,s\in\Rbb$.


\begin{pp}
Let $H$ be a self-adjoint closed operator on $\mc H$. Then $\{H\}''=\{e^{\im tH}:t\in\Rbb\}''$.
\end{pp}

\begin{proof}
Let $U_t=e^{\im tH}$. We have shown in the proof of Thm. \ref{lb54} that $\{H\}''\subset \mc M:=\{U_t:t\in\Rbb\}''$. The relation $\supset$ follows from Thm. \ref{lb50}.
\end{proof}



Let $f$ be a Lebesgue $L^1$ function on $\Rbb$. Its Fourier transform is $\wht f(s)=\int_\Rbb f(t)e^{-\im ts}dt$, which is a bounded continuous function on $\Rbb$. On the other hand, we can define $\int_\Rbb f(t)e^{-\im tH}dt$ to be the bounded operator sending any $\xi\in\mc H$ to the vector whose evaluation with every $\eta\in\mc H$ is
\begin{align*}
\Big\langle \big(\int_\Rbb f(t)e^{-\im tH}dt\big)\xi|\eta  \Big\rangle	=\int_\Rbb\big\langle f(t)e^{-\im tH}\xi|\eta\big\rangle dt.
\end{align*} 
The following proposition relates functional calculus and the one parameter group $e^{\im tH}$.


\begin{pp}
We have
\begin{align*}
\wht f(H)=	\int_\Rbb f(t)e^{-\im tH}dt.
\end{align*}
\end{pp}



\begin{proof}
By spectral theorem, it suffices to assume $\mc H=\bigoplus_{n\in\fk N}L^2(\Rbb,\mu_n)$ (where each $\mu_n$ is Borel) and $H$ is the multiplication of the function $x\in\Rbb\mapsto x$ on each direct sum component. Then for any $\xi=(g_n)_{n\in\fk N},\eta=(h_n)_{n\in\fk N}$ in $\mc H$, 
\begin{align*}
\int_\Rbb\bk{f(t)e^{-\im tH}\xi|\eta}dt=\int_\Rbb\sum_n \int_\Rbb f(t)e^{-\im ts}g_n(s)\ovl{h_n(s)}d\mu_n(s)dt.	
\end{align*}
The above sum and integrals are interchangeable, since the stuff to be integrated and summed are $L^1$. So the above expression becomes
\begin{align*}
\sum_n \int_\Rbb \int_\Rbb f(t)e^{-\im ts}g_n(s)\ovl{h_n(s)}dt d\mu_n(s)=	\sum_n \int_\Rbb  \wht f(s)g_n(s)\ovl{h_n(s)}dt d\mu_n(s),
\end{align*}
which equals $\bk{\wht f(H)\xi|\eta}$.
\end{proof}













\section{Central supports and normal representations of von Neumann algebras}


Recall that if $\scr A$ is a $*$-algebra, a \textbf{(unitary) representation} of $\scr A$ on a Hilbert space is defined to be a $*$-homomorphism $\pi:\scr A\rightarrow\End(\mc H)$, i.e., $\pi$ is a homomorphism satisfying $\pi(x^*)=\pi(x)^*$ for all $x\in\scr A$. If $\scr A$ is unital, a representation $\pi$ is also assumed to be unital, i.e. $\pi(1)=1$.


In this section, normal representations are defined using central supports in the same spirit that von Neumann algebras are defined as the commutant of a set of operators. In the next section, we will show that this definition is equivalent to those using various topologies.


Recall that if $A,B$ are bounded self-adjoint operators, we write $A\leq B$ whenever $B-A$ is a positive operator. If $E,F$ are projections, one checks easily that $E\leq F$ iff $E\mc H\subset F\mc H$.\footnote{Proof of $\Rightarrow$: Choose any $\xi$ orthogonal to $F\mc H$. Then $\bk{E\xi|\xi}\leq\bk{F\xi|\xi}=0$, and hence $\Vert E\xi\Vert^2=\bk{E\xi|\xi}=0$, showing that $\xi\perp E\mc H$.}



\subsection*{Central supports}


\begin{lm}\label{lb72}
Let $\mc M$ be a von Neumann algebra on $\mc H$. Let $(x_\alpha)_{\alpha\in\fk A}$ be a family of elements of $\mc M$. Let $E$ be the projection onto the closure of $\bigvee_\alpha \Rng(x_\alpha)$. Then $E\in\mc M$.
\end{lm}


\begin{proof}
Choose any $y\in\mc M'$. Then $\bigvee_\alpha \Rng(x_\alpha)$ is clearly invariant under $y$. Thus $yE=EyE$. Similarly $y^*E=Ey^*E$, and hence $Ey=EyE$. Thus $yE=Ey$, i.e. $E\in\mc M$.
\end{proof}


\begin{df}
Let $\mc M$ be a von Neumann algebra on $\mc H$. Let $e\in\mc M$ be a projection. The \textbf{central support} of $e$, denoted by $z_{\mc M}(e)$ (or simply $z(e)$), \index{z@$z(e)=z_{\mc M}(e)$, the central support of $e$} is the projection onto 
\begin{align*}
\ovl{\bigvee_{x\in\mc M}\Rng (xe)}
\end{align*}
Then $z(e)$ belongs to the \textbf{center} $Z(\mc M):=\mc M\cap\mc M'$. \index{ZM@$Z(\mc M)$, the center of $\mc M$} For each $\xi\in\mc H$ it is clear that
\begin{align}\label{eq29}
\xi\perp z(e)\mc H\qquad \xi\perp xe\mc H\text{ for all }x\in\mc M
\end{align}
\end{df}

\begin{proof}[Proof that $z(e)$ is central]
By Lem. \ref{lb72}, we have $z(e)\in\mc M$. It is clear that $z(e)\mc H$ in invariant under the action of $\mc M$. Therefore $z(e)\in\mc M'$.
\end{proof}


\begin{pp}\label{lb75}
If $p\in Z(\mc M)$ is a projection, then $p=z(p)$. Consequently, for any projection $p\in \mc M$, we have $z(z(e))=z(e)$. Moreover, $z(e)$ is the smallest central projection $\geq e$.
\end{pp}

In other words, if $q\in Z(\mc M)$ is a projection and $q\geq e$ then $q\geq z(e)$.


\begin{proof}
If $x\in\mc M$ then $\Rng(xp)=\Rng(px)\subset p\mc H$. Thus $z(p)\leq p$, and hence $z(p)=p$. Thus $z(z(e))=z(e)$. Now, if $q\in Z(\mc M)$ is a projection and $q\geq e$, then $q=z(q)\geq z(e)$.
\end{proof}







\begin{df}
Let $e,f\in\mc M$ be projections. We write \pmb{$f\precsim_{\mc M} e$}  (or simply \pmb{$f\precsim e$}) \index{fe@$f\precsim e$} if there is a partial isometry $u\in \mc M$ such that $uu^*=f$ and $u^*u\leq e$.
\end{df}

\begin{thm}\label{lb73}
Let $e,f\in\mc M$ be projections. The following are equivalent.
\begin{enumerate}
\item[(1)] $f\leq z(e)$. Equivalently (by Prop. \ref{lb75}), $z(f)\leq z(e)$.
\item[(2)] $f$ can be written as a (possibly infinite) sum $f=\sum_i f_i$ where each $f_i$ is a projection, and $f_if_j=0$ if $i\neq j$. Moreover, $f_i\precsim e$ for each $i$.
\end{enumerate}
We write \pmb{$f\ll_{\mc M} e$} (or simply \pmb{$f\ll e$}) \index{fe@$f\ll e$} and say that $f$ is \textbf{generated by} $e$ if one of the above conditions hold. We write \pmb{$f\sim e$} if $f\ll e$ and $e\ll f$, equivalently, if $z(f)=z(e)$.
\end{thm}

It follows from (2) that $f\precsim e$ implies $f\ll e$.


\begin{proof}
Clearly (2) implies (1). Assume (1). By Zorn's lemma, there is a maximal set of mutually orthogonal nonzero projections of $\mc M$ (denoted by $\fk P$) satisfying $\sum_{p\in\fk P} p\leq f$ and $p\precsim e$ for each $p\in\fk P$. Let us prove that $\sum_{p\in\fk P} p=f$. Suppose that $q=f-\sum_{p\in\fk P}p$ is a non-zero projection. Then by \eqref{eq29}, there is $x\in\mc M$ such that $q\mc H$ is not orthogonal to $xe\mc H$. Hence $qxe\neq 0$. Therefore, let $u$ be the phase of $qxe$. Then $p':=uu^*$ is a projection in $\mc M$ orthogonal to every $p\in \fk P$ and satisfying $p'\precsim e$ and $p'\leq f$. Thus $\fk P\cup\{p'\}$ is strictly larger than $\fk P$ but satisfies the condition that $\fk P$ satisfies. This contradicts the maximality of $\fk P$.
\end{proof}

\begin{co}
Let $e\in\mc M$ be a projection. Then 
\begin{align*}
z_{\mc M}(e)\mc H=\ovl{\bigvee\Rng(u)}
\end{align*}
where the span is over all partial isometries $u\in\mc M$ satisfying $u^*u\leq e$.
\end{co}

\begin{proof}
If $u\in\mc M$ is a partial isometry satisfying $u^*u\leq e$, then clearly $\Rng(u)\subset z(e)$. This proves ``$\supset$". The direction ``$\subset$" follows by applying Thm. \ref{lb73} to $f:=z(e)$.
\end{proof}




\subsection*{Generating representations}


\begin{df}
A \pmb{$*$}\textbf{-set} is defined to be a set $\fk S$ together with an \textbf{involution}, i.e., bijective map $*:\fk S\rightarrow\fk S$ satisfying $a^{**}=a$ for each $a\in\fk S$. If $\fk S$ is a $*$-set, a \textbf{representation} of $\fk S$ on a Hilbert space $\mc H$ is defined to be a map $\varphi:\fk S\rightarrow\End(\mc H)$ satisfying $\pi(a^*)=\pi(a)^*$ for all $x\in\fk S$.
\end{df}

\begin{df}
Let $(\mc H,\varphi)$ and $(\mc K,\psi)$ be representations of a $*$-set $\fk S$. Then \pmb{$\Hom_{\fk S}(\mc H,\mc K)$} denotes the set of \textbf{homomorphisms} from $\mc H$ to $\mc K$, i.e., bounded linear maps $T:\mc H\rightarrow\mc K$ satisfying $T\varphi(a)=\psi(a)T$ for all $a\in\fk S$. $T$ is called \textbf{unitary equivalence/isomorphism} if $T$ is unitary. A \textbf{subrepresentation} of $\mc H$ is a closed subspace invariant under $\varphi(\fk S)$. 
\end{df}

It is clear that if $T\in\Hom_{\fk S}(\mc H,\mc K)$ then $T^*\in\Hom_{\fk S}(\mc K,\mc H)$.

In the following, unless otherwise stated, $(\mc H,\varphi)$ and $(\mc K,\psi)$ are representations of a $*$-set $\fk S$. 


\begin{rem}
There is a one to one correspondence between the subrepresentations of $(\mc H,\varphi)$ and the projections of $\varphi(\fk S)'$. In fact, if $\mc W$ is a subrepresentation of $\mc H$, then the projection $E$ onto $\mc W$ belongs to $\varphi(\fk S)'$. (Proof: Let $a\in\fk S$. Then $\varphi(a)\mc W\subset\mc W$ implies $\varphi(a)E=E\varphi(a)E$. Similarly, $\varphi(a^*)E=E\varphi(a^*)E$, and hence $E\varphi(a)=E\varphi(a)E$. So $\varphi(a)E=E\varphi(a)$ and similarly $\varphi(a^*)E=E\varphi(a^*)$.) Conversely, if $E\in\varphi(\fk S)'$ is a projection, then $E\mc H$ is a subrepresentation of $(\mc H,\varphi)$.
\end{rem}


\begin{rem}\label{lb74}
Define the \textbf{direct sum representation} $\varphi\oplus\psi$ of $\fk S$ on $\mc H\oplus\mc K$ by $(\varphi\oplus\psi)(a)=\varphi(a)\oplus\psi(a)$. Then it is clear that $\Hom_{\fk S}(\mc H,\mc K)$ is precisely an element $T\in (\varphi\oplus\psi)(\fk S)'$ satisfying $T=TE=FT$ where $E,F$ are the projections of $\mc H\oplus\mc K$ onto $\mc H$ resp. $\mc K$.
\end{rem}


More generally, we can define infinite direct sums:


\begin{df}
Let $(\mc H_i,\varphi_i)_{i\in\fk I}$ be a collection of representations of the $*$-set $\fk S$. Assume that for each $a\in\fk S$ we have
\begin{align*}
\sup_{i\in\fk I}\Vert\varphi_i(a)\Vert<+\infty
\end{align*}
Then for each $a\in\fk S$ we have a bounded linear map
\begin{align*}
\oplus_i\varphi_i(a):\bigoplus_i\mc H_i\rightarrow \bigoplus_i\mc H_i\qquad \oplus_i\xi_i\mapsto \oplus_i\varphi_i(a)\xi_i
\end{align*}
Then $\big(\bigoplus_i\mc H_i,\oplus_i\varphi_i\big)$ is a representation of $\fk S$, called the \textbf{direct sum representation} of $(\mc H_i,\varphi_i)_{i\in\fk I}$.
\end{df}




\begin{df}
We say \pmb{$\mc K\precsim\mc H$} if $\mc K$ is unitarily equivalent to a subrepresentation of $\mc H$. From Rem. \ref{lb74}, it is clear that each of the following is equivalent to $\mc K\precsim\mc H$.
\begin{itemize}
\item There is a partial isometry $U\in\Hom_{\fk S}(\mc H,\mc K)$ such that $UU^*=\idt_{\mc K}$.
\item Let $E,F$ be the projections of $\mc H\oplus\mc K$ onto $\mc H,\mc K$. Then $F\precsim_{(\varphi\oplus\psi)(\fk S)'} E$.
\end{itemize}
\end{df}



\begin{df}\label{lb100}
We say that $\mc K$ is \textbf{generated by} $\mc H$ and write \pmb{$\mc K\ll \mc H$} \index{KH@$\mc K\ll\mc H$} if setting $E,F$ to be the projections of $\mc H\oplus\mc K$ onto $\mc H,\mc K$, and setting $\mc M=(\varphi\oplus\psi)(\fk S)$, the following equivalent conditions hold.
\begin{enumerate}[label=(\arabic*)]
\item $z_{\mc M'}(E)=\idt_{\mc H\oplus\mc K}$.
\item $F\ll_{\mc M'}E$.
\item $\mc K$ is a (possibly infinite) orthogonal direct sum of subrepresentations that are $\precsim \mc H$.
\item $\bigvee_{T\in\Hom_{\fk S}(\mc H,\mc K)} T\mc H$ is dense in $\mc K$.
\end{enumerate}
We say that $\mc K$ is \textbf{quasi-isomorphic} (or \textbf{quasi-equivalent}) to $\mc H$ and write \pmb{$\mc K\sim\mc H$} if $\mc K\ll\mc H$ and $\mc H\ll\mc K$.
\end{df}

\begin{proof}[Proof of equivalence]
(1)$\Leftrightarrow$(2): $F\ll E$ means $F\leq z(E)$. If $F\leq z(E)$ then clearly $1=F+E\leq z(E)$. Hence $1=z(E)$. Conversely, if $1=z(E)$ then $F\leq z(E)$.

(2)$\Leftrightarrow$(3): This is clear from Thm. \ref{lb73}. (2)$\Leftrightarrow$(4): This is obvious.
\end{proof}




\begin{df}
Let $\mc M\curvearrowright\mc H$ and $\mc N\curvearrowright\mc K$ be von Neumann algebras. Let $\pi:\mc M\rightarrow\mc N$ be a unital $*$-homomorphism. We say that $\pi$ is  \textbf{normal} if the $*$-set representation $\pi:\mc M\rightarrow\End(\mc K)$ is generated by the inclusion map $\iota_{\mc M}:\mc M\hookrightarrow\End(\mc H)$, in short
\begin{align*}
(\mc K,\pi)\ll (\mc H,\iota_{\mc M})
\end{align*}
\end{df}

\begin{df}
Let $\mc M\curvearrowright\mc H$ be a von Neumann algebra. Let $\mc K$ be a Hilbert space. A normal unital $*$-homomorphism $\pi:\mc M\rightarrow\End(\mc K)$ is called a \textbf{normal representation} of $\mc M$. In other words, $(\mc K,\pi)$ is an orthgonal direct sum of subrepresentations that are $\precsim$ to the representation $\mc M\curvearrowright\mc H$.
\end{df}



\subsection*{Basic facts about generating representations}

\begin{pp}\label{lb76}
Let $(\mc K_1,\psi_1),(\mc K_2,\psi_2)$ be representations of $\fk S$. Assume that $\mc K_1\ll\mc H$ and $\mc K_2\ll\mc K_1$. Then $\mc K_2\ll\mc H$.
\end{pp}

\begin{proof}
This is clear from Def. \ref{lb100}-(4).
\end{proof}

\begin{pp}\label{lb77}
Assume that $\mc K\precsim\mc H$. Then $\mc K\ll\mc H$. 
\end{pp}

\begin{proof}
Obvious.
\end{proof}

\begin{pp}\label{lb78}
Let $(\mc H_i,\varphi_i)_{i\in\fk I}$ be a collection of representations of the $*$-set $\fk S$ satisfying $\sup_i\Vert\varphi_i(a)\Vert<+\infty$ for every $a\in\fk S$. Assume that $\mc H_1\ll\mc H$ for every $i$. Then $\bigoplus_i\mc H_i\ll\mc H$.
\end{pp}


\begin{proof}
This is clear from (3) or (4) Def. \ref{lb100}.
\end{proof}

\begin{co}\label{lb81}
Let $(\mc H,\varphi)$ and $(\mc K,\psi)$ be representations of a $*$-set $\fk S$. The following are equivalent.
\begin{enumerate}
\item[(1)] $\mc K\ll\mc H$.
\item[(2)] $\mc K$ is unitarily equivalent to an orthogonal direct sum of subrepresentations of $\mc H$.
\item[(3)] $\mc K$ is unitarily equivalent to a subrepresentation of a direct sum of $\mc H$. 
\end{enumerate}
\end{co}


\begin{proof}
(1)$\Leftrightarrow$(2) is tautology. (2)$\Rightarrow$(3): A direct sum of subrepresentations is clearly a subrepresentation of a direct sum.

(3)$\Rightarrow$(1): Assume (3). By Prop. \ref{lb78}, $\bigoplus_i\mc H\ll\mc H$. By Prop. \ref{lb77}, $\mc K\ll\bigoplus_i\mc H$. Thus, by Prop. \ref{lb76}, $\mc K\ll\mc H$.
\end{proof}


\section{Normal representations and the $\sigma$-topologies}


By Cor. \ref{lb81}, the study of representations $\ll\mc H$ reduces to the study of the subrepresentations of $\mc H$ and direct sums of $\mc H$. Let us compute the commutants and double commutants in both cases. %This will help us achieve the goal of giving a more intrinsic description of normal representations of von Neumann algebras. 


\subsection*{Commutants of subrepresentations and direct sums}


Let $(\mc H,\varphi)$ be a representation of a $*$-set $\fk S$.

\begin{thm}\label{lb79}
Let $\mc M=\varphi(\fk S)''$. Assume that $(\mc K,\psi)$ is a subrepresentation of $(\mc H,\varphi)$. Let $E$ be the projection of $\mc H$ onto $\mc K$, which is a projection of $\mc M'=\varphi(\fk S)'$. Then
\begin{align}\label{eq30}
\psi(\fk S)'=E\mc M'E|_{\mc K}\qquad \psi(\fk S)''=\mc M|_{\mc K}
\end{align}
\end{thm}
We abbreviate $E\mc M'E|_{\mc K}$ and $\mc M|_{\mc K}=\mc ME|_{\mc K}$ to $E\mc M'E$ and $\mc ME$. Then \eqref{eq30} reads
\begin{align*}
\psi(\fk S)'=E\mc M'E\qquad \psi(\fk S)''=\mc M E
\end{align*}


\begin{proof}
Since $E\in\varphi(\fk S)'$, and since $\psi$ is the restriction of $\varphi$ to $\mc K$, for each $T\in\varphi(\fk S)'$ and $a\in\fk S$ we clearly have
\begin{align*}
[\psi(a),ETE]\big|_{\mc K}=[\varphi(a),ETE]\big|_{\mc K}=E[\varphi(a),T]E\big|_{\mc K}=0
\end{align*}
Thus $E\varphi(\fk S)' E|_{\mc K}\subset\psi(\fk S)'$. Conversely, if $y\in\psi(\fk S)'$, define $\wtd y:\mc H\rightarrow\mc H$ by $\wtd y\xi=yE\xi$. Since $y$ commutes with $\varphi(a)$ when acting on $\mc K$, we have
\begin{align*}
\varphi(a)\wtd y\xi=\varphi(a)yE\xi=y\varphi(a)E\xi=yE\varphi(a)\xi=\wtd y\varphi(a)\xi
\end{align*}
So $\wtd y\in\varphi(\fk S)'$, and clearly $y=E\wtd y E$. This proves $E\varphi(\fk S)' E|_{\mc K}=\psi(\fk S)'$.

%% Proofread

We now prove the second relation, which by the first relation is equivalent to
\begin{align}
 \big(E\mc M'E|_{\mc K}\big)'=\mc M|_{\mc K}
\end{align}
namely, $(E\mc M'E)'=\mc ME$. Clearly we have ``$\supset$". To prove the other direction, we first consider the case that $z_{\mc M'}(E)=1$. Then $1-E\leq z(E)$.  By Thm. \ref{lb73}, $1-E$ is an orthogonal sum of projections $\precsim E$. Therefore, there exists  a collection of partial isometries $(U_i)_{i\in\fk I}$ in $\mc M'$ such that setting $F_i=U_iU_i^*$, we have $U_i^*U_i\leq E$, $F_iF_j=0$ if $i\neq j$, and $\sum_j F_j=1$. Moreover, there is an element of $I$, say $0$, such that $U_0^*U_0=E$ and $U_0|_{E\mc H}:E\mc H\rightarrow\mc H$ is the inclusion map. Let $U_i^*U_i=E_i$.


Each $\eta\in\mc H$ can be written as the orthogonal sum $\eta=\sum_i U_i\xi_i$ where $\xi_i\in E\mc H$ and $\sum_i\Vert U_i\xi_i\Vert^2$ is finite. (Proof: Let $\xi_i=U_i^*\eta$.) Note
\begin{align*}
\Big\Vert \sum_i U_i\xi_i \Big\Vert^2=\sum_i\Vert U_i\xi_i\Vert^2=\sum_i \Vert E_i\xi_i\Vert^2
\end{align*}
Let $x\in(E\mc M'E|_{\mc K})'$. Then 
\begin{align*}
\Big\Vert \sum_i U_i x\xi_i \Big\Vert^2=\sum_i \Vert E_i x\xi_i\Vert^2=\sum_i \Vert x E_i \xi_i\Vert^2\leq \Vert x\Vert^2\cdot\sum_i \Vert E_i\xi_i\Vert^2
\end{align*}
and hence
\begin{align*}
\Big\Vert \sum_i U_i x\xi_i \Big\Vert^2\leq \Vert x\Vert^2\cdot\Big\Vert \sum_i U_i\xi_i \Big\Vert^2
\end{align*}
Therefore, we have a well-defined bounded linear operator $\wtd x$ on $\mc H$ satisfying
\begin{align*}
\wtd x\sum_i U_i\xi_i=\sum_i U_ix\xi_i
\end{align*}
for any $\eta=\sum_i U_i\xi_i\in\mc H$.

If $\eta\in E\mc H=\mc K$, then a way of writing $\eta$ as $\sum_i U_i\xi_i$ is $\eta=U_0\eta$. It follows immediately that $\wtd x|_{\mc K}=x$. It remains to show $\wtd x\in\mc M$. Choose any $y\in\mc M'$. Then
\begin{align*}
\wtd xy\sum_i U_i\xi_i=\wtd x\sum_j F_jy\sum_i U_i\xi=\wtd x\sum_{i,j}U_j(U_j^*yU_i)\xi_i
\end{align*}
Viewing each $\sum_iU_j^*yU_i\xi_i$ as an element of $\mc K$, the definition of $\wtd x$ shows that the expression above equals $\sum_{i,j}U_jx(U_j^*yU_i)\xi_i$. Since $x\in(E\mc M'E|_{\mc K})'$ and $U_j^*yU_j\in E\mc M'E$, we see that the expression above equals
\begin{align*}
\sum_{i,j}U_jx(U_j^*yU_i)\xi_i=\sum_{i,j}U_j(U_j^*yU_i)x\xi_i=\sum_i yU_ix\xi_i=y\wtd x\sum_i U_i\xi_i
\end{align*}
So $[\wtd x,y]=0$. Thus $ \big(E\mc M'E\big)'\subset\mc ME$ holds when $z(E)=1$.

Now we consider the general case. Let $p=z(E)$. Applying the special case to $p\mc Mp=\mc Mp$ on $p\mc H$ we have
\begin{align*}
(E(\mc Mp)'E)'=\mc MpE=\mc ME
\end{align*}
By the first relation of \eqref{eq30} we have $(\mc Mp)'=p\mc M'p=\mc M'p$. Thus $(E\mc M'E)'=(E\mc M'pE)'=(E(\mc Mp)'E)'=\mc ME$.
\end{proof}


\begin{co}\label{lb82}
Let $\mc M$ be a von Neumann algebra on $\mc H$. Let $E\in\mc M'$ be a projection. Then $\mc ME$ is a von Neumann algebra on $E\mc H$ with commutant
\begin{align*}
(\mc ME)'=E\mc M' E
\end{align*}
\end{co}




Let $I$ be a set. Our next goal is to calculate the commutant and bicommutant of $\bigoplus_{i\in I}\mc H$.

\begin{df}
Let $I,J$ be sets. Let $\fk E\subset\End(\mc H)$. An \textbf{\pmb{$\fk E$}-valued \pmb{$I\times J$} matrix} is a function $T:I\times J\rightarrow \fk E$. Let \pmb{$\fin(2^I)$} \index{fin@$\fin(2^I)$} resp. $\fin(2^J)$ be the set of finite subsets of $I$ resp. $J$. For each $I_0\in\fin(2^I),J_0\in\fin(2^J)$, the restriction $T|_{I_0\times J_0}:I_0\times J_0\rightarrow \fk E$ can be viewed as a bounded linear map
\begin{gather*}
T|_{I_0\times J_0}:\bigoplus_{j\in J}\mc H_j\rightarrow\bigoplus_{i\in I}\mc H_i\qquad \bigoplus_{j\in J}\xi_j\mapsto \bigoplus_{i\in I_0}\Big(\sum_{j\in J_0}T(i,j)\xi_j\Big) 
\end{gather*}
We say that $T$ is \textbf{bounded} if
\begin{align}
\sup_{I_0\in\fin(2^I),J_0\in\fin(2^J)}\Vert T|_{I_0\times J_0}\Vert<+\infty
\end{align}
Then the net limit $\lim_{I_0\in\fin(2^I),J_0\in\fin(2^J)} T|_{I_0\times J_0}$ clearly converges pointwise on the dense subspace of $\bigoplus_j\xi_j$ having finitely many nonzero components. Hence it converges pointwise to a bounded linear map
\begin{align*}
T:\bigoplus_{j\in J}\mc H_j\rightarrow\bigoplus_{i\in I}\mc H_i
\end{align*}
due to the following easy fact:
\end{df}

\begin{exe}
Let $(T_\alpha)_{\alpha\in\fk A}$ be a net in $\End(\mc H,\mc K)$ converging pointwise on a dense subspace of $\mc H$ and satisfying $\sup_\alpha\Vert T_\alpha\Vert<+\infty$. Show that $(T_\alpha)$ converges pointwise on $\mc H$ to a bounded linear map $T:\mc H\rightarrow\mc K$.
\end{exe}



\begin{thm}\label{lb80}
Let $I$ be a set. Let $\mc M=\varphi(\fk S)''$. Let $(\bigoplus_i\mc H,\Phi=\oplus_i\varphi)$ be the direct sum representation. Then $\Phi(\fk S)'$ is the set of bounded $\mc M'$-valued $I\times I$ matrices, and 
\begin{align*}
\Phi(\fk S)''=\{\oplus_i x:x\in\mc M\}
\end{align*}
\end{thm}



\begin{proof}
Clearly every bounded $\mc M'$-valued $I\times I$ matrix commutes with $\Phi(\fk S)$. Conversely, let $S\in\Phi(\fk S)'$. For each $i\in I$, let $U_i$ be the partial isometry $\mc H\rightarrow\bigoplus_i\mc H$ sending $\xi$ to the vector whose $i$-th component is $\xi$ and whose other components are $0$, which belongs to $\Hom_{\fk S}(\mc H,\bigoplus_i\mc H)$. Then for each $i,j\in I$ we have
\begin{align*}
U_i^*SU_j\in\End_\fk S(\mc H)=\varphi(\fk S)'=\mc M'
\end{align*}
Let $T:I\times I\rightarrow\mc M'$ be defined by $T(i,j)=U_iSU_j$. Let $E_i=U_iU_i^*$. For each $I_0\in\fin(2^I)$, let $E_{I_0}=\sum_{i\in I_0}E_i$. Then for each $I_0\in\fin(2^I),J_0\in\fin(2^J)$ we have
\begin{align*}
\Vert T|_{I_0\times J_0}\Vert=\Vert E_{I_0}TE_{J_0}\Vert\leq\Vert S\Vert
\end{align*}
So $T$ is a bounded $\mc M'$-valued $I\times I$ matrix, which clearly represents $S$.

It is clear that any $\oplus_i x$ (where $x\in\mc M$) commutes (adjointly) with bounded $\mc M'$-valued $I\times I$ matrices. Conversely, suppose that $A\in\End(\mc H)$ commutes with any bounded $\mc M'$-valued $I\times I$ matrix. Then it commutes with $\oplus_i y$ for any $y\in\mc M'$. Therefore, by the first paragraph, $A$ is a bounded $\mc M$-valued $I\times I$ matrix. Since this matrix commutes with $U_jU_i^*$ for any $i,j\in I$, one shows easily that this matrix is diagonal, and that all diagonal elements are equal. So $A=\oplus_i x$ for some $x\in\mc M$. 
\end{proof}



\subsection*{Isomorphisms of von Neumann algebras}


\begin{thm}\label{lb85}
Let $\mc M\curvearrowright\mc H$ be a von Neumann algebra. Let $(\mc K,\pi)$ be a normal representation of $\mc M$. Then $\pi(\mc M)$ is a von Neumann algebra on $\mc K$. Moreover, the following are equivalent.
\begin{enumerate}
\item[(1)] $\pi:\mc M\rightarrow\pi(\mc M)$ is bijective.
\item[(2)] $(\mc K,\pi)\sim (\mc H,\iota_{\mc M})$ where $\iota_{\mc M}:\mc M\rightarrow\End(\mc H)$ is the inclusion.
\end{enumerate}
\end{thm}

\begin{proof}
By Thm. \ref{lb81}, $\pi$ is unitarily equivalent to a subrepresentation of $\vartheta$ where $\vartheta$ is an orthogonal direct sum of $\mc M\curvearrowright\mc H$. By Thm. \ref{lb80}, $\vartheta(\mc M)$ is a von Neumann algebra. By Cor. \ref{lb82}, $\pi(\mc M)$ is a von Neumann algebra.

Consider the direct sum representation $(\mc H\oplus\mc K,\Phi:=\iota_{\mc M}\oplus\pi)$ of $\mc M$, which is $\ll\mc H$ (since $\mc K\ll\mc H$). Therefore $\Phi(\mc M)$ is also a von Neumann algebra, and $\Phi:\mc M\rightarrow\Phi(\mc M)$ is clearly injective, and hence is an isomorphism of von Neumann algebras. Thus, $\pi:\mc M\rightarrow\pi(\mc M)$ is injective iff $\varpi=\pi\circ\Phi^{-1}:\Phi(\mc M)\rightarrow\pi(\mc M)$ is injective. 

Let $F$ be the projection of $\mc H\oplus\mc K$ onto $\mc K$. Let $z(F)=z_{\Phi(\mc M)'}(F)$. Then $\varpi:\Phi(\mc M)\rightarrow\pi(\mc M)$ is simply the restriction map $\Phi(\mc M)\rightarrow\Phi(\mc M)F$. This map is the composition of $\Phi(\mc M)\rightarrow\Phi(\mc M)z(F)$ and $\Phi(\mc M)z(F)\rightarrow\Phi(\mc M)F$. Since $z(F)$ is an orthogonal sum of projections that are $\precsim_{\Phi(\mc M)'} F$ (cf. Thm. \ref{lb73}), the map $\Phi(\mc M)z(F)\rightarrow\Phi(\mc M)F$ is injective. Therefore
\begin{align}\label{eq35}
\Ker\big(\Phi(\mc M)\rightarrow \pi(\mc M) \big)=\Phi(\mc M)(1-z(F))
\end{align}
Thus $\Phi(\mc M)\rightarrow \pi(\mc M)$ is injective iff $z(F)=1$, iff $(\mc H,\iota_{\mc M})\ll(\mc K,\pi)$. This proves (1)$\Leftrightarrow$(2).
\end{proof}


\begin{rem}
Eq. \eqref{eq35} can be reformulated as follows. Let $p$ be the projection onto the subspace
\begin{align*}
\{\xi\in\mc H:\xi\perp\Rng(T)\text{ for all }T\in\Hom_{\mc M}(\mc K,\mc H)  \}
\end{align*}
Then $p\in Z(\mc M)$, and $\Ker\big(\mc M\rightarrow\pi(\mc M)\big)=\mc Mp$. 
\end{rem}



\begin{co}\label{lb101}
Let $\mc M\curvearrowright\mc H$ and $\mc N\curvearrowright\mc H$ be von Neumann algebras. Let $\pi:\mc M\rightarrow\mc N$ be a unital $*$-homomorphism. Then the following conditions are equivalent.
\begin{enumerate}[label=(\arabic*)]
\item $\pi$ is bijective and normal, and $\pi^{-1}$ is normal.
\item $\pi$ is bijective and normal.
\item $\pi$ is surjective, and $(\mc H,\iota_{\mc M})\sim(\mc K,\pi)$.
\end{enumerate}
If $\pi$ satisfies the above conditions, we say that $\pi$ is an \textbf{isomorphism of von Neumann algebras}.
\end{co}

\begin{proof}
Clearly (1)$\Rightarrow$(2). By Thm. \ref{lb85}, we have (2)$\Leftrightarrow$(3). 

Assume (2) and (3). Then $(\mc H,\iota_{\mc M})\sim(\mc K,\pi)$ is equivalent to $(\mc H,\pi^{-1})\sim(\mc K,\iota_{\mc N})$ (as representations of the $*$-set $\mc N$). Therefore $\pi^{-1}$ is a normal representation of $\mc N$. This proves (1).
\end{proof}




\subsection*{The $\sigma$-topologies on von Neumann algebras}


We shall give an intrinsic description of normal representations.

%A surprising application of Thm. \ref{lb80} is a close relationship between von Neumann algebras and the $\sigma$-strong topology.


\begin{df}
Let $\mc H,\mc K$ be Hilbert spaces. The \pmb{$\sigma$}\textbf{-strong topology} is the topology on $\Hom(\mc H,\mc K)$ defined by the seminorms of the form
\begin{align*}
T\in\Hom(\mc H,\mc K)\mapsto \sqrt{\sum_{i\in I}\Vert T\xi_i\Vert^2}
\end{align*} 
where $(\xi_i)_{i\in I}$ is a family of vectors of $\mc H$ satisfying $\sum_i\Vert\xi_i\Vert^2<+\infty$. (In particular, only countably many $\xi_i$ are nonzero.) Thus, a net $(T_\alpha)$ in $\Hom(\mc H,\mc K)$ converges $\sigma$-strongly to $T$ iff
\begin{align*}
\lim_\alpha \sum_{i\in I}\Vert T\xi_i-T_\alpha\xi_i\Vert^2=0 
\end{align*}
for each family $(\xi_i)_{i\in I}$ in $\mc H$ satisfying $\sum_i\Vert\xi_i\Vert^2<+\infty$.

Similarly, the \pmb{$\sigma$-}\textbf{strong*} topology is the one defined by the seminorms
\begin{align*}
T\in\Hom(\mc H,\mc K)\mapsto \sqrt{\sum_{i\in I}\Vert T\xi_i\Vert^2+\sum_{i\in I}\Vert T^*\xi_i\Vert^2}
\end{align*} 
So $(T_\alpha)$ converges $\sigma$-strongly*  to $T$ iff $(T_\alpha)$ converges $\sigma$-strongly to $T$ and $(T_\alpha^*)$ converges strongly to $T^*$.

The \pmb{$\sigma$-}\textbf{weak} topology is the one defined by the seminorms
\begin{align*}
T\in\Hom(\mc H,\mc K)\mapsto \sum_{i\in I}\big|\bk{T\xi_i|\eta_i}\big|
\end{align*} 
where $(\xi_i)_{i\in I}$ and $(\eta_i)_{i\in I}$ are collections of vectors of $\mc H,\mc K$ satisfying $\sum_i\Vert\xi_i\Vert^2<+\infty$ and $\sum_i\Vert\eta_i\Vert^2<+\infty$. Thus $(T_\alpha)$ converges $\sigma$-weakly to $T$ iff
\begin{align*}
\lim_\alpha\sum_i \big|\bk{(T-T_\alpha)\xi_i|\eta_i}\big|
\end{align*}
for all such $(\xi_i)$ and $(\eta_i)$.  \hfill\qedsymbol
\end{df}

\begin{rem}
With respect to net convergence, we have
\begin{align*}
\text{$\sigma$-strongly*}\qquad\Longrightarrow\qquad\text{$\sigma$-strongly}\qquad\Longrightarrow\qquad\text{$\sigma$-weakly}
\end{align*}
Indeed, the first implication is obvious. The second one follows from
\begin{align*}
\sum_i |\bk{T\xi_i|\eta_i}|\leq\sqrt{\sum_i\Vert T\xi_i\Vert^2}\cdot\sqrt{\sum_i\Vert\eta_i\Vert^2}
\end{align*}
due to H\"older's inequality.
\end{rem}



\begin{thm}[\textbf{Bicommutant theorem}]\label{lb86}
Let $\fk S\subset\End(\mc H)$. Let $\mc A$ be the unital $*$-subalgebra of $\End(\mc H)$ generated by $\fk S$. Let $\mc T$ be one of the following topologies:
\begin{itemize}
\item[(a)] The $\sigma$-strong* topology.
\item[(b)] The $\sigma$-strong topology.
\item[(c)] The $\sigma$-weak topology.
\end{itemize}
Then $\fk S''$ equals the closure of $\mc A$ under the topology $\mc T$
\end{thm}

Recall that by Thm. \ref{lb60}, one can also choose $\mc T$ to be the strong, the strong*, or the weak topology. However, these three topologies are not the correct ones for the description of normal representations: If $\mc M\curvearrowright\mc H$ is a von Neumann algebra and $I$ is an infinite set, the diagonal representation $(\bigoplus_{i\in I}\mc H,\oplus_i\iota_{\mc M})$ is not continuous under these three topologies.


\begin{proof}
Replacing $\fk S$ with $\fk S\cup\{x^*:x\in\fk S\}$, we assume that $\fk S$ is a $*$-subset of $\End(\mc H)$. Let $\ovl{\mc A}$ be the closure of $\mc A$ under $\mc T$. Then clearly $\ovl{\mc A}\subset\fk S''$. Now choose $x\in\fk S''$. Let us prove that $x\in\ovl{\mc A}$. 




Choose any collection $(\xi_i)$ in $\mc H$ satisfying $\sum_i\Vert\xi_i\Vert^2<+\infty$. Let $\iota_{\mc A}:\mc A\hookrightarrow\End(\mc H)$ be the inclusion map. Let $(\bigoplus_{i\in I}\mc H,\Phi)$ be the direct sum representation of $\fk S$. Then by Thm. \ref{lb80} we have $\oplus_i x\in\Phi(\fk S)''$. Thus, by Thm. \ref{lb60}, $\oplus_i x$ is in the strong* closure of $\Phi(\mc A)$. This shows that $x$ can be strongly* approximated by elements of $\mc A$. Thus $x\in\ovl{\mc A}$, since the $\sigma$-strong* topology is the strongest one.
\end{proof}



\subsection*{Normal representations and the $\sigma$-topologies}


We now relate normal representations to the three types of $\sigma$-topologies. We first need a relation between the normality and the closedness under these topologies.


\begin{thm}[\textbf{Closed graph theorem}]\label{lb87}
Let $\mc M\curvearrowright\mc H$ be a von Neumann algebra. Let $(\mc K,\pi)$ be a representation of $\mc M$, i.e., a unital $*$-homomorphism $\mc M\rightarrow\End(\mc K)$. Then the following are equivalent.
\begin{enumerate}
\item[(1)] $\pi$ is normal.
\item[(2)] The graph $\scr G(\pi)=\{x\oplus\pi(x):x\in\mc M\}$ is a von Neumann algebra on $\mc H\oplus\mc K$.
\end{enumerate}
\end{thm}

Note that $\scr G(\pi)$ is clearly a unital $*$-subalgebra of $\mc H\oplus\mc K$. Therefore, that $\scr G(\pi)$ is a von Neumann algebra means e.g. that it is closed under the correct topology. 


\begin{proof}
Let $\Phi=\iota_{\mc M}\oplus\pi$ be the direct sum representation. Then $\scr G(\pi)=\Phi(\mc M)$. If $\pi$ is normal, then $\Phi$ is normal (Thm. \ref{lb78}), and hence $\Phi(\mc M)$ is a von Neumann algebra by Thm. \ref{lb85}.

Conversely, assume that $\Phi(\mc M)$ is a von Neumann algebra. We view $\mc H$ as a subrepresentation of $\Phi(\mc M)\curvearrowright \mc H\oplus\mc K$. Since $\Phi(\mc M)\rightarrow\Phi(\mc M)|_{\mc H}$ is clearly bijective. By Thm. \ref{lb85}, we have $\mc H\oplus\mc K\ll\mc H$ as representations of $\Phi(\mc M)$. Therefore, if we let $E$ be the projection of $\mc H\oplus\mc K$ onto $\mc H$, then $z_{\Phi(\mc M)'}(E)=1$. Thus $\pi$ is normal.
\end{proof}






\begin{thm}\label{lb84}
Let $\mc M\curvearrowright\mc H$ be a von Neumann algebra. Let $(\mc K,\pi)$ be a representation of $\mc M$. Let $\mc T$ be one of the three $\sigma$-topologies in Thm. \ref{lb86}. Then the following are equivalent
\begin{enumerate}
\item[(1)]  $\pi$ is normal.
\item[(2)] $\pi$ is continuous with respect to the topologies $\mc T$ on $\mc M$ and on $\End(\mc K)$.
\end{enumerate}
\end{thm}



\begin{proof}
Suppose that $\pi$ is normal. Then by Thm. \ref{lb81}, $\pi$ is unitarily equivalent to a subrepresentation of $\varpi$ where $\varpi$ is an orthogonal direct sum of $\mc M\curvearrowright\mc H$. One checks easily that $\varpi$ is $\mc T$-continuous\footnote{Note that one cannot show that $\varpi$ is strongly*/strongly/weakly continuous.}, and hence $\pi$ is $\mc T$-continuous. This proves (1)$\Rightarrow$(2).

Conversely, assume that $\pi$ is $\mc T$-continuous. Then the graph $\scr G(\pi)$ is closed under the topology $\mc T$ on $\End(\mc H\oplus\mc K)$. The closed graph Thm. \ref{lb87} implies that $\pi$ is normal. Hence (2)$\Rightarrow$(1).
\end{proof}





\begin{comment}
\begin{lm}\label{lb83}
Let $U,V$ be topological vector spaced whose topologies are defined by the the sets of seminorms $\fk P$ and $\fk Q$ respectively. Assume that $T:U\rightarrow V$ is a continuous linear map. Then for each $q\in\fk Q$ there exists $C>0$ and $p_1,\dots,p_n\in\fk P$ such that for all $\xi\in U$ we have
\begin{align*}
q\circ T(\xi)\leq C\max\{p_1(\xi),\cdots,p_n(\xi)\}
\end{align*}
\end{lm}

\begin{proof}
Since $T$ is continuous at $0$, there exist $C>0$ and $p_1,\dots,p_n\in\fk P$ such that setting $p=C\max\{p_1,\cdots,p_n\}$, we have $q\circ T(\xi)< 1$ whenever $p(\xi)< 1$. Thus for each $\xi\in U$, and for each $r>p(\xi)$ we have $p(r^{-1}\xi)<1$ and hence $q\circ T(r^{-1}\xi)<1$. Thus $q\circ T(\xi)<r$. Letting $r\searrow p(\xi)$, we get $q\circ T(\xi)\leq p(\xi)$.
\end{proof}
\end{comment}
























The following theorem relates the generating property of the $*$-set representations and the normal homomorphisms/isomorphisms of von Neumann algebras. Its importance lies in the fact that von Neumann algebras and their representations often arise from $*$-set representations, cf. e.g. Thm. \ref{lb95}.






\begin{thm}\label{lb94}
Let $(\mc H,\varphi)$ and $(\mc K,\psi)$ be representations of a $*$-set $\fk S$. Let $\mc M=\varphi(\fk S)''$ and $\mc N=\psi(\fk S)''$. Assume $(\mc K,\psi)\ll(\mc H,\varphi)$. Then the following are true.
\begin{enumerate}
\item There is a unique normal unital $*$-homomorphism $\pi:\mc M\rightarrow\mc N$ such that
\begin{align}
\pi(\varphi(a))=\psi(a)\qquad(\forall a\in\fk S)
\end{align}
Moreover, $\pi$ is surjective.
\item $(\mc K,\psi)\sim(\mc H,\varphi)$ if and only if the above map $\pi:\mc M\rightarrow\mc N$ is bijective (i.e., $\pi$ is an isomorphism of von Neumann algebras, cf. Cor. \ref{lb101}).
\end{enumerate}
\end{thm}



\begin{proof}
1. Let $\mc A$ be the unital $*$-subalgebra of $\End(\mc H)$ generated by $\varphi(\fk S)$. Then the uniqueness of $\pi$ follows from the fact that $\pi$ is $\sigma$-strongly continuous (Thm. \ref{lb84}) and that $\mc A$ is $\sigma$-strongly dense in $\mc M$ (Thm. \ref{lb86}). We now address the existence. By Cor. \ref{lb81}, we may view $(\mc K,\psi)$ as a subrepresentation of $(\bigoplus_i\mc H,\oplus_i\varphi)$. Let $E$ be the projection of $\bigoplus_i\mc H$ onto $\mc K$, Then by Thm. \ref{lb79} and \ref{lb80}, $\mc N=(\oplus_i\varphi)(\mc M)\cdot E$. Then $\pi$ can be defined by sending $x\in\mc M$ to $(\oplus_i\varphi)(x)E$, and $\pi$ is clearly surjective.

2. Assume $(\mc K,\psi)\sim(\mc H,\varphi)$. By Part 1, there is a normal unital $*$-homomorphism $\varpi:\mc N\rightarrow\mc M$ such that $\varpi(\psi(a))=\varphi(a)$ for all $a\in\fk S$. Then $\varpi\circ\pi=\id$ on $\varphi(\fk S)$, and hence on $\mc M$ by the uniqueness in part 1. Similarly $\pi\circ\varpi=\id$. So $\pi$ is bijective.

Conversely, assume that $\pi$ is an isomorphism. Then by Cor. \ref{lb101}, we have $(\mc K,\pi)\sim(\mc H,\iota_{\mc M})$ as $\mc M$-representations. From this one easily checks that $(\mc K,\psi)\sim(\mc H,\varphi)$.
\end{proof}





\begin{eg}\label{lb89}
Let $\fk M$ be the set of finite Borel measures on $\Cbb^N$. Recall that $B(\Cbb^N)$ is the unital $*$-algebra of bounded Borel functions on $\Cbb^N$. Then the multiplication operator $M_f$ of $f\in B(\Cbb^N)$  defines a representation of $B(\Cbb^N)$ on $\mc K=\bigoplus_{\mu\in\fk M}L^2(\Cbb^N,\mu)$. This representation is faithful. (Proof: Suppose $M_f=0$, by choosing $\mu$ to be the Dirac measure on $x\in\Cbb^N$ we see that $f(x)=0$. So $f=0$.) Therefore, we can view $B(\Cbb^N)$ as a unital $*$-subalgebra of $\End(\mc K)$. In particular, $B(\Cbb^N)$ is equipped with the $\sigma$-strong topology.

Let $T_1,\dots,T_N$ be strongly commuting normal closed operators on a Hilbert space $\mc H$. Let $\pi:f\in B(\Cbb^N)\mapsto f(T_1,\dots,T_N)$. Then $(\mc H,\pi)$ is a normal representation of $B(\Cbb^N)$. In other words, we have $(\mc H,\pi)\ll(\mc K,M)$ as $*$-set representations of $B(\Cbb^N)$. This is clear, since the spectral Thm. \ref{lb35} implies that $(\mc H,\pi)$ is unitarily equivalent to a direct sum of some of the components of $\bigoplus_{\mu\in\fk M}L^2(\Cbb^N,\mu)$.

Alternatively, the fact that $\pi$ is normal follows from the easy observation  that the property \eqref{eq32} is equivalent to the fact that $\pi$ is $\sigma$-strongly continuous. 

If $T_1,\dots,T_N$ are also bounded, then the Borel functional calculus Thm. \ref{lb28} can be reformulated as saying that $\pi$ is the unique normal representation of $B(\Cbb^N)$ sending $z_1,\dots,z_N$ to $T_1,\dots,T_N$.  \hfill\qedsymbol
\end{eg}


\subsection*{$\star$ The $\sigma$-topologies on the unit balls of von Neumann algebras}


\begin{rem}
If $\mc M$ is a von Neumann algebra, one shows easily that the $\sigma$-strong*/$\sigma$-strong/$\sigma$-weak topology on the unit ball $B_{\mc M}=\{x\in\mc M:\Vert x\Vert\leq1\}$ is equal to the strong*/strong/weak topology. 
\end{rem}

The bicommutant theorem has the following refinement; compare this with the uniform boundedness property in Lem. \ref{lb18}.

\begin{thm}[\textbf{Kaplansky's density theorem}]\label{lb88}
Let $\fk S$ be a set of bounded operators on $\mc H$. Let $\mc A$ be the unital $*$-subalgebra of $\End(\mc H)$ generated by $\fk S$. Let $\mc T$ be one of the topologies as in Thm. \ref{lb86}. Let $\mc M=\fk S''$. Then $B_{\mc A}=\{x\in\mc A:\Vert x\Vert\leq 1\}$ is $\mc T$-dense in $B_{\mc M}=\{x\in\mc M:\Vert x\Vert\leq 1\}$.
\end{thm}




\begin{proof}[Sketch of the proof]
It suffices to show that any self-adjoint $x\in B_{\mc M}$ can be approximated strongly (and hence $\sigma$-strongly*) by self-adjoint elements of $B_{\mc A}$. By Thm. \ref{lb86}, there is a self-adjoint net  $(x_\alpha)$ in $\mc A$ converging strongly to $x$.  

We first consider the special case that $C:=\sup_\alpha\Vert x_\alpha\Vert$ is finite. Then one shows easily that $\lim_\alpha f(x_\alpha)$ converges strongly to $f(x)$ whenever $f$ is a polynomial, and hence (by Stone-Weierstrass) whenever $f:\Rbb\rightarrow\Rbb$ is a continuous. Take $f$ to be any continuous function satisfying $\Vert f\Vert_{l^\infty(\Rbb)}\leq 1$ and $f(t)=t$ if $|t|\leq 1$. Then $(f(x_\alpha))$ is a net in $B_{\mc A}$ converging strongly to $f(x)=x$, finishing the proof.

In the general case, the Cayley transform $y_\alpha=(x_\alpha-\im)\cdot (x_\alpha+\im)^{-1}$ (which is unitary) converges strongly to $y=(x-\im)\cdot (x+\im)^{-1}$ since
\begin{align*}
y-y_\alpha=2\im(x+\im)^{-1}(x-x_\alpha)(x_\alpha+\im)^{-1}
\end{align*}
Let $f$ be as in the above paragraph, but also having compact support. Then $g(z)=f(\im(1+z)/(1-z))$ defines a continuous function $\mbb S^1\rightarrow\Rbb$. Then $g(y_\alpha)$ converges strongly to $g(y)=f(x)=x$ by the same reasoning as in the previous paragraph.

We leave the details to the readers, or cf. \cite[Sec. 5.3]{Kad}. 
\end{proof}

\begin{thm}\label{lb99}
Let $\mc M\curvearrowright\mc H$ be a von Neumann algebra. Let $(\mc K,\pi)$ be a representation of $\mc M$. Let $\mc T$ be one of the three $\sigma$-topologies in Thm. \ref{lb86}. Let $B_{\mc M}=\{x\in\mc M:\Vert x\Vert\leq1\}$. Then the following are equivalent
\begin{enumerate}
\item[(1)]  $\pi$ is normal.
\item[(2)] The restriction $\pi:B_{\mc M}\rightarrow\End(\mc H)$ is continuous with respect to the topologies $\mc T$ on $B_{\mc M}$ and on $\End(\mc H)$.
\end{enumerate}
\end{thm}
Note that the range $\pi(B_{\mc M})$ must be in the closed unit ball due to Prop. \ref{lb46}. Therefore, any $\sigma$-topologies on $\pi(B_{\mc M})$ is equivalent to the topology without $\sigma$.

\begin{proof}
(1)$\Rightarrow$(2) is obvious. Assume (2). Then the continuity of $\pi|_{B_{\mc M}}$ implies that $B_{\scr G(\pi)}$ is $\mc T$-closed in $\End(\mc H\oplus\mc K)$, and hence $\mc T$-closed in $B_{\scr G(\pi)''}$. By Kaplansky's density Thm. \ref{lb88}, we have $B_{\scr G(\pi)}=B_{\scr G(\pi)''}$. Hence $\scr G(\pi)=\scr G(\pi)''$. Therefore $\pi$ is normal by the closed graph Thm. \ref{lb87}.
\end{proof}



\subsection*{$\star$ Normal cyclic representations and positive linear functionals}

We give an application of Thm. \ref{lb99}. If $(\mc K,\pi)$ is a presentation of a unital $*$-algebra $\scr A$, we say that $\Omega\in\mc H$ is a \textbf{cyclic vector} if $\scr A\Omega$ is dense in $\mc K$. A representation equipped with a cyclic vector is called a \textbf{cyclic representation}. 

By Zorn's lemma, any representation of $\scr A$ is an (orthogonal) direct sum of cyclic representations. Now we let $\scr A$ be a von Neumann algebra $\mc M\curvearrowright\mc H$. Then by Prop. \ref{lb78}, the normality of $\mc K$ is equivalent to that of each cyclic component. The latter has the following criteria:


\begin{co}\label{lb102}
Let $(\mc K,\pi)$ be a cyclic representation of a von Neumann algebra $\mc M\curvearrowright\mc H$ with cyclic vector $\Omega$. Let
\begin{align}
\omega:\mc M\rightarrow\Cbb\qquad x\mapsto\bk{\pi(x)\Omega|\Omega}\label{eq37}
\end{align}
Let $\mc M^+=\{x\in\mc M:x\geq0\}$ and $B^+_{\mc M}=\{x\in\mc M:0\leq x\leq 1\}$. Let $\mc T$ be one of the three $\sigma$-topologies in Thm. \ref{lb86}. Then the following are equivalent.
\begin{enumerate}[label=(\arabic*)]
\item $(\mc K,\pi)$ is a normal representation of $\mc M$.
\item There exists a collection $(\xi_i)_{i\in I}$ in $\mc H$ satisfying $\sum_i\Vert\xi_i\Vert^2<+\infty$, such that  
\begin{align*}
\omega(x)=\sum_i \bk{x\xi_i|\xi_i}
\end{align*}
for all $x\in\mc M$.
\item $\omega$ is $\mc T$-continuous.
\item $\omega|_{\mc M^+}$ is $\mc T$-continuous.
\item $\omega|_{B^+_{\mc M}}$ is $\mc T$-continuous.
\end{enumerate}
\end{co}

\begin{proof}
(1)$\Rightarrow$(2): This follows from the fact that $(\mc K,\pi)$ is unitarily equivalent to a subrepresentation of a direct sum of $\mc H$. Hence $\Omega$ can be viewed as an element of $\bigoplus_i\mc H$.

(2)$\Rightarrow$(3), (3)$\Rightarrow$(4), and (4)$\Rightarrow$(5) are obvious.

(5)$\Rightarrow$(1): Assume (5). By Thm. \ref{lb99}, to show (1), it suffices to show that if $(x_\alpha)$ is a net in $B_{\mc M}=\{x\in\mc M:\Vert x\Vert\leq 1\}$ converging ($\sigma$-)strongly* to $x\in B_{\mc M}$, then for each $\xi\in\mc K$ we have
\begin{align*}
\lim_\alpha \bk{\pi(x_\alpha)\xi|\xi}=\bk{x\xi|\xi} \tag{$\star$}\label{eq36}
\end{align*}
Since $\sup_\alpha\Vert x_\alpha\Vert<+\infty$, it suffices to prove \eqref{eq36} for any $\xi$ in a given dense subspace, say $\pi(\mc M)\Omega$. 

Note that $(x_\alpha-x)^*(x_\alpha-x)$ converges $\sigma$-strongly to $0$. Choose any $y\in\mc M$. Then
\begin{align*}
h_\alpha=y^*(x_\alpha-x)^*(x_\alpha-x)y
\end{align*}
converges $\sigma$-strongly in $rB_{\mc M}^+=\{ra:a\in B_{\mc M}^+\}$ to $0$ where $r$ is a suitable number $>0$. Note that $\omega|_{B_{\mc M}^+}$ is $\mc T$-continuous. So $\omega|_{rB_{\mc M}^+}$ is  $\mc T$-continuous, and hence $\sigma$-strongly* continuous, and hence $\sigma$-strongly continuous (since the elements of $rB_{\mc M}^+$ are self-adjoint). So $\lim_\alpha \omega(h_\alpha)=0$, which means precisely that \eqref{eq36} holds for $\xi=\pi(y)\Omega$. This finishes the proof of (1).
\end{proof}

\begin{rem}
A linear functional $\omega:\mc M\rightarrow\Cbb$ is called \textbf{positive} if $\omega(x)\geq0$ whenever $x\in\mc M$ is $\geq0$. Clearly, if $(\mc K,\pi)$ is a cyclic representation of a von Neumann algebra $\mc M\curvearrowright\mc H$, then \eqref{eq37} gives a positive linear functional. Conversely, a positive linear functional $\omega$ gives rise to a cyclic representation $(\mc K,\pi)$ of $\mc M$ if we let $\mc K$ be the completion of the (possibly degenerate) inner products space whose elements are $x\in\mc M$ and whose (degenerate) inner products are given by
\begin{align*}
\bk{x|y}=\omega(y^*x)
\end{align*}
The left multipliction of $\mc M$ on $\mc M$ gives rise to the action of $\mc M$ on $\mc K$. The cyclic vector is $1$. This is called the \textbf{Gelfand-Naimark-Segal (GNS) construction}. One checks easily that the GNS constructions implements a bijection between:
\begin{itemize}
\item Equivalence classes of cyclic representations of $\mc M$.
\item Positive linear functionals on $\mc M$.
\end{itemize}
Here, we say that two cyclic representations $(\mc K_1,\pi_1)$ and $(\mc K_2,\pi_2)$ (with cyclic vectors $\Omega_1,\Omega_2$) are \textbf{equivalent} if there is a unitary equivalence of $\mc M$-representations $U:\mc K_1\rightarrow\mc K_2$ such that $U\Omega_1=\Omega_2$.

Using Cor. \ref{lb102}, we can define a positive linear functional $\omega$ to be \textbf{normal} if it satisfies one of (2), (3), (4), (5) of Cor. \ref{lb102}, equivalently, if its associated cyclic representation is normal.  \hfill\qedsymbol
\end{rem}




























\section{Classification of abelian von Neumann algebras and their affiliated closed operators}


In this section, we fix $X$ to be a measurable space. We shall discuss measure theoretic representations of the algebra of bounded measurable complex functions $\mc L^\infty(X)$. If $\mu_\blt=(\mu_i)_{i\in I}$ is a collection of measures on $X$, for each (not necessarily bounded) Borel function $f:X\rightarrow\Cbb$ on $L^2(X,\mu)$ we let $M^{\mu_\blt}_f$ denote the multiplication operator of $f$ on $\bigoplus_{i\in I}L^2(X,\mu_i)$. 





\begin{pp}\label{lb90}
Let $\mu$ be a $\sigma$-finite measure on $X$. The following are true.
\begin{enumerate}
\item There exists a measurable $h:X\rightarrow\Rbb_{>0}$ such that $d\nu=hd\mu$ is a finite measure on $X$.
\item Let $h:X\rightarrow\Rbb_{>0}$ be measurable. Let $d\nu=hd\mu$. Then there is a unique unitary map
\begin{align*}
U:L^2(X,\nu)\rightarrow L^2(X,\mu)\qquad \xi\mapsto\sqrt h\xi
\end{align*}
Moreover, for each measurable $f:X\rightarrow\Cbb$ we have
\begin{align*}
UM_f^\nu U^{-1}=M_f^\mu\qquad(\text{on }L^2(X,\mu))
\end{align*}
In particular, both sides have domain $\{\xi\in L^2(X,\mu): \int_X |f\xi|^2d\mu<+\infty\}$.
\end{enumerate}
\end{pp}



\begin{proof}
To prove part 1, one writes $X$ as a countable disjoint union of $\mu$-finite measurable subsets $A_1\sqcup A_2\sqcup\cdots$, and takes $h=\sum_n n^{-2}\mu(A_n)^{-1}\cdot\chi_{A_n}$. The proof of part 2 is straightforward.
\end{proof}


\begin{rem}
If $\mu$ is a finite measure, the map $f\in L^\infty(X,\mu)\mapsto M_f1\in L^2(X,\mu)$ is injective. Thus, we view $L^\infty(X,\mu)$ as a unital $*$-subalgebra of $\End(L^2(X,\mu))$. Then $L^\infty(X,\mu)$ also equals $\{M_f:f\in\mc L^\infty(X)\}$. By Prop. \ref{lb90}, we can do the same thing if $\mu$ is only $\sigma$-finite.
\end{rem}


A special case of the classification of abelian von Neumann algebras is the following result.

\begin{pp}\label{lb93}
Let $\mu$ be a $\sigma$-finite measure on $X$. Then on $L^2(X,\mu)$ we have $L^\infty(X,\mu)'=L^\infty(X,\mu)$. In particular, $L^\infty(X,\mu)$ is a von Neumann algebra on $L^2(X,\mu)$ defined by multiplication.
\end{pp}



\begin{proof}
By Prop. \ref{lb90}, we assume WLOG that $\mu$ is finite. Let $T\in L^\infty(X,\mu)'$. Since $1\in L^2(X,\mu)$, we can define $f=T1$ which is in $L^2(X,\mu)$. Then for each $g\in L^\infty(X,\mu)$ we have
\begin{align*}
Tg=TM_g1=M_gT1=gf=fg \tag{$\star$}\label{eq33}
\end{align*}
If $\Vert f\Vert_{L^\infty}=+\infty$, then $E:=|f|^{-1}\big([\Vert T\Vert+1,+\infty)\big)$ is not $\mu$-null. Thus $\chi_E$ is nonzero in $L^2(X,\mu)$ and
\begin{align*}
\Vert T\chi_E\Vert_{L^2}^2=\Vert f\chi_E\Vert_{L^2}^2=\int_E|f|^2d\mu\geq (\Vert T\Vert+1)^2\cdot\mu(E)=(\Vert T\Vert+1)^2\cdot\Vert \chi_E\Vert^2_{L^2}
\end{align*}
This is impossible. So $f\in L^\infty(X,\mu)$. Now \eqref{eq33} shows that $T=M_g$ on $L^\infty(X,\mu)$. Hence $T=M_g$ on $L^2(X,\mu)$ since both operators are bounded.
\end{proof}


Recall that if $\mu,\nu$ are measures on $X$, we say that $\nu$ is absolutely continuous with respect to $\mu$ and write \pmb{$\nu\ll\mu$} if for every measurable $E\subset X$ satisfying $\mu(E)=0$ we must have $\nu(E)=0$. More generally:

\begin{df}
Let $(\mu_i)_{i\in I}$ and $(\nu_j)_{j\in J}$ be collections of $\sigma$-finite measures on $X$. We say that $(\nu_j)_{j\in J}$ is \textbf{absolutely continuous} with respect to $(\mu_i)_{i\in I}$ and write
\begin{align*}
\pmb{(\nu_j)_{j\in J}\ll (\mu_i)_{i\in I}}
\end{align*}
if for each $j\in J$ there exists a countable set $I_j\subset I$ such that for every measurable $E\subset X$ satisfying $\mu_i(E)=0$ for all $i\in I_j$, we have $\nu_j(E)=0$ .
\end{df}



Our next goal is to relate $(\nu_j)_{j\in J}\ll (\mu_i)_{i\in I}$ and the generating property for representations of $\mc L^\infty(X)$. The following theorem gives a fun and alternative proof of the Radon-Nikodym theorem.


\begin{thm}[\textbf{Radon-Nikodym}]\label{lb91}
Let $\mu,\nu$ be $\sigma$-finite measures on $X$. The following are equivalent.
\begin{enumerate}[label=(\arabic*)]
\item $\nu\ll\mu$.
\item We have $(L^2(X,\nu),M^\nu)\precsim(L^2(X,\mu),M^\mu)$ as representations of $\mc L^\infty(X)$.
\item $d\nu=hd\mu$ for some measurable $h:X\rightarrow\Rbb_{\geq0}$.
\end{enumerate}
\end{thm}

\begin{proof}
(1)$\Rightarrow$(2): By Prop. \ref{lb90}, we assume WLOG that $\mu,\nu$ are finite. Let $T$ be an unbounded operator $L^2(X,\mu)\rightarrow L^2(X,\nu)$ with dense domain $L^\infty(X,\mu)$ defined by $T\xi=\xi$. This is well defined, since $\nu\ll\mu$ implies that if $\Vert\xi\Vert_{L^2(X,\mu)}=0$ then $\Vert \xi\Vert_{L^2(X,\nu)}=0$. We claim that $T$ is closable. Suppose that $(\xi_n)$ is a sequence in $L^\infty(X,\mu)$ that is $L^2(X,\mu)$-converging to $0$, and that $(\xi_n)$ is a Cauchy sequence in $L^2(X,\nu)$. Let $\omega=\mu+\nu$. Then $(\xi_n)$ is a Cauchy sequence in $L^2(X,\omega)$. So there is a measurable $\xi:X\rightarrow\Cbb$ such that $\int|\xi|^2d\omega<+\infty$ and $\lim_n\int|\xi-\xi_n|^2d\omega=0$, i.e.,
\begin{align*}
\lim_n\int|\xi-\xi_n|^2d\mu+\lim_n\int|\xi-\xi_n|^2d\nu=0
\end{align*}
Since $\lim\int |\xi_n|^2d\mu=0$, we must have $\int |\xi|^2d\mu=0$. So $\int|\xi|^2d\nu=0$ (because $\nu\ll\mu$). Hence $\lim_n\int|\xi_n|^2d\nu=0$, i.e., $(T\xi_n)$ converges to $0$ in $L^2(X,\nu)$.

We have proved that $T$ is closable. $\Rng(T)$ clearly contains $L^\infty(X,\nu)$, and hence is dense. Thus, if we let $U$ be the phase of $\ovl T$, then $U:L^2(X,\mu)\rightarrow L^2(X,\nu)$ is a partial isometry satisfying $UU^*=1$.  For each $f\in\mc L^\infty(X)$ we clearly have $M_f^\nu T\subset TM_f^\mu$. Since $M_f^*=M_{f^*}$, we have $(M_f^\nu)^*T\subset T(M_f^\mu)^*$. Thus, viewing $T$ as an unbounded operator on $L^2(X,\mu)\oplus L^2(X,\nu)$ (with dense domain $L^\infty(X,\mu)\oplus L^2(X,\mu)$, and which is zero when restricted to $L^2(X,\nu)$), we have
\begin{align*}
M^{\mu\oplus\nu}_fT\subset TM^{\mu\oplus\nu}_f\qquad (M^{\mu\oplus\nu}_f)^*T\subset T(M^{\mu\oplus\nu}_f)^*
\end{align*}
where $M^{\mu\oplus\nu}_f$ is the multiplication operator of $f$ on $L^2(X,\mu)\oplus L^2(X,\nu)$. Therefore, by Prop. \ref{lb26}, $M^{\mu\oplus\nu}_f$ commutes strongly with $T$, and hence commutes adjointly with $U$ (by Cor. \ref{lb34}). Thus $U^*$ realizes $L^2(X,\nu)$ as a subrepresentation of $L^2(X,\mu)$. 

(2)$\Rightarrow$(3): Again, by Prop. \ref{lb90}, we assume that $\mu,\nu$ are finite. Let $V:L^2(X,\nu)\rightarrow L^2(X,\mu)$ be an isometric homomorphism of $\mc L^\infty(X)$-representations. Since $1\in L^2(X,\nu)$, we have $T1\in L^2(X,\mu)$, which is represented by some measurable $g:X\rightarrow\Cbb$ satisfying $\int_X|g|^2d\mu<+\infty$. Then for each $f\in\mc L^\infty(X)$ we have
\begin{align*}
\int_X |f|^2d\nu=\Vert M_f^\nu1\Vert_{L^2(X,\nu)}^2=\Vert VM_f^\nu1\Vert_{L^2(X,\mu)}^2=\Vert M_f^\mu V1\Vert_{L^2(X,\mu)}^2=\int_X|fg|^2d\mu
\end{align*}
So $d\nu=|g|^2d\mu$.

(3)$\Rightarrow$(1): This is obvious.
\end{proof}





\begin{thm}\label{lb92}
Let $(\mu_i)_{i\in I}$ and $(\nu_j)_{j\in J}$ be collections of $\sigma$-finite measures on $X$. For each $f\in\mc L^\infty(X,\mu)$, The following are equivalent.
\begin{enumerate}[label=(\arabic*)]
\item $(\nu_j)_{j\in J}\ll (\mu_i)_{i\in I}$.
\item For each $j\in J$ we have $L^2(X,\nu_j)\precsim \bigoplus_{i\in I}L^2(X,\mu_i)$.
\item $(\bigoplus_{j\in J}L^2(X,\nu_j),M^{\nu_\blt})\ll (\bigoplus_{i\in I}L^2(X,\mu_i),M^{\mu_\blt})$ as representations of the $*$-set $\mc L^\infty(X,\mu)$.
\end{enumerate}
\end{thm}

\begin{proof}
By Prop. \ref{lb90}, we assume that all $\mu_i$ and $\nu_j$ are finite measures. Note that (2)$\Rightarrow$(3) is obvious.

(1)$\Rightarrow$(2): Assume (1). Choose any $j\in J$. Let $I_j\subset I$ be a countable set such that for each measurable $E\subset X$ satisfying $\mu_i(E)=0$ for all $i\in I_j$ we have $\nu_j(E)=0$. By scaling each $\mu_i$, we assume $\omega:=\sum_{i\in I_j}\mu_i$ is a finite measure. Then $\nu_j\ll\omega$, and hence $L^2(X,\nu_j)\precsim L^2(X,\omega)$ by Thm. \ref{lb91}. Let $1_{\mu_i}$ be the constant function $1$ of $L^2(X,\mu_i)$. Then for each $\xi\in L^2(X,\omega)$ we have
\begin{align*}
\sum_{i\in I_j}\Vert\xi\Vert_{L^2(X,\mu_i)}^2=\Vert \xi\Vert_{L^2(X,\omega)}^2<+\infty
\end{align*}
which shows that $\oplus_{i\in I_j}1_{\mu_i}$ belongs to $\Dom(M_\xi)$, and
\begin{align*}
U:L^2(X,\omega)\rightarrow \bigoplus_{i\in I_j}L^2(X,\mu_i)\qquad \xi\mapsto M_f(\oplus_{i\in I_j}1_{\mu_i})
\end{align*}
is an isometry. One checks easily that $U$ is a homomorphism. So $L^2(X,\omega)\precsim\bigoplus_{i\in I}L^2(X,\mu_i)$. This proves (2).

(3)$\Rightarrow$(1). Assume (3). It suffices to fix each $j\in J$ and show $\nu_j\ll(\mu_i)_{i\in I}$. We know $L^2(X,\nu_j)\ll \bigoplus_{i\in I}L^2(X,\mu_i)$. By Cor. \ref{lb81}, $L^2(X,\nu_j)$ is $\precsim$ to a direct sum of $\bigoplus_{i\in I}L^2(X,\mu_i)$. Thus, we may find $(\mu_k)_{k\in K}$ such that
\begin{align*}
\{\mu_i:i\in I\}=\{\mu_k:k\in K\}
\end{align*}
as sets, and $L^2(X,\nu_j)\precsim \bigoplus_{k\in K}L^2(X,\mu_k)$. Clearly $(\mu_k)_{k\in K}\ll(\mu_i)_{i\in I}$. Thus, it suffices to prove $\nu_j\ll(\mu_k)_{k\in K}$.

Let $U:L^2(X,\nu_j)\rightarrow\bigoplus_{k\in K}L^2(X,\mu_k)$ be an isometric homomorphism. Let $1_{\nu_j}$ be the constant function $1$ in $L^2(X,\nu_j)$. Then $U1=\oplus_{k\in K}\xi_k$ where $\sum_k\Vert\xi_k\Vert^2<+\infty$. Thus there is a countable set $K_j\subset K$ outside of which $\Vert\xi_k\Vert_{L^2(X,\mu_k)}=0$. Similar to the proof of (2)$\Rightarrow$(3) of Thm. \ref{lb91} one sees that $d\nu_j=\sum_{k\in K_j}|\xi_k|^2d\mu_k$. Clearly $\nu_j\ll(\mu_k)_{k\in K_j}$. This proves (1).
\end{proof}



\begin{thm}\label{lb95}
Let $(\mu_i)_{i\in I}$ be a \uwave{countable} collection of $\sigma$-finite measures on $X$. Define
\begin{align}
L^\infty(X,\mu_\blt):=\{M^{\mu_\blt}_f:f\in\mc L^\infty(X)\}
\end{align}
Then $L^\infty(X,\mu_\blt)$ is a von Neumann algebra on $\bigoplus_{i\in I}L^2(X,\mu_i)$.
\end{thm}

\begin{proof}
By Prop. \ref{lb90} we assume WLOG that $\nu:=\sum_i\mu_i$ is a finite measure. Then $(\mu_i)_{i\in I}\ll\nu$, and hence $\bigoplus_i L^2(X,\mu_i)\ll L^2(X,\nu)$ by Thm. \ref{lb92}. By Prop. \ref{lb93}, $L^\infty(X,\nu)$ is a von Neumann algebra on $L^2(X,\nu)$. Therefore, by the surjectivity mentioned in part 1 of Thm. \ref{lb94}, $L^\infty(X,\mu_\blt)$ is a von Neumann algebra.
\end{proof}


Recall that $B(\Cbb^N)$ is the set of bounded complex Borel functions on $\Cbb^N$.

\begin{thm}\label{lb96}
Let $T_1,\dots,T_N$ be strongly commuting normal closed operators on a \uwave{separable} Hilbert space $\mc H$. Then
\begin{align}\label{eq34}
\{T_1,\dots,T_N\}''=\{f(T_1,\dots,T_N):f\in B(\Cbb^N)\}
\end{align}
More generally, a closed operator affiliated with $\{T_1,\dots,T_N\}''$ is precisely of the form $f(T_1,\dots,T_N)$ where $f:\Cbb^N\rightarrow\Cbb$ is Borel.
\end{thm}

\begin{proof}
Step 1. By Thm. \ref{lb50}, $f(T_1,\dots,T_N)$ is affiliated with $\mc M=\{T_1,\dots,T_N\}''$ for each Borel $f:\Cbb^N\rightarrow\Cbb$. In particular, we have ``$\supset$" in \eqref{eq34}. Let us prove "$\subset$". Let $T_n=V_nH_n=H_nV_n$ be the polar decomposition of $T_n$ where $H_n\geq0$ and $V_n$ is the phase. Set $R_n=(1+H_n)^{-1}$. One sees easily (e.g. by spectral theorem) that $T_i$ is an unbounded Borel functional calculus of $V_i,R_i$. Therefore, if we can prove that any $x\in\mc M$ is a bounded Borel functional calculus of $V_1,R_1,\dots,V_N,R_N$, then by Thm. \ref{lb48}, $x$ is a bounded Borel functional calculus of $T_1,\dots,T_N$. Note that $\mc M=\{V_1,R_1,\dots,V_n,R_n\}''$ by Thm. \ref{lb30}.

From the above discussion, we see that in order to prove "$\subset$" for \eqref{eq34}, it suffices to assume that $T_1,\dots,T_N$ are bounded. Since $\mc H$ is separable, by Thm. \ref{lb8}, we may assume that $\mc H=\bigoplus_{i\in I}L^2(\Cbb^N,\mu_i)$ where $(\mu_i)_{i\in I}$ is a countable collection of finite Borel measures on $\Cbb^N$, and $T_n=M_{z_n}$. Then $\mc M=\{M_{z_1},\dots,M_{z_N}\}''$. Since $M_{z_i}$ belongs to $L^\infty(\Cbb^N,\mu_\blt)$ (which is a von Neumann algebra by Thm. \ref{lb95}), we obtain $\mc M\subset L^\infty(\Cbb^N,\mu_\blt)$. But the elements of $L^\infty(\Cbb^N,\mu_\blt)$ are precisely the bounded Borel functional calculi of $M_{z_1},\dots,M_{z_N}$. We are done with the proof of \eqref{eq34}.\\[-1ex]

Step 2. It remains to prove that every closed operator $T$ affiliated with $\mc M$ is of the form $f(T_1,\dots,T_N)$. Since $\mc M$ is abelian, $T$ is normal. Therefore, $T$ has polar decomposition $T=VH=HV$ where $V$ and $H$ commutes strongly. Let $R=(1+H)^{-1}$. By Step 1, there exist $\alpha,\beta\in B(\Cbb^N)$ such that $V=\alpha(T_\blt)$ and $R=\beta(T_\blt)$. As in Step 1, let us assume that $\mc H=\bigoplus_{i\in I} L^2(\Cbb^N,\mu_i)$ and $T_n=M_{z_n}$. Then $R=M_\beta$. 

Let $E=\{p\in\Cbb^N:0<\beta(p)\leq 1\}$. Since $0\leq R\leq 1$ and $R$ is injective, for all $i$ we have $\mu_i(\Cbb^N\setminus E)=0$. Replace $\beta$ with $\chi_E\cdot\beta+\chi_{\Cbb^N\setminus E}$. Then, besides $R=M_\beta$ we also have $0<\beta\leq 1$ everywhere. Let $\gamma=-1+1/\beta$. Then $H=-1+R^{-1}=M_\gamma=\gamma(T_\blt)$. Thus $T=\alpha(T_\blt)\gamma(T_\blt)$. Since $(\alpha\gamma)(T_\blt)$ is the closure of $\alpha(T_\blt)\gamma(T_\blt)$ (cf. Thm. \ref{lb47}), we must have $T=(\alpha\gamma)(T_\blt)$.
\end{proof}


We are ready to classify abelian von Neumann algebras on separable Hilbert spaces.

\begin{thm}\label{lb97}
Let $\mc M$ be an abelian von Neumann algebra on a \uwave{separable} Hilbert space $\mc H$. Then there exists a bounded positive operator $H\in\mc M$ such that
\begin{align*}
\mc M=\{f(H):f\text{ is a bounded Borel function }\Rbb\rightarrow\Cbb\}
\end{align*}
More generally, a closed operator affiliated with $\mc M$ is precisely of the form $f(H)$ where $f:\Rbb\rightarrow\Cbb$ is Borel.
\end{thm}


\begin{proof}
By Thm. \ref{lb96}, it suffices to prove that $\mc M$ is generated by a bounded positive operator $H$. We first show that $B_{\mc M}=\{T\in\End(\mc H):\Vert T\Vert\leq 1\}$ is separable under the weak operator topology. Note that $B_{\mc M}$ is weakly compact: If $(T_\blt)$ is a net in $B_{\mc M}$, then viewed as a net of functions $\mc H\times\mc H\rightarrow\Cbb$, $(\xi,\eta)\mapsto\bk{T_\blt\xi|\eta}$, it has a subnet converging to a function on $\mc H\times\mc H$ due to the Tychonoff theorem. One checks easily that this function is sesquilinear and is bounded on the unit ball of $\mc H$, and hence defines $T\in\End(\mc H)$. Thus the subnet of $T_\blt$ converges weakly to $T$, and hence $T\in B_\mc M$. This proves that $B_{\mc M}$ is weakly compact.

The weak operator topology on $B_{\mc M}$ is metrizable by the metric
\begin{align*}
d(T_1,T_2)=\sum_{m,n} 2^{-m-n}\cdot|\bk{(T_1-T_2)\xi_m|\xi_n}|
\end{align*}
where $\xi_1,\xi_2,\dots$ are a countable dense subset of the closed unit ball of $\mc H$. Recall that every compact metric space is second countable. Therefore $B_{\mc M}$ is weakly second countable, and hence separable.  

It follows that $\mc M$ is weakly separable. Note that if $H\in\End(\mc H)$ is self-adjoint, then $\{H\}''$ is generated by $\chi_{[a,b]}(H)$ where $a,b\in\mbb Q$. Therefore $\mc M$ is weakly generated by countably many projections $e_0,e_1,e_2,\dots$ where are clearly commuting. Let $H=\sum_{n\geq0}3^{-n}e_n$. 

Let us show that $e_0\in\{H\}''$. Write $H=e_0+H_1$. Then $0\leq H_1\leq 1/2$. By the spectral Thm. \ref{lb8}, by performing a unitary equivalence on $\mc H$, we have that $\mc H=\bigoplus_{i\in I} L^2(\Cbb^2,\mu_i)$ (where $I$ is countable) and $e_0=M_f$ and $H_1=M_g$. By adding functions to $f$ and $g$ that are $\mu_i$-a.e. zero for all $i$, we assume that $f=\chi_E$ for some Borel $E\subset\Cbb^2$ and $0\leq g\leq 1/2$. Thus $f+g\geq 1$ precisely on $E$, i.e. $\chi_{[1,+\infty)\circ(f+g)}=\chi_E$. Therefore, noting $H=M_{f+g}$, we obtain
\begin{align*}
\chi_{[1,+\infty)}(H)=\chi_{[1,+\infty)}(M_{f+g})\xlongequal{\text{Thm. \ref{lb48}}}M_{\chi_{[1,+\infty)}\circ(f+g)}=M_{\chi_E}=e_0
\end{align*}
This proves $e_0\in\{H\}''$. 

Similarly, for each $k\geq0$, setting $H_k=\sum_{n\geq k}3^{-n}e_n$, we have $e_k\in\{H_k\}''$. Thus $e_0\in\{H\}''$ implies $H_1\in\{H\}''$, and hence $e_1\in\{H_1\}''\subset\{H\}''$ implies  $H_2\in\{H\}''$, and hence $e_2\in\{H_2\}''\subset\{H\}''$ implies $H_3\in\{H\}''$, etc. Repeating this procedure, we see that $e_k\in\{H\}''$ for all $k$. Thus $\{H\}''=\mc M$.
\end{proof}





\begin{co}\label{lb98}
Let $T$ be a closed operator on a separable Hilbert space. The following are equivalent.
\begin{enumerate}
\item[(1)] $T$ is normal.
\item[(2)] $T=f(H)$ for some Borel function $f:\Rbb\rightarrow\Cbb$ and some bounded positive operator $H$.
\item[(3)] $T=f(H)$ for some Borel function $f:\Rbb\rightarrow\Cbb$ and some self-adjoint closed operator $H$.
\end{enumerate}
\end{co}


\begin{proof}
(2)$\Rightarrow$(3) and (3)$\Rightarrow$(1) are clear. Assume (1). Then $\mc M=\{T\}''$ is abelian. Thus, (2) follows from Thm. \ref{lb97}.
\end{proof}













%\hypertarget{beforeindex}{}







\appendix
\section{Vector/operator valued holomorphic functions}\label{lb55}

Let $\mc B$ be a Banach space, and let $O$ be an open subset of $\Cbb$. A function $f:O\rightarrow\mc B$ is called \textbf{holomorphic} if the limit
\begin{align*}
	\lim_{w\rightarrow z}\frac{f(w)-f(z)}{w-z}
\end{align*}
exists for each $z\in O$. The limit is denoted by $f'(z)$ or $\partial_z f(z)$.

If $f:O\rightarrow\mc B$ is holomorphic, and $C$ is an oriented piecewise smooth curve in $O$, we define
\begin{align}
\int_C f(z)dz=\int_a^b f(\gamma(t))\gamma'(t)dt	
\end{align}
for any parametrization $\gamma:[a,b]\rightarrow O$ of $C$, and the right hand side can be understood as e.g. approximation in the norm topology of $\mc B$ using Riemann sums. Thus 
\begin{align*}
\varphi\Big(\int_Cf(z)dz\Big)=\int_C \varphi\circ f(z)dz
\end{align*}
for each bounded linear functional $\varphi\in\mc B^*$, which shows that our definition of $\int_Cfdz$ is independent of the choice of $\gamma$.


\begin{pp}\label{lb57}
	Assume $\mc B=\End(\mc H)$, $f:O\rightarrow\End(\mc H)$ is holomorphic, and $C$ is a piecewise smooth curve in $O$. Let $\ovl O=\{\ovl z:z\in O\}$. Let $\ovl C=\{\ovl z:z\in C\}$ whose orientation is the reflection of that of $C$ along the $x$-axis. Define $f^*:\ovl O\rightarrow\End(\mc H)$ by $f^*(z)=f(\ovl z)^*$ (i.e., the adjoint of $f(\ovl z)$). Then $f^*$ is holomorphic, and
	\begin{align}
		\Big(\int_C f(z)dz \Big)^*=\int_{\ovl C} f^*(z)dz.	
	\end{align}
\end{pp}


\begin{proof}
It is a straightforward check using definition that $f^*$ is holomorphic. If $\gamma:[a,b]\rightarrow\Cbb$ is a parametrization of $C$, then $\ovl \gamma:t\in[a,b]\mapsto \ovl{\gamma(t)}$ is one of $\ovl C$. Then
\begin{align*}
&\Big(\int_C f(z)dz \Big)^*=\Big(\int_a^b f(\gamma(t))\gamma'(t)dt \Big)^*=\int_a^b f(\gamma(t))^*\ovl\gamma'(t)dt\\
=&\int_a^b f^*(\ovl\gamma(t))\ovl\gamma'(t)dt=\int_{\ovl C} f^*(z)dz.
\end{align*}
\end{proof}



\begin{thm}\label{lb56}
Assume $f$ is continuous in the norm topology of $\mc B$. Let $\Phi$ be a set of (bounded) linear functionals of $\mc B$, separating in the sense that for any $x,y\in\mc B$, if $\phi(x)=\phi(y)$ for every $\phi\in\Phi$, then $x=y$. Assume that for each $\phi\in\Phi$, the function $\phi\circ f:O\rightarrow\Cbb$ is holomorphic, then $f$ is holomorphic.
\end{thm}

\begin{proof}
Choose any circle $C$ such that both $C$ and its inside is contained in $O$. Then for any $z\in O$, as $\varphi\circ f$ is holomorphic, 
\begin{align*}
\varphi(f(z))=\int_C \frac{\varphi(f(\zeta))}{\zeta-z}d\zeta.
\end{align*}
It follows that
\begin{align*}
f(z)=\int_C \frac {f(\zeta)}{\zeta-z}d\zeta,
\end{align*}
and hence
\begin{align*}
\frac{f(w)-f(z)}{w-z}=	\int_C \frac {f(\zeta)}{(\zeta-z)(\zeta-w)}d\zeta,
\end{align*}
which converges as $w\rightarrow z$, because the integrand converges uniformly with respect to $\zeta$.
\end{proof}


\begin{rem}
The above Proposition reduces the study of holomorphic operator/vector valued functions to that of ordinary ones. For instance, suppose $f_n:O\rightarrow\mc B$ is a sequence of holomorphic functions converging uniformly to a function $f:O\rightarrow\mc B$ on compact subsets of $O$. $f$ is clearly continuous. Since the evaluation of $f$ with any bounded linear functional of $\mc B$ is clearly holomorphic, we conclude that $f$ is holomorphic. As a special case, $\sum_{n\in\Nbb} a_nz^n$ (where each $a_n\in\mc B$) is holomorphic on any open set on which the series converges absolutely. 
\end{rem}






If $O$ is a subset of $\Cbb^n$, we say $f:O\rightarrow\mc B$ is \textbf{holomorphic} if $f=f(z_1,\dots,z_n)$ is continuous (with respect to the norm topology) and holomophic on each variable $z_j$ (when the other variables are fixed).





























\printindex	
	\begin{thebibliography}{999999}
		\footnotesize	
		
		
		
		
		%\bibitem[ABD04]{ABD04}
		%Abe, T., Buhl, G. and Dong, C., 2004. Rationality, regularity, and $C_2$-cofiniteness. Transactions of the American Mathematical Society, 356(8), pp.3391-3402.
		
\bibitem[Fol]{Fol}
Folland, G.B., 1999. Real analysis: modern techniques and their applications (Vol. 40). John Wiley \& Sons.	
		
\bibitem[Kad]{Kad}
Kadison, R.V. and Ringrose, J.R., 1983. Fundamentals of the theory of operator algebras. Volume I: Elementary Theory

\bibitem[Mun]{Mun}
Munkres, J., Topology, 2nd ed., Pearson Education.

\bibitem[RS]{RS}
Reed, M., Simon, B., 1972. Methods of modern mathematical physics I: Functional Analysis. New York: Academic press.

\bibitem[Rud-R]{Rud-R}
Rudin, Walter. Real and Complex Analysis. New York: McGraw-Hill, 1987.
		
\bibitem[Rud-F]{Rud-F}
Rudin, W., 1991. Functional analysis. McGraw-Hill Science, Engineering \& Mathematics.
	
\bibitem[Sch]{Sch}
Schm\"udgen, K., 2012. Unbounded self-adjoint operators on Hilbert space (Graduate Text in Mathematics, Vol. 265). Springer Science \& Business Media.
		
		

\bibitem[vNeu29]{vNeu29}
Von Neumann, J. (1929). Zur Algebra der Funktionaloperationen und Theorie der Normalen Operatoren. Mathematische Annalen, 102(1), 370-427.


\bibitem[vNeu31]{vNeu31}
Von Neumann, J. (1931). \"Uber Funktionen von Funktionaloperatoren. Annals of Mathematics, 32(2), 191-226.


\bibitem[vNeu32]{vNeu32}
Von Neumann, J. (1932). \"Uber adjungierte Funktionaloperatoren. Annals of Mathematics, 33(2), 294-310.





		
	\end{thebibliography}
	%\noindent {\small \sc Department of Mathematics, Rutgers University, New Brunswick, USA.}
	
	\noindent {\textit{E-mail}}: binguimath@gmail.com
\end{document}